!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=17)}([function(t,e,n){"use strict";n.r(e),n.d(e,"gl",(function(){return a})),n.d(e,"layers",(function(){return c})),n.d(e,"dataShader",(function(){})),n.d(e,"editTex",(function(){return s})),n.d(e,"store",(function(){return k})),n.d(e,"state",(function(){return A})),n.d(e,"resolution",(function(){return E})),n.d(e,"mPt",(function(){return O})),n.d(e,"dPt",(function(){return I})),n.d(e,"ptTree",(function(){return T})),n.d(e,"newEditTex",(function(){return B})),n.d(e,"modifyDefine",(function(){return F}));var r,o,i,a,c,s,u=n(3),l=(n(10),n(12)),f=n(2),g=n(13),p=n(6),d=n(4),h=n(5),m=n(1),y=n(15),v=n(14);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E,k=Object(v.createStore)(g.reducer),A=k.getState();var O=new u.vec(0,0),I=new m.k.create(0,0,64),T=new y.kdTree([],(function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}),["x","y"]);function j(t,e){if(!t)return null;if(t.obj.id==e)return t.obj;var n=j(t.left,e);return n||j(t.right,e)}function C(){i.update(),function(){o.clearRect(0,0,o.canvas.width,o.canvas.height);var t={x:0,y:0},e=function(){var t,e,n=1e3,r=x(A.scene.editItems);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o.id!=A.scene.editItems[A.scene.editItem].id){var i=u.distPrim(O,o);i<n&&(t=o,n=i)}}}catch(t){r.e(t)}finally{r.f()}return{d:n,sel:t}}(),n=e.d,r=e.sel;(t={x:O.x,y:O.y}).x=(O.x*(64/I[2])+I[0])*E.x*(E.y/E.x),t.y=(O.y*(64/I[2])+I[1])*E.y;var i="("+O.x.toFixed(3)+", "+O.y.toFixed(3)+")";o.fillStyle="black",o.fillText("Cursor: "+i,t.x+10,t.y),void 0!==r&&n<0&&(o.fillStyle=r.idColHex,o.fillText("Sel Item: "+n,t.x+10,t.y+12))}();var t=m.f(a.canvas);t&&(m.f(o.canvas),k.dispatch(f.statusRes({x:a.canvas.width,y:a.canvas.height}))),c.forEach((function(e){e.bbox&&Object(d.updateMatrices)(e),e.needsUpdate&&k.dispatch(f.sceneItemUpdate(index,!1)),a.useProgram(e.programInfo.program),t&&(e.uniforms.u_resolution[0]=a.canvas.width,e.uniforms.u_resolution[1]=a.canvas.height),e.uniforms.u_mPt&&(e.uniforms.u_mPt[0]=O.x,e.uniforms.u_mPt[1]=O.y),e.uniforms.u_dPt&&(e.uniforms.u_dPt=I),e.prim==A.scene.editItems[A.scene.editItem].id&&("object"===w(e.uniforms.u_stroke)&&(e.uniforms.u_stroke=h(A.ui.properties.stroke).gl().slice(0,3)),"object"===w(e.uniforms.u_fill)&&(e.uniforms.u_fill=h(A.ui.properties.fill).gl().slice(0,3)),"number"==typeof e.uniforms.u_weight&&(e.uniforms.u_weight=A.ui.properties.weight),"number"==typeof e.uniforms.u_weight&&(e.uniforms.u_weight=A.ui.properties.weight),"number"==typeof e.uniforms.u_opacity&&(e.uniforms.u_opacity=A.ui.properties.opacity),"number"==typeof e.uniforms.u_radius&&(e.uniforms.u_radius=A.ui.properties.radius)),"number"==typeof e.uniforms.u_cTex&&(e.uniforms.u_cTex=e.uniforms.u_eTex.cTexel),m.j(e.programInfo,e.uniforms)}))}k.subscribe((function(){return function(){A=k.getState(),E=A.status.resolution,O=u.vecSet(O,A.cursor.pos.x,A.cursor.pos.y);var t,e=x(A.scene.pts);try{for(e.s();!(t=e.n()).done;){var n=t.value;1==n.update&&(T.insert(n),n.update=!1)}}catch(t){e.e(t)}finally{e.f()}var r,o=x(A.scene.rmPts);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=j(T.root,i);T.remove(a),k.dispatch(f.sceneFinRmvPt(i))}}catch(t){o.e(t)}finally{o.f()}return A}()}));var M=0;function P(t){var e=.001*t;Math.min(.1,e-M);M=e,C(),a.viewport(0,0,a.canvas.width,a.canvas.height),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),m.d(a,c),A.status.raster&&(r.toBlob((function(t){q(t,"screencapture-".concat(r.width,"x").concat(r.height,".png"))})),k.dispatch(f.statusRaster(!1))),requestAnimationFrame(P)}var L=new u.vec(0,0);function R(t){t.preventDefault(),t.ctrlKey?I[2]=Math.max(1,I[2]+.1*t.deltaY):(I[0]+=.001*t.deltaX,I[1]+=.001*t.deltaY)}function D(t){A.ui.drag&&(u.vecSet(L,A.cursor.pos.x,A.cursor.pos.y),canvasContainer.addEventListener("mousemove",N),canvasContainer.addEventListener("mouseup",U))}function N(t){u.vecSet(I,A.cursor.pos.x-L.x,A.cursor.pos.y-L.y),console.log(I)}function U(t){canvasContainer.removeEventListener("mousemove",N),canvasContainer.removeEventListener("mouseup",U)}var z,q=(z=document.createElement("a"),document.body.appendChild(z),z.style.display="none",function(t,e){var n=window.URL.createObjectURL(t);z.href=n,z.download=e,z.click()});function B(){s=new u.PolyPoint(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},A.ui.properties),16)}function F(t,e,n){var r=t.shader.slice(),o="#define "+e+" ",i=r.indexOf(o);i+=o.length;var a=r.slice(0,i),c=r.slice(i+2);r=(a+=n+"\n")+c,(void 0).shader=r}!function(){var t=document.querySelector("#canvasContainer"),e=document.querySelector("#text");if(o=e.getContext("2d"),r=document.querySelector("#c"),a=r.getContext("webgl2",{premultipliedAlpha:!1}),m.h({attribPrefix:"a_"}),m.f(a.canvas),m.f(o.canvas),k.dispatch(f.statusRes({x:r.width,y:r.height})),k.dispatch(f.cursorGridScale(64)),function(t){var e=E.x/E.y,n=2/t,r=2/t,o=(e/n-e/n%1)%2;o=Math.abs(o-1);var i={x:n,y:r,z:.5*n,w:.1*r};k.dispatch(f.cursorGrid(i))}(A.cursor.scale),a){console.log(a.getSupportedExtensions()),i=new l.GhostUI,t.addEventListener("mousedown",D),t.onwheel=R,c=[];var n=m.e.translation(m.k.create(0,0,0));n=m.e.scale(n,m.k.create(1,1,1));var s={u_textureMatrix:m.e.copy(n),u_resolution:m.k.create(a.canvas.width,a.canvas.height,0),u_dPt:I},g=new d.Layer({type:"grid"},p.simpleVert,p.gridFrag,s);c.push(g);var h=m.c(a,{src:"../assets/textures/leaves.jpg",color:[.125,.125,.125,.125]},(function(){})),y={u_textureMatrix:m.e.copy(n),u_resolution:m.k.create(a.canvas.width,a.canvas.height,0),u_dPt:I,u_img:h},v=new d.Layer({type:"img"},p.simpleVert,p.imgFrag,y);v.bbox=new u.bbox([{x:.25,y:.25}],.5),Object(d.updateMatrices)(v);var b={u_textureMatrix:m.e.copy(n),u_resolution:m.k.create(a.canvas.width,a.canvas.height,0),u_dPt:I,u_eTex:{}},_=new d.Layer({type:"demo"},p.simpleVert,p.demoFrag,b);_.bbox=new u.bbox([{x:.125,y:.125},{x:.3125,y:.3125}],0),Object(d.updateMatrices)(_);var w=new d.Layer(A.scene.editItems[A.scene.editItem],p.simpleVert,p.pLineEdit);c.push(w),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),requestAnimationFrame(P)}else console.log("your browser/OS/drivers do not support WebGL2")}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return F})),n.d(e,"b",(function(){return Le})),n.d(e,"c",(function(){return te})),n.d(e,"d",(function(){return De})),n.d(e,"e",(function(){return _})),n.d(e,"f",(function(){return Be})),n.d(e,"g",(function(){return Me})),n.d(e,"h",(function(){return qe})),n.d(e,"i",(function(){return Jt})),n.d(e,"j",(function(){return Te})),n.d(e,"k",(function(){return l}));
/* @license twgl.js 4.16.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */
let r=Float32Array;function o(t,e,n){const o=new r(3);return t&&(o[0]=t),e&&(o[1]=e),n&&(o[2]=n),o}function i(t,e,n){return(n=n||new r(3))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function a(t,e,n){return(n=n||new r(3))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function c(t,e,n){n=n||new r(3);const o=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=o,n[2]=i,n}function s(t,e){e=e||new r(3);const n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.sqrt(n);return o>1e-5?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=0,e[1]=0,e[2]=0),e}function u(t,e,n){return(n=n||new r(3))[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}var l=Object.freeze({__proto__:null,add:i,copy:function(t,e){return(e=e||new r(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},create:o,cross:c,distance:function(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},distanceSq:function(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},divide:function(t,e,n){return(n=n||new r(3))[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n},divScalar:function(t,e,n){return(n=n||new r(3))[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,n},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},lerp:function(t,e,n,o){return(o=o||new r(3))[0]=t[0]+n*(e[0]-t[0]),o[1]=t[1]+n*(e[1]-t[1]),o[2]=t[2]+n*(e[2]-t[2]),o},lerpV:function(t,e,n,o){return(o=o||new r(3))[0]=t[0]+n[0]*(e[0]-t[0]),o[1]=t[1]+n[1]*(e[1]-t[1]),o[2]=t[2]+n[2]*(e[2]-t[2]),o},length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},lengthSq:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},max:function(t,e,n){return(n=n||new r(3))[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n},min:function(t,e,n){return(n=n||new r(3))[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n},mulScalar:function(t,e,n){return(n=n||new r(3))[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n},multiply:u,negate:function(t,e){return(e=e||new r(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:s,setDefaultType:function(t){const e=r;return r=t,e},subtract:a});let f,g,p,d=Float32Array;function h(t,e){return(e=e||new d(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function m(t){return(t=t||new d(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e){e=e||new d(16);const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],s=t[6],u=t[7],l=t[8],f=t[9],g=t[10],p=t[11],h=t[12],m=t[13],y=t[14],v=t[15],b=g*v,_=y*p,w=s*v,x=y*u,S=s*p,E=g*u,k=o*v,A=y*i,O=o*p,I=g*i,T=o*u,j=s*i,C=l*m,M=h*f,P=a*m,L=h*c,R=a*f,D=l*c,N=n*m,U=h*r,z=n*f,q=l*r,B=n*c,F=a*r,H=b*c+x*f+S*m-(_*c+w*f+E*m),V=_*r+k*f+I*m-(b*r+A*f+O*m),$=w*r+A*c+T*m-(x*r+k*c+j*m),W=E*r+O*c+j*f-(S*r+I*c+T*f),K=1/(n*H+a*V+l*$+h*W);return e[0]=K*H,e[1]=K*V,e[2]=K*$,e[3]=K*W,e[4]=K*(_*a+w*l+E*h-(b*a+x*l+S*h)),e[5]=K*(b*n+A*l+O*h-(_*n+k*l+I*h)),e[6]=K*(x*n+k*a+j*h-(w*n+A*a+T*h)),e[7]=K*(S*n+I*a+T*l-(E*n+O*a+j*l)),e[8]=K*(C*u+L*p+R*v-(M*u+P*p+D*v)),e[9]=K*(M*i+N*p+q*v-(C*i+U*p+z*v)),e[10]=K*(P*i+U*u+B*v-(L*i+N*u+F*v)),e[11]=K*(D*i+z*u+F*p-(R*i+q*u+B*p)),e[12]=K*(P*g+D*y+M*s-(R*y+C*s+L*g)),e[13]=K*(z*y+C*o+U*g-(N*g+q*y+M*o)),e[14]=K*(N*s+F*y+L*o-(B*y+P*o+U*s)),e[15]=K*(B*g+R*o+q*s-(z*s+F*g+D*o)),e}function v(t,e,n){n=n||o();const r=e[0],i=e[1],a=e[2],c=r*t[3]+i*t[7]+a*t[11]+t[15];return n[0]=(r*t[0]+i*t[4]+a*t[8]+t[12])/c,n[1]=(r*t[1]+i*t[5]+a*t[9]+t[13])/c,n[2]=(r*t[2]+i*t[6]+a*t[10]+t[14])/c,n}function b(t,e,n){n=n||o();const r=e[0],i=e[1],a=e[2];return n[0]=r*t[0]+i*t[4]+a*t[8],n[1]=r*t[1]+i*t[5]+a*t[9],n[2]=r*t[2]+i*t[6]+a*t[10],n}var _=Object.freeze({__proto__:null,axisRotate:function(t,e,n,r){r=r||new d(16);let o=e[0],i=e[1],a=e[2];const c=Math.sqrt(o*o+i*i+a*a);o/=c,i/=c,a/=c;const s=o*o,u=i*i,l=a*a,f=Math.cos(n),g=Math.sin(n),p=1-f,h=s+(1-s)*f,m=o*i*p+a*g,y=o*a*p-i*g,v=o*i*p-a*g,b=u+(1-u)*f,_=i*a*p+o*g,w=o*a*p+i*g,x=i*a*p-o*g,S=l+(1-l)*f,E=t[0],k=t[1],A=t[2],O=t[3],I=t[4],T=t[5],j=t[6],C=t[7],M=t[8],P=t[9],L=t[10],R=t[11];return r[0]=h*E+m*I+y*M,r[1]=h*k+m*T+y*P,r[2]=h*A+m*j+y*L,r[3]=h*O+m*C+y*R,r[4]=v*E+b*I+_*M,r[5]=v*k+b*T+_*P,r[6]=v*A+b*j+_*L,r[7]=v*O+b*C+_*R,r[8]=w*E+x*I+S*M,r[9]=w*k+x*T+S*P,r[10]=w*A+x*j+S*L,r[11]=w*O+x*C+S*R,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},axisRotation:function(t,e,n){n=n||new d(16);let r=t[0],o=t[1],i=t[2];const a=Math.sqrt(r*r+o*o+i*i);r/=a,o/=a,i/=a;const c=r*r,s=o*o,u=i*i,l=Math.cos(e),f=Math.sin(e),g=1-l;return n[0]=c+(1-c)*l,n[1]=r*o*g+i*f,n[2]=r*i*g-o*f,n[3]=0,n[4]=r*o*g-i*f,n[5]=s+(1-s)*l,n[6]=o*i*g+r*f,n[7]=0,n[8]=r*i*g+o*f,n[9]=o*i*g-r*f,n[10]=u+(1-u)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:h,frustum:function(t,e,n,r,o,i,a){const c=e-t,s=r-n,u=o-i;return(a=a||new d(16))[0]=2*o/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/s,a[6]=0,a[7]=0,a[8]=(t+e)/c,a[9]=(r+n)/s,a[10]=i/u,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*i/u,a[15]=0,a},getAxis:function(t,e,n){const r=4*e;return(n=n||o())[0]=t[r+0],n[1]=t[r+1],n[2]=t[r+2],n},getTranslation:function(t,e){return(e=e||o())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:m,inverse:y,lookAt:function(t,e,n,r){return r=r||new d(16),f=f||o(),g=g||o(),p=p||o(),s(a(t,e,p),p),s(c(n,p,f),f),s(c(p,f,g),g),r[0]=f[0],r[1]=f[1],r[2]=f[2],r[3]=0,r[4]=g[0],r[5]=g[1],r[6]=g[2],r[7]=0,r[8]=p[0],r[9]=p[1],r[10]=p[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},multiply:function(t,e,n){n=n||new d(16);const r=t[0],o=t[1],i=t[2],a=t[3],c=t[4],s=t[5],u=t[6],l=t[7],f=t[8],g=t[9],p=t[10],h=t[11],m=t[12],y=t[13],v=t[14],b=t[15],_=e[0],w=e[1],x=e[2],S=e[3],E=e[4],k=e[5],A=e[6],O=e[7],I=e[8],T=e[9],j=e[10],C=e[11],M=e[12],P=e[13],L=e[14],R=e[15];return n[0]=r*_+c*w+f*x+m*S,n[1]=o*_+s*w+g*x+y*S,n[2]=i*_+u*w+p*x+v*S,n[3]=a*_+l*w+h*x+b*S,n[4]=r*E+c*k+f*A+m*O,n[5]=o*E+s*k+g*A+y*O,n[6]=i*E+u*k+p*A+v*O,n[7]=a*E+l*k+h*A+b*O,n[8]=r*I+c*T+f*j+m*C,n[9]=o*I+s*T+g*j+y*C,n[10]=i*I+u*T+p*j+v*C,n[11]=a*I+l*T+h*j+b*C,n[12]=r*M+c*P+f*L+m*R,n[13]=o*M+s*P+g*L+y*R,n[14]=i*M+u*P+p*L+v*R,n[15]=a*M+l*P+h*L+b*R,n},negate:function(t,e){return(e=e||new d(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,n,r,o,i,a){return(a=a||new d(16))[0]=2/(e-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(o-i),a[11]=0,a[12]=(e+t)/(t-e),a[13]=(r+n)/(n-r),a[14]=(i+o)/(o-i),a[15]=1,a},perspective:function(t,e,n,r,o){o=o||new d(16);const i=Math.tan(.5*Math.PI-.5*t),a=1/(n-r);return o[0]=i/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*a*2,o[15]=0,o},rotateX:function(t,e,n){n=n||new d(16);const r=t[4],o=t[5],i=t[6],a=t[7],c=t[8],s=t[9],u=t[10],l=t[11],f=Math.cos(e),g=Math.sin(e);return n[4]=f*r+g*c,n[5]=f*o+g*s,n[6]=f*i+g*u,n[7]=f*a+g*l,n[8]=f*c-g*r,n[9]=f*s-g*o,n[10]=f*u-g*i,n[11]=f*l-g*a,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateY:function(t,e,n){n=n||new d(16);const r=t[0],o=t[1],i=t[2],a=t[3],c=t[8],s=t[9],u=t[10],l=t[11],f=Math.cos(e),g=Math.sin(e);return n[0]=f*r-g*c,n[1]=f*o-g*s,n[2]=f*i-g*u,n[3]=f*a-g*l,n[8]=f*c+g*r,n[9]=f*s+g*o,n[10]=f*u+g*i,n[11]=f*l+g*a,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateZ:function(t,e,n){n=n||new d(16);const r=t[0],o=t[1],i=t[2],a=t[3],c=t[4],s=t[5],u=t[6],l=t[7],f=Math.cos(e),g=Math.sin(e);return n[0]=f*r+g*c,n[1]=f*o+g*s,n[2]=f*i+g*u,n[3]=f*a+g*l,n[4]=f*c-g*r,n[5]=f*s-g*o,n[6]=f*u-g*i,n[7]=f*l-g*a,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationX:function(t,e){e=e||new d(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new d(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new d(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new d(16);const r=e[0],o=e[1],i=e[2];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=r*t[3],n[4]=o*t[4],n[5]=o*t[5],n[6]=o*t[6],n[7]=o*t[7],n[8]=i*t[8],n[9]=i*t[9],n[10]=i*t[10],n[11]=i*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e){return(e=e||new d(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,n,r){r!==t&&(r=h(t,r));const o=4*n;return r[o+0]=e[0],r[o+1]=e[1],r[o+2]=e[2],r},setDefaultType:function(t){const e=d;return d=t,e},setTranslation:function(t,e,n){return t!==(n=n||m())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},transformDirection:b,transformNormal:function(t,e,n){n=n||o();const r=y(t),i=e[0],a=e[1],c=e[2];return n[0]=i*r[0]+a*r[1]+c*r[2],n[1]=i*r[4]+a*r[5]+c*r[6],n[2]=i*r[8]+a*r[9]+c*r[10],n},transformPoint:v,translate:function(t,e,n){n=n||new d(16);const r=e[0],o=e[1],i=e[2],a=t[0],c=t[1],s=t[2],u=t[3],l=t[4],f=t[5],g=t[6],p=t[7],h=t[8],m=t[9],y=t[10],v=t[11],b=t[12],_=t[13],w=t[14],x=t[15];return t!==n&&(n[0]=a,n[1]=c,n[2]=s,n[3]=u,n[4]=l,n[5]=f,n[6]=g,n[7]=p,n[8]=h,n[9]=m,n[10]=y,n[11]=v),n[12]=a*r+l*o+h*i+b,n[13]=c*r+f*o+m*i+_,n[14]=s*r+g*o+y*i+w,n[15]=u*r+p*o+v*i+x,n},translation:function(t,e){return(e=e||new d(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new d(16))===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e}const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],s=t[6],u=t[7],l=t[8],f=t[9],g=t[10],p=t[11],h=t[12],m=t[13],y=t[14],v=t[15];return e[0]=n,e[1]=a,e[2]=l,e[3]=h,e[4]=r,e[5]=c,e[6]=f,e[7]=m,e[8]=o,e[9]=s,e[10]=g,e[11]=y,e[12]=i,e[13]=u,e[14]=p,e[15]=v,e}});const w={};{const t=w;t[5120]=Int8Array,t[5121]=Uint8Array,t[5122]=Int16Array,t[5123]=Uint16Array,t[5124]=Int32Array,t[5125]=Uint32Array,t[5126]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function x(t){if(t instanceof Int8Array)return 5120;if(t instanceof Uint8Array)return 5121;if(t instanceof Uint8ClampedArray)return 5121;if(t instanceof Int16Array)return 5122;if(t instanceof Uint16Array)return 5123;if(t instanceof Int32Array)return 5124;if(t instanceof Uint32Array)return 5125;if(t instanceof Float32Array)return 5126;throw new Error("unsupported typed array type")}function S(t){if(t===Int8Array)return 5120;if(t===Uint8Array)return 5121;if(t===Uint8ClampedArray)return 5121;if(t===Int16Array)return 5122;if(t===Uint16Array)return 5123;if(t===Int32Array)return 5124;if(t===Uint32Array)return 5125;if(t===Float32Array)return 5126;throw new Error("unsupported typed array type")}function E(t){const e=w[t];if(!e)throw new Error("unknown gl type");return e}const k="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function A(t,e){Object.keys(e).forEach((function(n){e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(e[n]=t[n])}))}function O(...t){console.error(...t)}function I(t,e){return"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture}const T={attribPrefix:""};function j(t){A(t,T)}function C(t,e,n,r,o){t.bindBuffer(e,n),t.bufferData(e,r,o||35044)}function M(t,e,n,r){if(o=e,"undefined"!=typeof WebGLBuffer&&o instanceof WebGLBuffer)return e;var o;n=n||34962;const i=t.createBuffer();return C(t,n,i,e,r),i}function P(t){return"indices"===t}function L(t){return t.length?t:t.data}const R=/coord|texture/i,D=/color|colour/i;function N(t,e){let n;if(n=R.test(t)?2:D.test(t)?4:3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function U(t,e){return t.numComponents||t.size||N(e,L(t).length)}function z(t,e){if(k(t))return t;if(k(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type;return n||(n=P(e)?Uint16Array:Float32Array),new n(t.data)}function q(t,e){const n={};return Object.keys(e).forEach((function(r){if(!P(r)){const i=e[r],a=i.attrib||i.name||i.attribName||T.attribPrefix+r;if(i.value){if(!Array.isArray(i.value)&&!k(i.value))throw new Error("array.value is not array or typedarray");n[a]={value:i.value}}else{let e,c,s,u;if(i.buffer&&i.buffer instanceof WebGLBuffer)e=i.buffer,u=i.numComponents||i.size,c=i.type,s=i.normalize;else if("number"==typeof i||"number"==typeof i.data){const n=i.data||i,a=i.type||Float32Array,l=n*a.BYTES_PER_ELEMENT;c=S(a),s=void 0!==i.normalize?i.normalize:(o=a)===Int8Array||o===Uint8Array,u=i.numComponents||i.size||N(r,n),e=t.createBuffer(),t.bindBuffer(34962,e),t.bufferData(34962,l,i.drawType||35044)}else{const n=z(i,r);e=M(t,n,void 0,i.drawType),c=x(n),s=void 0!==i.normalize?i.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(n),u=U(i,r)}n[a]={buffer:e,numComponents:u,type:c,normalize:s,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var o})),t.bindBuffer(34962,null),n}const B=["position","positions","a_position"];function F(t,e,n){const r=q(t,e),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const i=e.indices;if(i){const e=z(i,"indices");o.indices=M(t,e,34963),o.numElements=e.length,o.elementType=x(e)}else o.numElements||(o.numElements=function(t,e){let n,r;for(r=0;r<B.length&&(n=B[r],!(n in e))&&(n=T.attribPrefix+n,!(n in e));++r);r===B.length&&(n=Object.keys(e)[0]);const o=e[n];t.bindBuffer(34962,o.buffer);const i=t.getBufferParameter(34962,34660);var a;t.bindBuffer(34962,null);const c=i/(5120===(a=o.type)||5121===a?1:5122===a||5123===a?2:5124===a||5125===a||5126===a?4:0),s=o.numComponents||o.size,u=c/s;if(u%1!=0)throw new Error(`numComponents ${s} not correct for length ${length}`);return u}(t,o.attribs));return o}function H(t,e,n){const r="indices"===n?34963:34962;return M(t,z(e,n),r)}function V(t,e){const n={};return Object.keys(e).forEach((function(r){n[r]=H(t,e[r],r)})),e.indices?(n.numElements=e.indices.length,n.elementType=x(z(e.indices))):n.numElements=function(t){let e,n;for(n=0;n<B.length&&(e=B[n],!(e in t));++n);n===B.length&&(e=Object.keys(t)[0]);const r=t[e],o=L(r).length,i=U(r,e),a=o/i;if(o%i>0)throw new Error(`numComponents ${i} not correct for length ${o}`);return a}(e),n}function $(t,e){let n=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const r=arguments[e];if(r instanceof Array||k(r))for(let e=0;e<r.length;++e)t[n++]=r[e];else t[n++]=r}},t.reset=function(t){n=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function W(t,e,n){return $(new(n||Float32Array)(t*e),t)}function K(t,e,n){const r=t.length,o=new Float32Array(3);for(let i=0;i<r;i+=3)n(e,[t[i],t[i+1],t[i+2]],o),t[i]=o[0],t[i+1]=o[1],t[i+2]=o[2]}function G(t,e,n){n=n||o();const r=e[0],i=e[1],a=e[2];return n[0]=r*t[0]+i*t[1]+a*t[2],n[1]=r*t[4]+i*t[5]+a*t[6],n[2]=r*t[8]+i*t[9]+a*t[10],n}function X(t,e){return K(t,e,b),t}function Y(t,e){return K(t,y(e),G),t}function Z(t,e){return K(t,e,v),t}function J(t,e){return Object.keys(t).forEach((function(n){const r=t[n];n.indexOf("pos")>=0?Z(r,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?X(r,e):n.indexOf("norm")>=0&&Y(r,e)})),t}function Q(t,e,n){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(n=n||0)+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function tt(t,e,n,r,o){t=t||1,e=e||1,n=n||1,r=r||1,o=o||m();const i=(n+1)*(r+1),a=W(3,i),c=W(3,i),s=W(2,i);for(let o=0;o<=r;o++)for(let i=0;i<=n;i++){const u=i/n,l=o/r;a.push(t*u-.5*t,0,e*l-.5*e),c.push(0,1,0),s.push(u,l)}const u=n+1,l=W(3,n*r*2,Uint16Array);for(let t=0;t<r;t++)for(let e=0;e<n;e++)l.push((t+0)*u+e,(t+1)*u+e,(t+0)*u+e+1),l.push((t+1)*u+e,(t+1)*u+e+1,(t+0)*u+e+1);return J({position:a,normal:c,texcoord:s,indices:l},o)}function et(t,e,n,r,o,i,a){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,i=i||0;const c=(o=o||Math.PI)-r,s=(a=a||2*Math.PI)-i,u=(e+1)*(n+1),l=W(3,u),f=W(3,u),g=W(2,u);for(let o=0;o<=n;o++)for(let a=0;a<=e;a++){const u=a/e,p=o/n,d=s*u+i,h=c*p+r,m=Math.sin(d),y=Math.cos(d),v=Math.sin(h),b=y*v,_=Math.cos(h),w=m*v;l.push(t*b,t*_,t*w),f.push(b,_,w),g.push(1-u,p)}const p=e+1,d=W(3,e*n*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<n;e++)d.push((e+0)*p+t,(e+0)*p+t+1,(e+1)*p+t),d.push((e+1)*p+t,(e+0)*p+t+1,(e+1)*p+t+1);return{position:l,normal:f,texcoord:g,indices:d}}const nt=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function rt(t){const e=(t=t||1)/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=W(3,24),a=W(3,24),c=W(2,24),s=W(3,12,Uint16Array);for(let t=0;t<6;++t){const e=nt[t];for(let s=0;s<4;++s){const u=n[e[s]],l=r[t],f=o[s];i.push(u),a.push(l),c.push(f)}const u=4*t;s.push(u+0,u+1,u+2),s.push(u+0,u+2,u+3)}return{position:i,normal:a,texcoord:c,indices:s}}function ot(t,e,n,r,o,i,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const c=void 0===i||i,s=void 0===a||a,u=(c?2:0)+(s?2:0),l=(r+1)*(o+1+u),f=W(3,l),g=W(3,l),p=W(2,l),d=W(3,r*(o+u/2)*2,Uint16Array),h=r+1,m=Math.atan2(t-e,n),y=Math.cos(m),v=Math.sin(m),b=o+(s?2:0);for(let i=c?-2:0;i<=b;++i){let a,c=i/o,s=n*c;i<0?(s=0,c=1,a=t):i>o?(s=n,c=1,a=e):a=t+i/o*(e-t),-2!==i&&i!==o+2||(a=0,c=0),s-=n/2;for(let t=0;t<h;++t){const e=Math.sin(t*Math.PI*2/r),n=Math.cos(t*Math.PI*2/r);f.push(e*a,s,n*a),i<0?g.push(0,-1,0):i>o?g.push(0,1,0):0===a?g.push(0,0,0):g.push(e*y,v,n*y),p.push(t/r,1-c)}}for(let t=0;t<o+u;++t)if(!(1===t&&c||t===o+u-2&&s))for(let e=0;e<r;++e)d.push(h*(t+0)+0+e,h*(t+0)+1+e,h*(t+1)+1+e),d.push(h*(t+0)+0+e,h*(t+1)+1+e,h*(t+1)+0+e);return{position:f,normal:g,texcoord:p,indices:d}}function it(t,e){e=e||[];const n=[];for(let r=0;r<t.length;r+=4){const o=t[r],i=t.slice(r+1,r+4);i.push.apply(i,e);for(let t=0;t<o;++t)n.push.apply(n,i)}return n}function at(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=it([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=it([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=t.length/3,o={position:W(3,r),texcoord:W(2,r),normal:W(3,r),color:W(4,r,Uint8Array),indices:W(3,r/3,Uint16Array)};o.position.push(t),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(e),o.color.push(n);for(let t=0;t<r;++t)o.indices.push(t);return o}function ct(t,e,n,r,o,a,c){if(o<=0)throw new Error("subdivisionDown must be > 0");const s=(c=c||1)-(a=a||0),l=2*(o+1)*4,f=W(3,l),g=W(3,l),p=W(2,l);function d(t,e,n){return t+(e-t)*n}function h(e,n,c,l,h,m){for(let y=0;y<=o;y++){const v=n/1,b=y/o,_=2*(v-.5),w=(a+b*s)*Math.PI,x=Math.sin(w),S=Math.cos(w),E=d(t,e,x),k=_*r,A=S*t,O=x*E;f.push(k,A,O);const I=i(u([0,x,S],c),l);g.push(I),p.push(v*h+m,b)}}for(let t=0;t<2;t++){const r=2*(t/1-.5);h(e,t,[1,1,1],[0,0,0],1,0),h(e,t,[0,0,0],[r,0,0],0,0),h(n,t,[1,1,1],[0,0,0],1,0),h(n,t,[0,0,0],[r,0,0],0,1)}const m=W(3,2*o*4,Uint16Array);function y(t,e){for(let n=0;n<o;++n)m.push(t+n+0,t+n+1,e+n+0),m.push(t+n+1,e+n+1,e+n+0)}const v=o+1;return y(0*v,4*v),y(5*v,7*v),y(6*v,2*v),y(3*v,1*v),{position:f,normal:g,texcoord:p,indices:m}}function st(t,e,n,r,o,i){return ot(t,t,e,n,r,o,i)}function ut(t,e,n,r,o,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const a=(i=i||2*Math.PI)-o,c=n+1,s=r+1,u=c*s,l=W(3,u),f=W(3,u),g=W(2,u),p=W(3,n*r*2,Uint16Array);for(let i=0;i<s;++i){const s=i/r,u=s*Math.PI*2,p=Math.sin(u),d=t+p*e,h=Math.cos(u),m=h*e;for(let t=0;t<c;++t){const e=t/n,r=o+e*a,i=Math.sin(r),c=Math.cos(r),u=i*d,y=c*d,v=i*p,b=c*p;l.push(u,m,y),f.push(v,h,b),g.push(e,1-s)}}for(let t=0;t<r;++t)for(let e=0;e<n;++e){const n=1+e,r=1+t;p.push(c*t+e,c*r+e,c*t+n),p.push(c*r+e,c*r+n,c*t+n)}return{position:l,normal:f,texcoord:g,indices:p}}function lt(t,e,n,r,o){if(e<3)throw new Error("divisions must be at least 3");o=o||1,r=r||0;const i=(e+1)*((n=n||1)+1),a=W(3,i),c=W(3,i),s=W(2,i),u=W(3,n*e*2,Uint16Array);let l=0;const f=t-r,g=e+1;for(let t=0;t<=n;++t){const i=r+f*Math.pow(t/n,o);for(let r=0;r<=e;++r){const o=2*Math.PI*r/e,f=i*Math.cos(o),p=i*Math.sin(o);if(a.push(f,0,p),c.push(0,1,0),s.push(1-r/e,t/n),t>0&&r!==e){const t=l+(r+1),e=l+r,n=l+r-g,o=l+(r+1)-g;u.push(t,e,n),u.push(t,n,o)}}l+=e+1}return{position:a,normal:c,texcoord:s,indices:u}}function ft(t){return function(e){const n=t.apply(this,Array.prototype.slice.call(arguments,1));return V(e,n)}}function gt(t){return function(e){const n=t.apply(null,Array.prototype.slice.call(arguments,1));return F(e,n)}}gt(at),ft(at),gt(rt),ft(rt),gt(tt),ft(tt),gt(et),ft(et),gt(ot),ft(ot),gt(Q),ft(Q),gt(ct),ft(ct),gt(st),ft(st),gt(ut),ft(ut),gt(lt),ft(lt);function pt(t){return!!t.texStorage2D}const dt=function(){const t={},e={};return function(n,r){return function(n){const r=n.constructor.name;if(!t[r]){for(const t in n)if("number"==typeof n[t]){const r=e[n[t]];e[n[t]]=r?`${r} | ${t}`:t}t[r]=!0}}(n),e[r]||"0x"+r.toString(16)}}();const ht={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},mt=k,yt=function(){let t;return function(){return t=t||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),t}}(),vt=6407,bt=33319,_t={};{const t=_t;t[6406]={numColorComponents:1},t[6409]={numColorComponents:1},t[6410]={numColorComponents:2},t[vt]={numColorComponents:3},t[6408]={numColorComponents:4},t[6403]={numColorComponents:1},t[36244]={numColorComponents:1},t[bt]={numColorComponents:2},t[33320]={numColorComponents:2},t[vt]={numColorComponents:3},t[36248]={numColorComponents:3},t[6408]={numColorComponents:4},t[36249]={numColorComponents:4},t[6402]={numColorComponents:1},t[34041]={numColorComponents:2}}let wt;function xt(t){if(!wt){const t={6406:{textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6409:{textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6410:{textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]}};t[vt]={textureFormat:vt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},t[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},t[6402]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5125,5123]},t[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},t[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},t[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},t[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},t[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},t[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},t[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},t[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},t[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},t[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},t[33323]={textureFormat:bt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},t[36757]={textureFormat:bt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},t[33327]={textureFormat:bt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},t[33328]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},t[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},t[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},t[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},t[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},t[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},t[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},t[32849]={textureFormat:vt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},t[35905]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},t[36194]={textureFormat:vt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},t[36758]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},t[35898]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},t[35901]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},t[34843]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},t[34837]={textureFormat:vt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},t[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},t[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},t[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},t[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},t[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},t[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},t[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},t[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},t[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},t[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},t[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},t[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},t[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},t[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},t[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},t[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},t[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},t[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},t[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},t[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},t[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},t[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},t[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},t[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},t[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},t[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(t).forEach((function(e){const n=t[e];n.bytesPerElementMap={},n.bytesPerElement.forEach((function(t,e){const r=n.type[e];n.bytesPerElementMap[r]=t}))})),wt=t}return wt[t]}function St(t,e){const n=xt(t);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[e];if(void 0===r)throw"unknown internal format";return r}function Et(t){const e=xt(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function kt(t){return 0==(t&t-1)}function At(t,e,n,r){if(!pt(t))return kt(e)&&kt(n);const o=xt(r);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function Ot(t){const e=xt(t);if(!e)throw"unknown internal format";return e.textureFilterable}function It(t,e,n){return mt(e)?x(e):n||5121}function Tt(t,e,n,r,o){if(o%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=o/r)%1)throw"can't guess dimensions"}else if((r=o/n)%1)throw"can't guess dimensions"}else{const t=Math.sqrt(o/(34067===e?6:1));t%1==0?(n=t,r=t):(n=o,r=1)}return{width:n,height:r}}function jt(t){ht.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function Ct(t){A(t,ht),t.textureColor&&jt(t.textureColor)}const Mt={};function Pt(t,e){void 0!==e.colorspaceConversion&&(Mt.colorspaceConversion=t.getParameter(37443),t.pixelStorei(37443,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(Mt.premultiplyAlpha=t.getParameter(37441),t.pixelStorei(37441,e.premultiplyAlpha)),void 0!==e.flipY&&(Mt.flipY=t.getParameter(37440),t.pixelStorei(37440,e.flipY))}function Lt(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(37443,Mt.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(37441,Mt.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(37440,Mt.flipY)}function Rt(t){Mt.unpackAlignment=t.getParameter(3317),pt(t)&&(Mt.unpackRowLength=t.getParameter(3314),Mt.unpackImageHeight=t.getParameter(32878),Mt.unpackSkipPixels=t.getParameter(3316),Mt.unpackSkipRows=t.getParameter(3315),Mt.unpackSkipImages=t.getParameter(32877))}function Dt(t){t.pixelStorei(3317,Mt.unpackAlignment),pt(t)&&(t.pixelStorei(3314,Mt.unpackRowLength),t.pixelStorei(32878,Mt.unpackImageHeight),t.pixelStorei(3316,Mt.unpackSkipPixels),t.pixelStorei(3315,Mt.unpackSkipRows),t.pixelStorei(32877,Mt.unpackSkipImages))}function Nt(t,e,n,r){var o;r.minMag&&(n.call(t,e,10241,r.minMag),n.call(t,e,10240,r.minMag)),r.min&&n.call(t,e,10241,r.min),r.mag&&n.call(t,e,10240,r.mag),r.wrap&&(n.call(t,e,10242,r.wrap),n.call(t,e,10243,r.wrap),(32879===e||(o=e,"undefined"!=typeof WebGLSampler&&o instanceof WebGLSampler))&&n.call(t,e,32882,r.wrap)),r.wrapR&&n.call(t,e,32882,r.wrapR),r.wrapS&&n.call(t,e,10242,r.wrapS),r.wrapT&&n.call(t,e,10243,r.wrapT),r.minLod&&n.call(t,e,33082,r.minLod),r.maxLod&&n.call(t,e,33083,r.maxLod),r.baseLevel&&n.call(t,e,33084,r.baseLevel),r.maxLevel&&n.call(t,e,33085,r.maxLevel)}function Ut(t,e,n){const r=n.target||3553;t.bindTexture(r,e),Nt(t,r,t.texParameteri,n)}function zt(t,e,n,r,o,i){i=i||6408;const a=(n=n||ht.textureOptions).target||3553;if(r=r||n.width,o=o||n.height,t.bindTexture(a,e),At(t,r,o,i))t.generateMipmap(a);else{const e=Ot(i)?9729:9728;t.texParameteri(a,10241,e),t.texParameteri(a,10240,e),t.texParameteri(a,10242,33071),t.texParameteri(a,10243,33071)}}function qt(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function Bt(t,e){return(e=e||{}).cubeFaceOrder||[34069,34070,34071,34072,34073,34074]}function Ft(t,e){const n=Bt(0,e).map((function(t,e){return{face:t,ndx:e}}));return n.sort((function(t,e){return t.face-e.face})),n}function Ht(t,e,n,r){const o=(r=r||ht.textureOptions).target||3553,i=r.level||0;let a=n.width,c=n.height;const s=r.internalFormat||r.format||6408,u=Et(s),l=r.format||u.format,f=r.type||u.type;if(Pt(t,r),t.bindTexture(o,e),34067===o){const u=n.width,g=n.height;let p,d;if(u/6===g)p=g,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(g/6===u)p=u,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(u/3==g/2)p=u/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(u/2!=g/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);p=u/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}const h=yt();h?(h.canvas.width=p,h.canvas.height=p,a=p,c=p,Ft(0,r).forEach((function(e){const r=d[2*e.ndx+0]*p,o=d[2*e.ndx+1]*p;h.drawImage(n,r,o,p,p,0,0,p,p),t.texImage2D(e.face,i,s,l,f,h.canvas)})),h.canvas.width=1,h.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=p,c=p,Ft(0,r).forEach((function(u){const g=d[2*u.ndx+0]*p,h=d[2*u.ndx+1]*p;t.texImage2D(u.face,i,s,p,p,0,l,f,null),createImageBitmap(n,g,h,p,p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){Pt(t,r),t.bindTexture(o,e),t.texImage2D(u.face,i,s,l,f,n),Lt(t,r),qt(r)&&zt(t,e,r,a,c,s)}))})))}else if(32879===o||35866===o){const e=Math.min(n.width,n.height),r=Math.max(n.width,n.height),a=r/e;if(a%1!=0)throw"can not compute 3D dimensions of element";const c=n.width===r?1:0,u=n.height===r?1:0;Rt(t),t.pixelStorei(3317,1),t.pixelStorei(3314,n.width),t.pixelStorei(32878,0),t.pixelStorei(32877,0),t.texImage3D(o,i,s,e,e,e,0,l,f,null);for(let r=0;r<a;++r){const a=r*e*c,s=r*e*u;t.pixelStorei(3316,a),t.pixelStorei(3315,s),t.texSubImage3D(o,i,0,0,r,e,e,1,l,f,n)}Dt(t)}else t.texImage2D(o,i,s,l,f,n);Lt(t,r),qt(r)&&zt(t,e,r,a,c,s),Ut(t,e,r)}function Vt(){}function $t(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}(t)?e:"anonymous"}function Wt(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function Kt(t,e,n){return Wt(t)?(setTimeout((function(){n(null,t)})),t):function(t,e,n){let r;if(n=n||Vt,e=void 0!==e?e:ht.crossOrigin,e=$t(t,e),"undefined"!=typeof Image){r=new Image,void 0!==e&&(r.crossOrigin=e);const o=function(){r.removeEventListener("error",i),r.removeEventListener("load",a),r=null},i=function(){const e="couldn't load image: "+t;O(e),n(e,r),o()},a=function(){n(null,r),o()};return r.addEventListener("error",i),r.addEventListener("load",a),r.src=t,r}if("undefined"!=typeof ImageBitmap){let o,i;const a=function(){n(o,i)},c={};e&&(c.mode="cors"),fetch(t,c).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){i=t,setTimeout(a)})).catch((function(t){o=t,setTimeout(a)})),r=null}return r}(t,e,n)}function Gt(t,e,n){const r=(n=n||ht.textureOptions).target||3553;if(t.bindTexture(r,e),!1===n.color)return;const o=function(t){return t=t||ht.textureColor,mt(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(n.color);if(34067===r)for(let e=0;e<6;++e)t.texImage2D(34069+e,0,6408,1,1,0,6408,5121,o);else 32879===r||35866===r?t.texImage3D(r,0,6408,1,1,1,0,6408,5121,o):t.texImage2D(r,0,6408,1,1,0,6408,5121,o)}function Xt(t,e,n,r){r=r||Vt,n=n||ht.textureOptions,Gt(t,e,n);return Kt((n=Object.assign({},n)).src,n.crossOrigin,(function(o,i){o?r(o,e,i):(Ht(t,e,i,n),r(null,e,i))}))}function Yt(t,e,n,r){r=r||Vt;const o=n.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const i=n.level||0,a=n.internalFormat||n.format||6408,c=Et(a),s=n.format||c.format,u=n.type||5121,l=n.target||3553;if(34067!==l)throw"target must be TEXTURE_CUBE_MAP";Gt(t,e,n),n=Object.assign({},n);let f=6;const g=[],p=Bt(0,n);let d;d=o.map((function(o,c){return Kt(o,n.crossOrigin,(h=p[c],function(o,c){--f,o?g.push(o):c.width!==c.height?g.push("cubemap face img is not a square: "+c.src):(Pt(t,n),t.bindTexture(l,e),5===f?Bt().forEach((function(e){t.texImage2D(e,i,a,s,u,c)})):t.texImage2D(h,i,a,s,u,c),Lt(t,n),qt(n)&&t.generateMipmap(l)),0===f&&r(g.length?g:void 0,e,d)}));var h}))}function Zt(t,e,n,r){r=r||Vt;const o=n.src,i=n.internalFormat||n.format||6408,a=Et(i),c=n.format||a.format,s=n.type||5121,u=n.target||35866;if(32879!==u&&35866!==u)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Gt(t,e,n),n=Object.assign({},n);let l=o.length;const f=[];let g;const p=n.level||0;let d=n.width,h=n.height;const m=o.length;let y=!0;g=o.map((function(o,a){return Kt(o,n.crossOrigin,(v=a,function(o,a){if(--l,o)f.push(o);else{if(Pt(t,n),t.bindTexture(u,e),y){y=!1,d=n.width||a.width,h=n.height||a.height,t.texImage3D(u,p,i,d,h,m,0,c,s,null);for(let e=0;e<m;++e)t.texSubImage3D(u,p,0,0,e,d,h,1,c,s,a)}else{let e,n=a;a.width===d&&a.height===h||(e=yt(),n=e.canvas,e.canvas.width=d,e.canvas.height=h,e.drawImage(a,0,0,d,h)),t.texSubImage3D(u,p,0,0,v,d,h,1,c,s,n),e&&n===e.canvas&&(e.canvas.width=0,e.canvas.height=0)}Lt(t,n),qt(n)&&t.generateMipmap(u)}0===l&&r(f.length?f:void 0,e,g)}));var v}))}function Jt(t,e,n,r){const o=(r=r||ht.textureOptions).target||3553;t.bindTexture(o,e);let i=r.width,a=r.height,c=r.depth;const s=r.level||0,u=r.internalFormat||r.format||6408,l=Et(u),f=r.format||l.format,g=r.type||It(0,n,l.type);if(mt(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const t=E(g);n=new t(n)}const p=St(u,g),d=n.byteLength/p;if(d%1)throw"length wrong size for format: "+dt(t,f);let h;if(32879===o||35866===o)if(i||a||c)!i||a&&c?!a||i&&c?(h=Tt(0,o,i,a,d/c),i=h.width,a=h.height):(h=Tt(0,o,i,c,d/a),i=h.width,c=h.height):(h=Tt(0,o,a,c,d/i),a=h.width,c=h.height);else{const t=Math.cbrt(d);if(t%1!=0)throw"can't guess cube size of array of numElements: "+d;i=t,a=t,c=t}else h=Tt(0,o,i,a,d),i=h.width,a=h.height;if(Rt(t),t.pixelStorei(3317,r.unpackAlignment||1),Pt(t,r),34067===o){const e=d/6*(p/n.BYTES_PER_ELEMENT);Ft(0,r).forEach(r=>{const o=e*r.ndx,c=n.subarray(o,o+e);t.texImage2D(r.face,s,u,i,a,0,f,g,c)})}else 32879===o||35866===o?t.texImage3D(o,s,u,i,a,c,0,f,g,n):t.texImage2D(o,s,u,i,a,0,f,g,n);return Lt(t,r),Dt(t),{width:i,height:a,depth:c,type:g}}function Qt(t,e,n){const r=n.target||3553;t.bindTexture(r,e);const o=n.level||0,i=n.internalFormat||n.format||6408,a=Et(i),c=n.format||a.format,s=n.type||a.type;if(Pt(t,n),34067===r)for(let e=0;e<6;++e)t.texImage2D(34069+e,o,i,n.width,n.height,0,c,s,null);else 32879===r||35866===r?t.texImage3D(r,o,i,n.width,n.height,n.depth,0,c,s,null):t.texImage2D(r,o,i,n.width,n.height,0,c,s,null);Lt(t,n)}function te(t,e,n){n=n||Vt,e=e||ht.textureOptions;const r=t.createTexture(),o=e.target||3553;let i=e.width||1,a=e.height||1;const c=e.internalFormat||6408;t.bindTexture(o,r),34067===o&&(t.texParameteri(o,10242,33071),t.texParameteri(o,10243,33071));let s=e.src;if(s)if("function"==typeof s&&(s=s(t,e)),"string"==typeof s)Xt(t,r,e,n);else if(mt(s)||Array.isArray(s)&&("number"==typeof s[0]||Array.isArray(s[0])||mt(s[0]))){const n=Jt(t,r,s,e);i=n.width,a=n.height}else Array.isArray(s)&&("string"==typeof s[0]||Wt(s[0]))?34067===o?Yt(t,r,e,n):Zt(t,r,e,n):(Ht(t,r,s,e),i=s.width,a=s.height);else Qt(t,r,e);return qt(e)&&zt(t,r,e,i,a,c),Ut(t,r,e),r}const ee=O;function ne(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const re={};function oe(t,e){return re[e].bindPoint}function ie(t,e){return function(n){t.uniform1i(e,n)}}function ae(t,e){return function(n){t.uniform1iv(e,n)}}function ce(t,e){return function(n){t.uniform2iv(e,n)}}function se(t,e){return function(n){t.uniform3iv(e,n)}}function ue(t,e){return function(n){t.uniform4iv(e,n)}}function le(t,e,n,r){const o=oe(0,e);return pt(t)?function(e){let i,a;I(0,e)?(i=e,a=null):(i=e.texture,a=e.sampler),t.uniform1i(r,n),t.activeTexture(33984+n),t.bindTexture(o,i),t.bindSampler(n,a)}:function(e){t.uniform1i(r,n),t.activeTexture(33984+n),t.bindTexture(o,e)}}function fe(t,e,n,r,o){const i=oe(0,e),a=new Int32Array(o);for(let t=0;t<o;++t)a[t]=n+t;return pt(t)?function(e){t.uniform1iv(r,a),e.forEach((function(e,r){let o,c;t.activeTexture(33984+a[r]),I(0,e)?(o=e,c=null):(o=e.texture,c=e.sampler),t.bindSampler(n,c),t.bindTexture(i,o)}))}:function(e){t.uniform1iv(r,a),e.forEach((function(e,n){t.activeTexture(33984+a[n]),t.bindTexture(i,e)}))}}function ge(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||5126,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function pe(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,n.value)}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5124,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function de(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,n.value)}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5125,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function he(t,e,n){const r=n.size,o=n.count;return function(n){t.bindBuffer(34962,n.buffer);const i=n.size||n.numComponents||r,a=i/o,c=n.type||5126,s=re[c].size*i,u=n.normalize||!1,l=n.offset||0,f=s/o;for(let r=0;r<o;++r)t.enableVertexAttribArray(e+r),t.vertexAttribPointer(e+r,a,c,u,s,l+f*r),void 0!==n.divisor&&t.vertexAttribDivisor(e+r,n.divisor)}}re[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(n){t.uniform1f(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1fv(e,n)}}},re[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(n){t.uniform2fv(e,n)}}},re[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(n){t.uniform3fv(e,n)}}},re[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniform4fv(e,n)}}},re[5124]={Type:Int32Array,size:4,setter:ie,arraySetter:ae},re[35667]={Type:Int32Array,size:8,setter:ce},re[35668]={Type:Int32Array,size:12,setter:se},re[35669]={Type:Int32Array,size:16,setter:ue},re[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(n){t.uniform1ui(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1uiv(e,n)}}},re[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(n){t.uniform2uiv(e,n)}}},re[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(n){t.uniform3uiv(e,n)}}},re[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(n){t.uniform4uiv(e,n)}}},re[35670]={Type:Uint32Array,size:4,setter:ie,arraySetter:ae},re[35671]={Type:Uint32Array,size:8,setter:ce},re[35672]={Type:Uint32Array,size:12,setter:se},re[35673]={Type:Uint32Array,size:16,setter:ue},re[35674]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}}},re[35675]={Type:Float32Array,size:36,setter:function(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}}},re[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}}},re[35685]={Type:Float32Array,size:24,setter:function(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}}},re[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}}},re[35687]={Type:Float32Array,size:24,setter:function(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}}},re[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}}},re[35689]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}}},re[35690]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}}},re[35678]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:3553},re[35680]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:34067},re[35679]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:32879},re[35682]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:3553},re[36289]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:35866},re[36292]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:35866},re[36293]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:34067},re[36298]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:3553},re[36299]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:32879},re[36300]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:34067},re[36303]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:35866},re[36306]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:3553},re[36307]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:32879},re[36308]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:34067},re[36311]={Type:null,size:0,setter:le,arraySetter:fe,bindPoint:35866};const me={};me[5126]={size:4,setter:ge},me[35664]={size:8,setter:ge},me[35665]={size:12,setter:ge},me[35666]={size:16,setter:ge},me[5124]={size:4,setter:pe},me[35667]={size:8,setter:pe},me[35668]={size:12,setter:pe},me[35669]={size:16,setter:pe},me[5125]={size:4,setter:de},me[36294]={size:8,setter:de},me[36295]={size:12,setter:de},me[36296]={size:16,setter:de},me[35670]={size:4,setter:pe},me[35671]={size:8,setter:pe},me[35672]={size:12,setter:pe},me[35673]={size:16,setter:pe},me[35674]={size:4,setter:he,count:2},me[35675]={size:9,setter:he,count:3},me[35676]={size:16,setter:he,count:4};const ye=/^[ \t]*\n/;function ve(t,e,n,r){const o=r||ee,i=t.createShader(n);let a=0;ye.test(e)&&(a=1,e=e.replace(ye,"")),t.shaderSource(i,e),t.compileShader(i);if(!t.getShaderParameter(i,35713)){const n=t.getShaderInfoLog(i);return o(function(t,e){return e=e||0,++e,t.split("\n").map((function(t,n){return n+e+": "+t})).join("\n")}(e,a)+"\n*** Error compiling shader: "+n),t.deleteShader(i),null}return i}function be(t,e,n){let r,o;if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t)n=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;const e=t;n=e.errorCallback,t=e.attribLocations,r=e.transformFeedbackVaryings,o=e.transformFeedbackMode}const i={errorCallback:n||ee,transformFeedbackVaryings:r,transformFeedbackMode:o};if(t){let n={};Array.isArray(t)?t.forEach((function(t,r){n[t]=e?e[r]:r})):n=t,i.attribLocations=n}return i}const _e=["VERTEX_SHADER","FRAGMENT_SHADER"];function we(t,e){return e.indexOf("frag")>=0?35632:e.indexOf("vert")>=0?35633:void 0}function xe(t,e){e.forEach((function(e){t.deleteShader(e)}))}function Se(t,e,n,r,o){const i=be(n,r,o),a=[],c=[];for(let n=0;n<e.length;++n){let r=e[n];if("string"==typeof r){const e=ne(r),o=e?e.text:r;let a=t[_e[n]];e&&e.type&&(a=we(0,e.type)||a),r=ve(t,o,a,i.errorCallback),c.push(r)}s=r,"undefined"!=typeof WebGLShader&&s instanceof WebGLShader&&a.push(r)}var s;if(a.length!==e.length)return i.errorCallback("not enough shaders for program"),xe(t,c),null;const u=t.createProgram();a.forEach((function(e){t.attachShader(u,e)})),i.attribLocations&&Object.keys(i.attribLocations).forEach((function(e){t.bindAttribLocation(u,i.attribLocations[e],e)}));let l=i.transformFeedbackVaryings;l&&(l.attribs&&(l=l.attribs),Array.isArray(l)||(l=Object.keys(l)),t.transformFeedbackVaryings(u,l,i.transformFeedbackMode||35981)),t.linkProgram(u);if(!t.getProgramParameter(u,35714)){const e=t.getProgramInfoLog(u);return i.errorCallback("Error in program linking:"+e),t.deleteProgram(u),xe(t,c),null}return u}function Ee(t,e,n,r,o){const i=be(n,r,o),a=[];for(let n=0;n<e.length;++n){const r=ve(t,e[n],t[_e[n]],i.errorCallback);if(!r)return null;a.push(r)}return Se(t,a,i)}function ke(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}function Ae(t,e){let n=0;function r(e,r,o){const i=r.size>1&&"[0]"===r.name.substr(-3),a=r.type,c=re[a];if(!c)throw new Error("unknown type: 0x"+a.toString(16));let s;if(c.bindPoint){const e=n;n+=r.size,s=i?c.arraySetter(t,a,e,o,r.size):c.setter(t,a,e,o,r.size)}else s=c.arraySetter&&i?c.arraySetter(t,o):c.setter(t,o);return s.location=o,s}const o={},i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){const i=t.getActiveUniform(e,n);if(ke(i))continue;let a=i.name;"[0]"===a.substr(-3)&&(a=a.substr(0,a.length-3));const c=t.getUniformLocation(e,i.name);c&&(o[a]=r(0,i,c))}return o}function Oe(t,e){const n={},r=t.getProgramParameter(e,35971);for(let o=0;o<r;++o){const r=t.getTransformFeedbackVarying(e,o);n[r.name]={index:o,type:r.type,size:r.size}}return n}function Ie(t,e){const n=t.getProgramParameter(e,35718),r=[],o=[];for(let i=0;i<n;++i){o.push(i),r.push({});const n=t.getActiveUniform(e,i);if(ke(n))break;r[i].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const i=n[0],a=n[1];t.getActiveUniforms(e,o,t[i]).forEach((function(t,e){r[e][a]=t}))}));const i={},a=t.getProgramParameter(e,35382);for(let n=0;n<a;++n){const r=t.getActiveUniformBlockName(e,n),o={index:t.getUniformBlockIndex(e,r),usedByVertexShader:t.getActiveUniformBlockParameter(e,n,35396),usedByFragmentShader:t.getActiveUniformBlockParameter(e,n,35398),size:t.getActiveUniformBlockParameter(e,n,35392),uniformIndices:t.getActiveUniformBlockParameter(e,n,35395)};o.used=o.usedByVertexShader||o.usedByFragmentShader,i[r]=o}return{blockSpecs:i,uniformData:r}}function Te(t,e){const n=t.uniformSetters||t,r=arguments.length;for(let t=1;t<r;++t){const e=arguments[t];if(Array.isArray(e)){const t=e.length;for(let r=0;r<t;++r)Te(n,e[r])}else for(const t in e){const r=n[t];r&&r(e[t])}}}function je(t,e){const n={},r=t.getProgramParameter(e,35721);for(let o=0;o<r;++o){const r=t.getActiveAttrib(e,o);if(ke(r))continue;const i=t.getAttribLocation(e,r.name),a=me[r.type],c=a.setter(t,i,a);c.location=i,n[r.name]=c}return n}function Ce(t,e){for(const n in e){const r=t[n];r&&r(e[n])}}function Me(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(Ce(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(34963,n.indices))}function Pe(t,e){const n={program:e,uniformSetters:Ae(t,e),attribSetters:je(t,e)};return pt(t)&&(n.uniformBlockSpec=Ie(t,e),n.transformFeedbackInfo=Oe(t,e)),n}function Le(t,e,n,r,o){const i=be(n,r,o);let a=!0;if(e=e.map((function(t){if(t.indexOf("\n")<0){const e=ne(t);e?t=e.text:(i.errorCallback("no element with id: "+t),a=!1)}return t})),!a)return null;const c=Ee(t,e,i);return c?Pe(t,c):null}function Re(t,e,n,r,o,i){n=void 0===n?4:n;const a=e.indices,c=e.elementType,s=void 0===r?e.numElements:r;o=void 0===o?0:o,c||a?void 0!==i?t.drawElementsInstanced(n,s,void 0===c?5123:e.elementType,o,i):t.drawElements(n,s,void 0===c?5123:e.elementType,o):void 0!==i?t.drawArraysInstanced(n,o,s,i):t.drawArrays(n,o,s)}function De(t,e){let n=null,r=null;e.forEach((function(e){if(!1===e.active)return;const o=e.programInfo,i=e.vertexArrayInfo||e.bufferInfo;let a=!1;const c=void 0===e.type?4:e.type;o!==n&&(n=o,t.useProgram(o.program),a=!0),(a||i!==r)&&(r&&r.vertexArrayObject&&!i.vertexArrayObject&&t.bindVertexArray(null),r=i,Me(t,o,i)),Te(o,e.uniforms),Re(t,i,c,e.count,e.offset,e.instanceCount)})),r&&r.vertexArrayObject&&t.bindVertexArray(null)}const Ne={};Ne[34041]=33306,Ne[6401]=36128,Ne[36168]=36128,Ne[6402]=36096,Ne[33189]=36096;const Ue={};Ue[32854]=!0,Ue[32855]=!0,Ue[36194]=!0,Ue[34041]=!0,Ue[33189]=!0,Ue[6401]=!0,Ue[36168]=!0;const ze={addExtensionsToContext:!0};function qe(t){A(t,ze),j(t),Ct(t)}function Be(t,e){e=e||1,e=Math.max(0,e);const n=t.clientWidth*e|0,r=t.clientHeight*e|0;return(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}},function(t,e,n){"use strict";n.r(e),n.d(e,"status",(function(){return r})),n.d(e,"scene",(function(){return o})),n.d(e,"cursor",(function(){return i})),n.d(e,"ui",(function(){return a})),n.d(e,"layers",(function(){return c})),n.d(e,"STATUS_RES",(function(){return s})),n.d(e,"STATUS_EXPORT",(function(){return u})),n.d(e,"STATUS_RASTER",(function(){return l})),n.d(e,"UI_TARGETHOME",(function(){return f})),n.d(e,"UI_POINTS",(function(){return g})),n.d(e,"CURSOR_SET",(function(){return p})),n.d(e,"CURSOR_SNAPGRID",(function(){return d})),n.d(e,"CURSOR_SNAPPT",(function(){return h})),n.d(e,"CURSOR_SNAPGLOBAL",(function(){return m})),n.d(e,"CURSOR_SNAPREF",(function(){return y})),n.d(e,"CURSOR_GRIDSCALE",(function(){return v})),n.d(e,"CURSOR_GRID",(function(){return b})),n.d(e,"DRAW_DRAWING",(function(){return _})),n.d(e,"DRAW_EDITITEM",(function(){return w})),n.d(e,"DRAW_FILTER",(function(){return x})),n.d(e,"DRAW_STROKE",(function(){return S})),n.d(e,"DRAW_FILL",(function(){return E})),n.d(e,"DRAW_WEIGHT",(function(){return k})),n.d(e,"DRAW_RADIUS",(function(){return A})),n.d(e,"DRAW_OPACITY",(function(){return O})),n.d(e,"LAYER_PUSH",(function(){return I})),n.d(e,"LAYER_POP",(function(){return T})),n.d(e,"LAYER_UPDATE",(function(){return j})),n.d(e,"SCENE_ADDPT",(function(){return C})),n.d(e,"SCENE_RMVPT",(function(){return M})),n.d(e,"SCENE_FINRMVPT",(function(){return P})),n.d(e,"SCENE_EDITUPDATE",(function(){return L})),n.d(e,"SCENE_NEWEDITITEM",(function(){return R})),n.d(e,"SCENE_PUSHEDITITEM",(function(){return D})),n.d(e,"SCENE_EDITPROPS",(function(){return N})),n.d(e,"SCENE_ITEMUPDATE",(function(){return U})),n.d(e,"SCENE_RMVITEM",(function(){return z})),n.d(e,"statusRes",(function(){return q})),n.d(e,"statusExport",(function(){return B})),n.d(e,"statusRaster",(function(){return F})),n.d(e,"uiPause",(function(){return H})),n.d(e,"uiGrid",(function(){return V})),n.d(e,"uiPoints",(function(){return $})),n.d(e,"uiTargetHome",(function(){return W})),n.d(e,"cursorSet",(function(){return K})),n.d(e,"cursorGrid",(function(){return G})),n.d(e,"cursorSnapGrid",(function(){return X})),n.d(e,"cursorSnapPt",(function(){return Y})),n.d(e,"cursorSnapGlobal",(function(){return Z})),n.d(e,"cursorSnapRef",(function(){return J})),n.d(e,"cursorGridScale",(function(){return Q})),n.d(e,"drawDrawing",(function(){return tt})),n.d(e,"drawEditItem",(function(){return et})),n.d(e,"drawFilter",(function(){return nt})),n.d(e,"drawStroke",(function(){return rt})),n.d(e,"drawFill",(function(){return ot})),n.d(e,"drawWeight",(function(){return it})),n.d(e,"drawRadius",(function(){return at})),n.d(e,"drawOpacity",(function(){return ct})),n.d(e,"layerPush",(function(){return st})),n.d(e,"layerPop",(function(){return ut})),n.d(e,"layerUpdate",(function(){return lt})),n.d(e,"sceneAddPt",(function(){return ft})),n.d(e,"sceneRmvPt",(function(){return gt})),n.d(e,"sceneFinRmvPt",(function(){return pt})),n.d(e,"sceneEditUpdate",(function(){return dt})),n.d(e,"scenePushEditItem",(function(){return ht})),n.d(e,"sceneNewEditItem",(function(){return mt})),n.d(e,"sceneRmvItem",(function(){return yt})),n.d(e,"sceneEditProps",(function(){return vt})),n.d(e,"sceneItemUpdate",(function(){return bt}));var r="status",o="scene",i="cursor",a="ui",c="layers",s="STATUS_RES",u="STATUS_EXPORT",l="STATUS_RASTER",f="UI_TARGETHOME",g="UI_POINTS",p="CURSOR_SET",d="CURSOR_SNAPGRID",h="CURSOR_SNAPPT",m="CURSOR_SNAPGLOBAL",y="CURSOR_SNAPREF",v="CURSOR_GRIDSCALE",b="CURSOR_GRID",_="DRAW_DRAWING",w="DRAW_EDITITEM",x="DRAW_FILTER",S="DRAW_STROKE",E="DRAW_FILL",k="DRAW_WEIGHT",A="DRAW_RADIUS",O="DRAW_OPACITY",I="LAYER_PUSH",T="LAYER_POP",j="LAYER_UPDATE",C="SCENE_ADDPT",M="SCENE_RMVPT",P="SCENE_FINRMVPT",L="SCENE_EDITUPDATE",R="SCENE_NEWEDITITEM",D="SCENE_PUSHEDITITEM",N="SCENE_EDITPROPS",U="SCENE_ITEMUPDATE",z="SCENE_RMVITEM";function q(t){return{type:r,subtype:s,vec2:t}}function B(t){return{type:r,subtype:u,toggle:t}}function F(t){return{type:r,subtype:l,toggle:t}}function H(t){return{type:a,subtype:UI_PAUSE,toggle:t}}function V(t){return{type:a,subtype:UI_GRID,toggle:t}}function $(t){return{type:a,subtype:g,toggle:t}}function W(t){return{type:a,subtype:f,toggle:t}}function K(t){return{type:i,subtype:p,vec2:t}}function G(t){return{type:i,subtype:b,vec4:t}}function X(){return{type:i,subtype:d}}function Y(){return{type:i,subtype:h}}function Z(){return{type:i,subtype:m}}function J(){return{type:i,subtype:y}}function Q(t){return{type:i,subtype:v,int:t}}function tt(t){return{type:a,subtype:_,toggle:t}}function et(t){return{type:a,subtype:w,primType:t}}function nt(t){return{type:a,subtype:x,filter:t}}function rt(t){return{type:a,subtype:S,hex:t}}function ot(t){return{type:a,subtype:E,hex:t}}function it(t){return{type:a,subtype:k,weight:t}}function at(t){return{type:a,subtype:A,radius:t}}function ct(t){return{type:a,subtype:O,opacity:t}}function st(t){return{type:c,subtype:I,layer:t}}function ut(t){return{type:c,subtype:T,layerID:t}}function lt(t){return{type:c,subtype:j,layerID:t}}function ft(t){return{type:o,subtype:C,pt:t}}function gt(t){return{type:o,subtype:M,pt:t}}function pt(t){return{type:o,subtype:P,id:t}}function dt(t){return{type:o,subtype:L,toggle:t}}function ht(t){return{type:o,subtype:D,primType:t}}function mt(t){return{type:o,subtype:R,primType:t}}function yt(t){return{type:o,subtype:z,id:t}}function vt(){return{type:o,subtype:N}}function bt(t,e){return{type:o,subtype:U,index:t,toggle:e}}},function(t,e,n){"use strict";n.r(e),n.d(e,"DataShader",(function(){return E})),n.d(e,"vec",(function(){return k})),n.d(e,"vecSet",(function(){return A})),n.d(e,"lengthVec",(function(){return O})),n.d(e,"normVec",(function(){return I})),n.d(e,"dotVec",(function(){return T})),n.d(e,"angleVec",(function(){return j})),n.d(e,"bbox",(function(){return C})),n.d(e,"propsDefault",(function(){return M})),n.d(e,"prim",(function(){return P})),n.d(e,"PolyPoint",(function(){return L})),n.d(e,"distPrim",(function(){return R}));var r=n(0);function o(t){return t instanceof DataView}const i=new ArrayBuffer(4),a=new Float32Array(i),c=new Uint32Array(i),s=new Uint32Array(512),u=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(s[0|t]=0,s[256|t]=32768,u[0|t]=24,u[256|t]=24):e<-14?(s[0|t]=1024>>-e-14,s[256|t]=1024>>-e-14|32768,u[0|t]=-e-1,u[256|t]=-e-1):e<=15?(s[0|t]=e+15<<10,s[256|t]=e+15<<10|32768,u[0|t]=13,u[256|t]=13):e<128?(s[0|t]=31744,s[256|t]=64512,u[0|t]=24,u[256|t]=24):(s[0|t]=31744,s[256|t]=64512,u[0|t]=13,u[256|t]=13)}const l=new Uint32Array(2048),f=new Uint32Array(64),g=new Uint32Array(64);l[0]=0;for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;0==(8388608&e);)n-=8388608,e<<=1;e&=-8388609,n+=947912704,l[t]=e|n}for(let t=1024;t<2048;++t)l[t]=939524096+(t-1024<<13);f[0]=0;for(let t=1;t<31;++t)f[t]=t<<23;f[31]=1199570944,f[32]=2147483648;for(let t=33;t<63;++t)f[t]=2147483648+(t-32<<23);f[63]=3347054592,g[0]=0;for(let t=1;t<64;++t)g[t]=32===t?0:1024;function p(t,e,...n){if(!o(t))throw new TypeError("First argument to getFloat16 function must be a DataView");return function(t){const e=t>>10;return c[0]=l[g[e]+(1023&t)]+f[e],a[0]}(t.getUint16(e,...n))}function d(t,e,n,...r){if(!o(t))throw new TypeError("First argument to setFloat16 function must be a DataView");t.setUint16(e,function(t){a[0]=t;const e=c[0],n=e>>23&511;return s[n]+((8388607&e)>>u[n])}(n),...r)}var h=n(5),m=n(1);function y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=function t(e,n){S(this,t),this.shader=e,this.parameters=n},k=function t(e,n,r,o,i,a,c){S(this,t),this.x=e||0,this.y=n||0,this.z=r||0,this.w=o||0,this.parentId=i||"",this.id=a||(+new Date).toString(36).slice(-8),this.update=c||!1};function A(t,e,n,r,o){return t.x=e||t.x,t.y=n||t.y,t.z=r||t.z,t.w=o||t.w,t}function O(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function I(t){var e=w({},t),n=O(e);return e.x=e.x/n,e.y=e.y/n,e}function T(t,e){return t.x*e.x+t.y*e.y}function j(t){return Math.atan2(-t.y,-t.x)+Math.PI}var C=function t(e,n){var r;S(this,t),r=void 0===n?.05:n,e.sort((function(t,e){return t.x<e.x?-1:1}));var o=e[0].x-r,i=e[e.length-1].x+r;e.sort((function(t,e){return t.y<e.y?-1:1}));var a=e[0].y-r,c=e[e.length-1].y+r;this.min=new k(o,a),this.max=new k(i,c),this.width=i-o,this.height=c-a},M={type:"",filter:"",stroke:"#ffa724",fill:"#0600b5",weight:.001,radius:.001,opacity:.85},P=function t(e,n,r,o,i,a){S(this,t),this.type=e,this.pts=n||[],this.properties=r||w({},M),this.needsUpdate=!1,this.id=o||(+new Date).toString(36).slice(-8),this.pId=i||"";var c=h.random();this.idCol=m.k.create(c.gl()[0],c.gl()[1],c.gl()[2]),this.idColHex=c.hex(),this.merge=a||"union"},L=function(){function t(e){S(this,t),this.dataSize=e||16,this.pts=[],this.cTexel=-1,this.data=new Uint16Array(4*this.dataSize*this.dataSize),this.texture=m.c(r.gl,x({unpackAlignnment:1,minMag:r.gl.NEAREST,src:this.data,width:this.dataSize,height:this.dataSize,wrap:r.gl.CLAMP_TO_EDGE,internalFormat:r.gl.RGBA16F,format:r.gl.RGBA,type:r.gl.HALF_FLOAT},"wrap",r.gl.CLAMP_TO_EDGE)),this.needsUpdate=!1,this.id=(+new Date).toString(36).slice(-8)}var e,n,o;return e=t,(n=[{key:"clone",value:function(){this.weight;var e,n=w({},this.properties),o=this.dataSize,i=new t(n,o),a=[],c=y(this.pts);try{for(c.s();!(e=c.n()).done;){var s=e.value;a.push(s.clone())}}catch(t){c.e(t)}finally{c.f()}var u=this.cTexel;i.pts=a,i.cTexel=u;var l=new Uint16Array(this.data);this.texture=m.c(r.gl,x({unpackAlignnment:1,minMag:r.gl.NEAREST,src:l,width:o,height:o,wrap:r.gl.CLAMP_TO_EDGE,internalFormat:r.gl.RGBA16F,format:r.gl.RGBA,type:r.gl.HALF_FLOAT},"wrap",r.gl.CLAMP_TO_EDGE)),i.data=l,i.ptsTex=ptsTex;var f=this.id;return i.id=f,i}},{key:"addPoint",value:function(t,e){var n=t.x,o=t.y,i=t.z||1,a=t.w||1,c=new k(n,o,i,a,e);this.cTexel++;var s=4*this.cTexel,u=new ArrayBuffer(64),l=new DataView(u);return l.getFloat16=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.apply(void 0,[l].concat(e))},l.setFloat16=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return d.apply(void 0,[l].concat(e))},l.setFloat16(0,n,!1),l.setFloat16(16,o,!1),l.setFloat16(32,i,!1),l.setFloat16(48,a,!1),this.data[s]=l.getUint16(0,!1),this.data[s+1]=l.getUint16(16,!1),this.data[s+2]=l.getUint16(32,!1),this.data[s+3]=l.getUint16(48,!1),m.i(r.gl,this.texture,this.data,{internalFormat:r.gl.RGBA16F,format:r.gl.RGBA,type:r.gl.HALF_FLOAT}),l.getUint16(0,!1),l.getUint16(16,!1),l.getUint16(32,!1),l.getUint16(48,!1),this.pts.push(c),c}}])&&b(e.prototype,n),o&&b(e,o),t}();function R(t,e){var n={};n=t.x?m.k.create(t.x,t.y,t.z):t;var o=1e3;switch(e.type){case"polyline":o=Math.min(o,function(t,e){if("polyline"!=e.type)return console.log("pLineDist() called on primitive of "+e.type+" type."),console.log(e),1e3;var n,o,i=1e3,a=y(e.pts);try{var c=function(){var a=o.value,c=r.state.scene.pts.find((function(t){return t.id==a}));if(void 0===n)return n=c,"continue";i=Math.min(i,function(t,e,n,r){var o,i;o=e.x?m.k.create(e.x,e.y,0):e;i=n.x?m.k.create(n.x,n.y,0):n;var a=m.k.subtract(t,o),c=m.k.subtract(i,o),s=D(m.k.dot(a,c)/m.k.dot(c,c),0,1);return m.k.length(m.k.subtract(a,m.k.mulScalar(c,s)))-5*r}(t,n,c,e.properties.weight)),n=c};for(a.s();!(o=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}return i}(n,e));break;case"polygon":o=Math.min(o,function(t,e){if("polygon"!=e.type)return console.log("polygonDist() called on primitive of "+e.type+" type."),1e3;var n=r.state.scene.pts.find((function(t){return t.id==e.pts[e.pts.length-1]})),o=m.k.create(n.x,n.y,0),i=r.state.scene.pts.find((function(t){return t.id==e.pts[0]})),a=m.k.create(i.x,i.y,0);a=m.k.subtract(t,a);var c,s=m.k.dot(a,a),u=1,l=y(e.pts);try{var f=function(){var e=c.value,n=r.state.scene.pts.find((function(t){return t.id==e})),i=m.k.create(n.x,n.y,0),a=m.k.subtract(o,i),l=m.k.subtract(t,i),f=m.k.subtract(l,m.k.mulScalar(a,D(m.k.dot(l,a)/m.k.dot(a,a),0,1)));s=Math.min(s,m.k.dot(f,f));var g=t[1]>=i[1],p=t[1]<o[1],d=a[0]*l[1]>a[1]*l[0];(g&&p&&d||!g&&!p&&!d)&&(u*=-1),o=i};for(l.s();!(c=l.n()).done;)f()}catch(t){l.e(t)}finally{l.f()}return s=u*Math.sqrt(s)}(n,e));break;case"circle":o=Math.min(o,function(t,e){if("circle"!=e.type)return console.log("circleDist() called on primitive of "+e.type+" type."),console.log(e),1e3;return console.log(e),1e3}(0,e))}return o}function D(t,e,n){return Math.min(Math.max(t,e),n)}},function(t,e,n){"use strict";n.r(e),n.d(e,"Layer",(function(){return g})),n.d(e,"setBoundingBox",(function(){return p})),n.d(e,"updateMatrices",(function(){return d})),n.d(e,"bakeLayer",(function(){return h})),n.d(e,"createEditLayer",(function(){return m})),n.d(e,"getFragStub",(function(){return y}));var r=n(0),o=n(6),i=n(10),a=n(3),c=n(5),s=n(1);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var g=function t(e,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var c=i||v(e.type);if("object"!=f(e)||"string"!=typeof n||"string"!=typeof o||"object"!=f(c))return console.log("layer constructor is invalid, check inputs"),console.log(e),console.log(n),console.log(o),void console.log(c);this.primType=e.type.slice(),this.vert=n.slice(),this.frag=o.slice(),this.uniforms=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c),e.id&&(this.prim=e.id.slice(),this.uniforms.u_eTex=new a.PolyPoint(16),this.uniforms.u_cTex=this.uniforms.u_eTex.cTexel,this.uniforms.u_idCol=s.k.copy(e.idCol)),this.id=(+new Date).toString(36).slice(-8),this.bbox=null,this.matrix=s.e.ortho(0,r.gl.canvas.clientWidth,r.gl.canvas.clientHeight,0,-1,1),this.matrix=s.e.translate(this.matrix,s.k.create(0,0,0)),this.matrix=s.e.scale(this.matrix,s.k.create(r.gl.canvas.width,r.gl.canvas.height,1)),this.uniforms.u_matrix=this.matrix,this.programInfo=s.b(r.gl,[n,o]);var g={position:{numComponents:2,data:new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1])},texcoord:{numComponents:2,data:new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1])}};this.bufferInfo=s.a(r.gl,g),r.gl.useProgram(this.programInfo.program),s.g(r.gl,this.programInfo,this.bufferInfo)};function p(t){"polygon"==t.primType||"polyline"==t.primType||"rectangle"==t.primType?t.bbox=new a.bbox(t.uniforms.u_eTex.pts):"circle"==t.primType&&(t.bbox=new a.bbox([t.uniforms.u_eTex.pts[0]],1)),d(t)}function d(t){var e=(t.bbox.min.x*(64/r.dPt[2])+r.dPt[0])*r.resolution.x*(r.resolution.y/r.resolution.x),n=(t.bbox.min.y*(64/r.dPt[2])+r.dPt[1])*r.resolution.y,o=t.bbox.width*(64/r.dPt[2])*r.resolution.x*(r.resolution.y/r.resolution.x),i=t.bbox.height*(64/r.dPt[2])*r.resolution.y;t.matrix=s.e.ortho(0,r.gl.canvas.clientWidth,r.gl.canvas.clientHeight,0,-1,1),t.matrix=s.e.translate(t.matrix,s.k.create(e,n,0)),t.matrix=s.e.scale(t.matrix,s.k.create(o,i,1)),t.uniforms.u_matrix=t.matrix;var a=s.e.translation(s.k.create(e/r.resolution.x,n/r.resolution.y,0));a=s.e.scale(a,s.k.create(o/r.resolution.x,i/r.resolution.y,1)),t.uniforms.u_textureMatrix=a}function h(t){p(t);var e=i.bake(t);t.frag=e,t.programInfo=s.b(r.gl,[t.vert,e]),r.gl.useProgram(t.programInfo.program),s.j(t.programInfo,t.uniforms)}function m(t){var e=v(t.type),n=y(t.type,!0),r=o.simpleVert.slice();return new g(t,r,n,e)}function y(t,e){switch(t){case"polyline":return e?o.pLineEdit.slice():o.pLineStub.slice();case"polygon":return e?o.polygonEdit.slice():o.polygonStub.slice();case"circle":return e?o.circleEdit.slice():o.circleStub.slice();case"rectangle":return e?o.rectangleEdit.slice():o.rectangleStub.slice();default:return o.pLineStub.slice()}}function v(t){var e=s.e.translation(s.k.create(0,0,0));switch(e=s.e.scale(e,s.k.create(1,1,1)),t){case"polyline":return{u_textureMatrix:s.e.copy(e),u_resolution:s.k.create(r.gl.canvas.width,r.gl.canvas.height,0),u_mPt:s.k.create(r.mPt.x,r.mPt.y,0),u_dPt:s.k.create(r.dPt[0],r.dPt[1],0),u_eTex:{},u_weight:r.state.ui.properties.weight,u_opacity:r.state.ui.properties.opacity,u_stroke:c(r.state.ui.properties.stroke).gl().slice(0,3)};case"polygon":return{u_textureMatrix:s.e.copy(e),u_resolution:s.k.create(r.gl.canvas.width,r.gl.canvas.height,0),u_mPt:s.k.create(r.mPt.x,r.mPt.y,0),u_dPt:s.k.create(r.dPt[0],r.dPt[1],0),u_eTex:{},u_cTex:-1,u_weight:r.state.ui.properties.weight,u_opacity:r.state.ui.properties.opacity,u_stroke:c(r.state.ui.properties.stroke).gl().slice(0,3),u_fill:c(r.state.ui.properties.fill).gl().slice(0,3)};case"circle":return{u_textureMatrix:s.e.copy(e),u_resolution:s.k.create(r.gl.canvas.width,r.gl.canvas.height,0),u_mPt:s.k.create(r.mPt[0],r.mPt[1],0),u_dPt:s.k.create(r.dPt[0],r.dPt[1],0),u_eTex:{},u_cTex:-1,u_weight:r.state.ui.properties.weight,u_opacity:r.state.ui.properties.opacity,u_stroke:c(r.state.ui.properties.stroke).gl().slice(0,3),u_fill:c(r.state.ui.properties.fill).gl().slice(0,3)};case"rectangle":return{u_textureMatrix:s.e.copy(e),u_resolution:s.k.create(r.gl.canvas.width,r.gl.canvas.height,0),u_mPt:s.k.create(r.mPt.x,r.mPt.y,0),u_dPt:s.k.create(r.dPt[0],r.dPt[1],0),u_eTex:{},u_cTex:-1,u_weight:r.state.ui.properties.weight,u_opacity:r.state.ui.properties.opacity,u_stroke:c(r.state.ui.properties.stroke).gl().slice(0,3),u_fill:c(r.state.ui.properties.fill).gl().slice(0,3),u_radius:.01};default:return{u_textureMatrix:s.e.copy(e),u_resolution:s.k.create(r.gl.canvas.width,r.gl.canvas.height,0),u_mPt:s.k.create(r.mPt.x,r.mPt.y,0),u_dPt:s.k.create(r.dPt[0],r.dPt[1],0),u_eTex:{},u_weight:r.state.ui.properties.weight,u_opacity:r.state.ui.properties.opacity,u_stroke:c(r.state.ui.properties.stroke).gl().slice(0,3)}}}},function(t,e,n){
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
t.exports=function(){"use strict";for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var o=r[n];e["[object "+o+"]"]=o.toLowerCase()}var i=function(t){return e[Object.prototype.toString.call(t)]||"object"},a=Math.PI,c={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var n=0;n<=3;n++)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]=t(e[n],0,255)):3===n&&(e[n]=t(e[n],0,1));return e},limit:t,type:i,unpack:function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==i(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},last:function(t){if(t.length<2)return null;var e=t.length-1;return"string"==i(t[e])?t[e].toLowerCase():null},PI:a,TWOPI:2*a,PITHIRD:a/3,DEG2RAD:a/180,RAD2DEG:180/a},s={format:{},autodetect:[]},u=c.last,l=c.clip_rgb,f=c.type,g=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===f(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=u(t),o=!1;if(!r){o=!0,s.sorted||(s.autodetect=s.autodetect.sort((function(t,e){return e.p-t.p})),s.sorted=!0);for(var i=0,a=s.autodetect;i<a.length;i+=1){var c=a[i];if(r=c.test.apply(c,t))break}}if(!s.format[r])throw new Error("unknown format: "+t);var g=s.format[r].apply(null,o?t:t.slice(0,-1));n._rgb=l(g),3===n._rgb.length&&n._rgb.push(1)};g.prototype.toString=function(){return"function"==f(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var p=g,d=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d.Color,[null].concat(t)))};d.Color=p,d.version="2.1.0";var h=d,m=c.unpack,y=Math.max,v=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=m(t,"rgb"),r=n[0],o=n[1],i=n[2],a=1-y(r/=255,y(o/=255,i/=255)),c=a<1?1/(1-a):0,s=(1-r-a)*c,u=(1-o-a)*c,l=(1-i-a)*c;return[s,u,l,a]},b=c.unpack,_=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=b(t,"cmyk"))[0],r=t[1],o=t[2],i=t[3],a=t.length>4?t[4]:1;return 1===i?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),o>=1?0:255*(1-o)*(1-i),a]},w=c.unpack,x=c.type;p.prototype.cmyk=function(){return v(this._rgb)},h.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["cmyk"])))},s.format.cmyk=_,s.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=w(t,"cmyk"),"array"===x(t)&&4===t.length)return"cmyk"}});var S=c.unpack,E=c.last,k=function(t){return Math.round(100*t)/100},A=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=S(t,"hsla"),r=E(t)||"lsa";return n[0]=k(n[0]||0),n[1]=k(100*n[1])+"%",n[2]=k(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},O=c.unpack,I=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=O(t,"rgba"))[0],r=t[1],o=t[2];n/=255,r/=255,o/=255;var i,a,c=Math.min(n,r,o),s=Math.max(n,r,o),u=(s+c)/2;return s===c?(i=0,a=Number.NaN):i=u<.5?(s-c)/(s+c):(s-c)/(2-s-c),n==s?a=(r-o)/(s-c):r==s?a=2+(o-n)/(s-c):o==s&&(a=4+(n-r)/(s-c)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,i,u,t[3]]:[a,i,u]},T=c.unpack,j=c.last,C=Math.round,M=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=T(t,"rgba"),r=j(t)||"rgb";return"hsl"==r.substr(0,3)?A(I(n),r):(n[0]=C(n[0]),n[1]=C(n[1]),n[2]=C(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},P=c.unpack,L=Math.round,R=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,o,i,a=(e=P(e,"hsl"))[0],c=e[1],s=e[2];if(0===c)r=o=i=255*s;else{var u=[0,0,0],l=[0,0,0],f=s<.5?s*(1+c):s+c-s*c,g=2*s-f,p=a/360;u[0]=p+1/3,u[1]=p,u[2]=p-1/3;for(var d=0;d<3;d++)u[d]<0&&(u[d]+=1),u[d]>1&&(u[d]-=1),6*u[d]<1?l[d]=g+6*(f-g)*u[d]:2*u[d]<1?l[d]=f:3*u[d]<2?l[d]=g+(f-g)*(2/3-u[d])*6:l[d]=g;r=(t=[L(255*l[0]),L(255*l[1]),L(255*l[2])])[0],o=t[1],i=t[2]}return e.length>3?[r,o,i,e[3]]:[r,o,i,1]},D=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,N=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,U=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,z=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,q=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,B=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,F=Math.round,H=function(t){var e;if(t=t.toLowerCase().trim(),s.format.named)try{return s.format.named(t)}catch(t){}if(e=t.match(D)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(N)){for(var o=e.slice(1,5),i=0;i<4;i++)o[i]=+o[i];return o}if(e=t.match(U)){for(var a=e.slice(1,4),c=0;c<3;c++)a[c]=F(2.55*a[c]);return a[3]=1,a}if(e=t.match(z)){for(var u=e.slice(1,5),l=0;l<3;l++)u[l]=F(2.55*u[l]);return u[3]=+u[3],u}if(e=t.match(q)){var f=e.slice(1,4);f[1]*=.01,f[2]*=.01;var g=R(f);return g[3]=1,g}if(e=t.match(B)){var p=e.slice(1,4);p[1]*=.01,p[2]*=.01;var d=R(p);return d[3]=+e[4],d}};H.test=function(t){return D.test(t)||N.test(t)||U.test(t)||z.test(t)||q.test(t)||B.test(t)};var V=H,$=c.type;p.prototype.css=function(t){return M(this._rgb,t)},h.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["css"])))},s.format.css=V,s.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===$(t)&&V.test(t))return"css"}});var W=c.unpack;s.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=W(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},h.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["gl"])))},p.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var K=c.unpack,G=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=K(t,"rgb"),o=r[0],i=r[1],a=r[2],c=Math.min(o,i,a),s=Math.max(o,i,a),u=s-c,l=100*u/255,f=c/(255-u)*100;return 0===u?n=Number.NaN:(o===s&&(n=(i-a)/u),i===s&&(n=2+(a-o)/u),a===s&&(n=4+(o-i)/u),(n*=60)<0&&(n+=360)),[n,l,f]},X=c.unpack,Y=Math.floor,Z=function(){for(var t,e,n,r,o,i,a=[],c=arguments.length;c--;)a[c]=arguments[c];var s,u,l,f=(a=X(a,"hcg"))[0],g=a[1],p=a[2];p*=255;var d=255*g;if(0===g)s=u=l=p;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var h=Y(f/=60),m=f-h,y=p*(1-g),v=y+d*(1-m),b=y+d*m,_=y+d;switch(h){case 0:s=(t=[_,b,y])[0],u=t[1],l=t[2];break;case 1:s=(e=[v,_,y])[0],u=e[1],l=e[2];break;case 2:s=(n=[y,_,b])[0],u=n[1],l=n[2];break;case 3:s=(r=[y,v,_])[0],u=r[1],l=r[2];break;case 4:s=(o=[b,y,_])[0],u=o[1],l=o[2];break;case 5:s=(i=[_,y,v])[0],u=i[1],l=i[2]}}return[s,u,l,a.length>3?a[3]:1]},J=c.unpack,Q=c.type;p.prototype.hcg=function(){return G(this._rgb)},h.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hcg"])))},s.format.hcg=Z,s.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=J(t,"hcg"),"array"===Q(t)&&3===t.length)return"hcg"}});var tt=c.unpack,et=c.last,nt=Math.round,rt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=tt(t,"rgba"),r=n[0],o=n[1],i=n[2],a=n[3],c=et(t)||"auto";void 0===a&&(a=1),"auto"===c&&(c=a<1?"rgba":"rgb");var s=(r=nt(r))<<16|(o=nt(o))<<8|(i=nt(i)),u="000000"+s.toString(16);u=u.substr(u.length-6);var l="0"+nt(255*a).toString(16);switch(l=l.substr(l.length-2),c.toLowerCase()){case"rgba":return"#"+u+l;case"argb":return"#"+l+u;default:return"#"+u}},ot=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,it=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,at=function(t){if(t.match(ot)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(it)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},ct=c.type;p.prototype.hex=function(t){return rt(this._rgb,t)},h.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hex"])))},s.format.hex=at,s.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===ct(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var st=c.unpack,ut=c.TWOPI,lt=Math.min,ft=Math.sqrt,gt=Math.acos,pt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=st(t,"rgb"),o=r[0],i=r[1],a=r[2],c=lt(o/=255,i/=255,a/=255),s=(o+i+a)/3,u=s>0?1-c/s:0;return 0===u?n=NaN:(n=(o-i+(o-a))/2,n/=ft((o-i)*(o-i)+(o-a)*(i-a)),n=gt(n),a>i&&(n=ut-n),n/=ut),[360*n,u,s]},dt=c.unpack,ht=c.limit,mt=c.TWOPI,yt=c.PITHIRD,vt=Math.cos,bt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=dt(t,"hsi"))[0],a=t[1],c=t[2];return isNaN(i)&&(i=0),isNaN(a)&&(a=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?r=1-((o=(1-a)/3)+(n=(1+a*vt(mt*i)/vt(yt-mt*i))/3)):i<2/3?o=1-((n=(1-a)/3)+(r=(1+a*vt(mt*(i-=1/3))/vt(yt-mt*i))/3)):n=1-((r=(1-a)/3)+(o=(1+a*vt(mt*(i-=2/3))/vt(yt-mt*i))/3)),[255*(n=ht(c*n*3)),255*(r=ht(c*r*3)),255*(o=ht(c*o*3)),t.length>3?t[3]:1]},_t=c.unpack,wt=c.type;p.prototype.hsi=function(){return pt(this._rgb)},h.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsi"])))},s.format.hsi=bt,s.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=_t(t,"hsi"),"array"===wt(t)&&3===t.length)return"hsi"}});var xt=c.unpack,St=c.type;p.prototype.hsl=function(){return I(this._rgb)},h.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsl"])))},s.format.hsl=R,s.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=xt(t,"hsl"),"array"===St(t)&&3===t.length)return"hsl"}});var Et=c.unpack,kt=Math.min,At=Math.max,Ot=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=Et(t,"rgb"))[0],a=t[1],c=t[2],s=kt(i,a,c),u=At(i,a,c),l=u-s;return o=u/255,0===u?(n=Number.NaN,r=0):(r=l/u,i===u&&(n=(a-c)/l),a===u&&(n=2+(c-i)/l),c===u&&(n=4+(i-a)/l),(n*=60)<0&&(n+=360)),[n,r,o]},It=c.unpack,Tt=Math.floor,jt=function(){for(var t,e,n,r,o,i,a=[],c=arguments.length;c--;)a[c]=arguments[c];var s,u,l,f=(a=It(a,"hsv"))[0],g=a[1],p=a[2];if(p*=255,0===g)s=u=l=p;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var d=Tt(f/=60),h=f-d,m=p*(1-g),y=p*(1-g*h),v=p*(1-g*(1-h));switch(d){case 0:s=(t=[p,v,m])[0],u=t[1],l=t[2];break;case 1:s=(e=[y,p,m])[0],u=e[1],l=e[2];break;case 2:s=(n=[m,p,v])[0],u=n[1],l=n[2];break;case 3:s=(r=[m,y,p])[0],u=r[1],l=r[2];break;case 4:s=(o=[v,m,p])[0],u=o[1],l=o[2];break;case 5:s=(i=[p,m,y])[0],u=i[1],l=i[2]}}return[s,u,l,a.length>3?a[3]:1]},Ct=c.unpack,Mt=c.type;p.prototype.hsv=function(){return Ot(this._rgb)},h.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsv"])))},s.format.hsv=jt,s.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ct(t,"hsv"),"array"===Mt(t)&&3===t.length)return"hsv"}});var Pt=18,Lt=.95047,Rt=1,Dt=1.08883,Nt=.137931034,Ut=.206896552,zt=.12841855,qt=.008856452,Bt=c.unpack,Ft=Math.pow,Ht=function(t){return(t/=255)<=.04045?t/12.92:Ft((t+.055)/1.055,2.4)},Vt=function(t){return t>qt?Ft(t,1/3):t/zt+Nt},$t=function(t,e,n){return t=Ht(t),e=Ht(e),n=Ht(n),[Vt((.4124564*t+.3575761*e+.1804375*n)/Lt),Vt((.2126729*t+.7151522*e+.072175*n)/Rt),Vt((.0193339*t+.119192*e+.9503041*n)/Dt)]},Wt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Bt(t,"rgb"),r=n[0],o=n[1],i=n[2],a=$t(r,o,i),c=a[0],s=a[1],u=a[2],l=116*s-16;return[l<0?0:l,500*(c-s),200*(s-u)]},Kt=c.unpack,Gt=Math.pow,Xt=function(t){return 255*(t<=.00304?12.92*t:1.055*Gt(t,1/2.4)-.055)},Yt=function(t){return t>Ut?t*t*t:zt*(t-Nt)},Zt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=Kt(t,"lab"))[0],a=t[1],c=t[2];return r=(i+16)/116,n=isNaN(a)?r:r+a/500,o=isNaN(c)?r:r-c/200,r=Rt*Yt(r),n=Lt*Yt(n),o=Dt*Yt(o),[Xt(3.2404542*n-1.5371385*r-.4985314*o),Xt(-.969266*n+1.8760108*r+.041556*o),Xt(.0556434*n-.2040259*r+1.0572252*o),t.length>3?t[3]:1]},Jt=c.unpack,Qt=c.type;p.prototype.lab=function(){return Wt(this._rgb)},h.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["lab"])))},s.format.lab=Zt,s.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Jt(t,"lab"),"array"===Qt(t)&&3===t.length)return"lab"}});var te=c.unpack,ee=c.RAD2DEG,ne=Math.sqrt,re=Math.atan2,oe=Math.round,ie=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=te(t,"lab"),r=n[0],o=n[1],i=n[2],a=ne(o*o+i*i),c=(re(i,o)*ee+360)%360;return 0===oe(1e4*a)&&(c=Number.NaN),[r,a,c]},ae=c.unpack,ce=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ae(t,"rgb"),r=n[0],o=n[1],i=n[2],a=Wt(r,o,i),c=a[0],s=a[1],u=a[2];return ie(c,s,u)},se=c.unpack,ue=c.DEG2RAD,le=Math.sin,fe=Math.cos,ge=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=se(t,"lch"),r=n[0],o=n[1],i=n[2];return isNaN(i)&&(i=0),[r,fe(i*=ue)*o,le(i)*o]},pe=c.unpack,de=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=pe(t,"lch"))[0],r=t[1],o=t[2],i=ge(n,r,o),a=i[0],c=i[1],s=i[2],u=Zt(a,c,s),l=u[0],f=u[1],g=u[2];return[l,f,g,t.length>3?t[3]:1]},he=c.unpack,me=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=he(t,"hcl").reverse();return de.apply(void 0,n)},ye=c.unpack,ve=c.type;p.prototype.lch=function(){return ce(this._rgb)},p.prototype.hcl=function(){return ce(this._rgb).reverse()},h.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["lch"])))},h.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hcl"])))},s.format.lch=de,s.format.hcl=me,["lch","hcl"].forEach((function(t){return s.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=ye(e,t),"array"===ve(e)&&3===e.length)return t}})}));var be={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_e=c.type;p.prototype.name=function(){for(var t=rt(this._rgb,"rgb"),e=0,n=Object.keys(be);e<n.length;e+=1){var r=n[e];if(be[r]===t)return r.toLowerCase()}return t},s.format.named=function(t){if(t=t.toLowerCase(),be[t])return at(be[t]);throw new Error("unknown color name: "+t)},s.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===_e(t)&&be[t.toLowerCase()])return"named"}});var we=c.unpack,xe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=we(t,"rgb"),r=n[0],o=n[1],i=n[2];return(r<<16)+(o<<8)+i},Se=c.type,Ee=function(t){if("number"==Se(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},ke=c.type;p.prototype.num=function(){return xe(this._rgb)},h.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["num"])))},s.format.num=Ee,s.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===ke(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var Ae=c.unpack,Oe=c.type,Ie=Math.round;p.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ie)},p.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:Ie(e):e}))},h.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["rgb"])))},s.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ae(t,"rgba");return void 0===n[3]&&(n[3]=1),n},s.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ae(t,"rgba"),"array"===Oe(t)&&(3===t.length||4===t.length&&"number"==Oe(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var Te=Math.log,je=function(t){var e,n,r,o=t/100;return o<66?(e=255,n=-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*Te(n),r=o<20?0:.8274096064007395*(r=o-10)-254.76935184120902+115.67994401066147*Te(r)):(e=351.97690566805693+.114206453784165*(e=o-55)-40.25366309332127*Te(e),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*Te(n),r=255),[e,n,r,1]},Ce=c.unpack,Me=Math.round,Pe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=Ce(t,"rgb"),o=r[0],i=r[2],a=1e3,c=4e4,s=.4;c-a>s;){var u=je(n=.5*(c+a));u[2]/u[0]>=i/o?c=n:a=n}return Me(n)};p.prototype.temp=p.prototype.kelvin=p.prototype.temperature=function(){return Pe(this._rgb)},h.temp=h.kelvin=h.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["temp"])))},s.format.temp=s.format.kelvin=s.format.temperature=je;var Le=c.type;p.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Le(t)?e?(this._rgb[3]=t,this):new p([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},p.prototype.clipped=function(){return this._rgb._clipped||!1},p.prototype.darken=function(t){void 0===t&&(t=1);var e=this.lab();return e[0]-=Pt*t,new p(e,"lab").alpha(this.alpha(),!0)},p.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},p.prototype.darker=p.prototype.darken,p.prototype.brighter=p.prototype.brighten,p.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],o=this[n]();if(r){var i=n.indexOf(r);if(i>-1)return o[i];throw new Error("unknown channel "+r+" in mode "+n)}return o};var Re=c.type,De=Math.pow;p.prototype.luminance=function(t){if(void 0!==t&&"number"===Re(t)){if(0===t)return new p([0,0,0,this._rgb[3]],"rgb");if(1===t)return new p([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n=20,r=function(e,o){var i=e.interpolate(o,.5,"rgb"),a=i.luminance();return Math.abs(t-a)<1e-7||!n--?i:a>t?r(e,i):r(i,o)},o=(e>t?r(new p([0,0,0]),this):r(this,new p([255,255,255]))).rgb();return new p(o.concat([this._rgb[3]]))}return Ne.apply(void 0,this._rgb.slice(0,3))};var Ne=function(t,e,n){return.2126*(t=Ue(t))+.7152*(e=Ue(e))+.0722*(n=Ue(n))},Ue=function(t){return(t/=255)<=.03928?t/12.92:De((t+.055)/1.055,2.4)},ze={},qe=c.type,Be=function(t,e,n){void 0===n&&(n=.5);for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var i=r[0]||"lrgb";if(ze[i]||r.length||(i=Object.keys(ze)[0]),!ze[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==qe(t)&&(t=new p(t)),"object"!==qe(e)&&(e=new p(e)),ze[i](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};p.prototype.mix=p.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Be.apply(void 0,[this,t,e].concat(n))},p.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new p([e[0]*n,e[1]*n,e[2]*n,n],"rgb")},p.prototype.saturate=function(t){void 0===t&&(t=1);var e=this.lch();return e[1]+=Pt*t,e[1]<0&&(e[1]=0),new p(e,"lch").alpha(this.alpha(),!0)},p.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var Fe=c.type;p.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),o=r[0],i=r[1],a=this[o]();if(i){var c=o.indexOf(i);if(c>-1){if("string"==Fe(e))switch(e.charAt(0)){case"+":case"-":a[c]+=+e;break;case"*":a[c]*=+e.substr(1);break;case"/":a[c]/=+e.substr(1);break;default:a[c]=+e}else{if("number"!==Fe(e))throw new Error("unsupported value for Color.set");a[c]=e}var s=new p(a,o);return n?(this._rgb=s._rgb,this):s}throw new Error("unknown channel "+i+" in mode "+o)}return a},ze.rgb=function(t,e,n){var r=t._rgb,o=e._rgb;return new p(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};var He=Math.sqrt,Ve=Math.pow;ze.lrgb=function(t,e,n){var r=t._rgb,o=r[0],i=r[1],a=r[2],c=e._rgb,s=c[0],u=c[1],l=c[2];return new p(He(Ve(o,2)*(1-n)+Ve(s,2)*n),He(Ve(i,2)*(1-n)+Ve(u,2)*n),He(Ve(a,2)*(1-n)+Ve(l,2)*n),"rgb")},ze.lab=function(t,e,n){var r=t.lab(),o=e.lab();return new p(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};var $e=function(t,e,n,r){var o,i,a,c,s,u,l,f,g,d,h,m;return"hsl"===r?(a=t.hsl(),c=e.hsl()):"hsv"===r?(a=t.hsv(),c=e.hsv()):"hcg"===r?(a=t.hcg(),c=e.hcg()):"hsi"===r?(a=t.hsi(),c=e.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",a=t.hcl(),c=e.hcl()),"h"===r.substr(0,1)&&(s=(o=a)[0],l=o[1],g=o[2],u=(i=c)[0],f=i[1],d=i[2]),isNaN(s)||isNaN(u)?isNaN(s)?isNaN(u)?m=Number.NaN:(m=u,1!=g&&0!=g||"hsv"==r||(h=f)):(m=s,1!=d&&0!=d||"hsv"==r||(h=l)):m=s+n*(u>s&&u-s>180?u-(s+360):u<s&&s-u>180?u+360-s:u-s),void 0===h&&(h=l+n*(f-l)),new p([m,h,g+n*(d-g)],r)},We=function(t,e,n){return $e(t,e,n,"lch")};ze.lch=We,ze.hcl=We,ze.num=function(t,e,n){var r=t.num(),o=e.num();return new p(r+n*(o-r),"num")},ze.hcg=function(t,e,n){return $e(t,e,n,"hcg")},ze.hsi=function(t,e,n){return $e(t,e,n,"hsi")},ze.hsl=function(t,e,n){return $e(t,e,n,"hsl")},ze.hsv=function(t,e,n){return $e(t,e,n,"hsv")};var Ke=c.clip_rgb,Ge=Math.pow,Xe=Math.sqrt,Ye=Math.PI,Ze=Math.cos,Je=Math.sin,Qe=Math.atan2,tn=function(t,e){for(var n=t.length,r=[0,0,0,0],o=0;o<t.length;o++){var i=t[o],a=e[o]/n,c=i._rgb;r[0]+=Ge(c[0],2)*a,r[1]+=Ge(c[1],2)*a,r[2]+=Ge(c[2],2)*a,r[3]+=c[3]*a}return r[0]=Xe(r[0]),r[1]=Xe(r[1]),r[2]=Xe(r[2]),r[3]>.9999999&&(r[3]=1),new p(Ke(r))},en=c.type,nn=Math.pow,rn=function(t){var e="rgb",n=h("#ccc"),r=0,o=[0,1],i=[],a=[0,0],c=!1,s=[],u=!1,l=0,f=1,g=!1,p={},d=!0,m=1,y=function(t){if((t=t||["#fff","#000"])&&"string"===en(t)&&h.brewer&&h.brewer[t.toLowerCase()]&&(t=h.brewer[t.toLowerCase()]),"array"===en(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=h(t[e]);i.length=0;for(var n=0;n<t.length;n++)i.push(n/(t.length-1))}return w(),s=t},v=function(t){return t},b=function(t){return t},_=function(t,r){var o,u;if(null==r&&(r=!1),isNaN(t)||null===t)return n;u=r?t:c&&c.length>2?function(t){if(null!=c){for(var e=c.length-1,n=0;n<e&&t>=c[n];)n++;return n-1}return 0}(t)/(c.length-2):f!==l?(t-l)/(f-l):1,u=b(u),r||(u=v(u)),1!==m&&(u=nn(u,m)),u=a[0]+u*(1-a[0]-a[1]),u=Math.min(1,Math.max(0,u));var g=Math.floor(1e4*u);if(d&&p[g])o=p[g];else{if("array"===en(s))for(var y=0;y<i.length;y++){var _=i[y];if(u<=_){o=s[y];break}if(u>=_&&y===i.length-1){o=s[y];break}if(u>_&&u<i[y+1]){u=(u-_)/(i[y+1]-_),o=h.interpolate(s[y],s[y+1],u,e);break}}else"function"===en(s)&&(o=s(u));d&&(p[g]=o)}return o},w=function(){return p={}};y(t);var x=function(t){var e=h(_(t));return u&&e[u]?e[u]():e};return x.classes=function(t){if(null!=t){if("array"===en(t))c=t,o=[t[0],t[t.length-1]];else{var e=h.analyze(o);c=0===t?[e.min,e.max]:h.limits(e,"e",t)}return x}return c},x.domain=function(t){if(!arguments.length)return o;l=t[0],f=t[t.length-1],i=[];var e=s.length;if(t.length===e&&l!==f)for(var n=0,r=Array.from(t);n<r.length;n+=1){var a=r[n];i.push((a-l)/(f-l))}else{for(var c=0;c<e;c++)i.push(c/(e-1));if(t.length>2){var u=t.map((function(e,n){return n/(t.length-1)})),g=t.map((function(t){return(t-l)/(f-l)}));g.every((function(t,e){return u[e]===t}))||(b=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=g[e+1];)e++;var n=(t-g[e])/(g[e+1]-g[e]);return u[e]+n*(u[e+1]-u[e])})}}return o=[l,f],x},x.mode=function(t){return arguments.length?(e=t,w(),x):e},x.range=function(t,e){return y(t),x},x.out=function(t){return u=t,x},x.spread=function(t){return arguments.length?(r=t,x):r},x.correctLightness=function(t){return null==t&&(t=!0),g=t,w(),v=g?function(t){for(var e=_(0,!0).lab()[0],n=_(1,!0).lab()[0],r=e>n,o=_(t,!0).lab()[0],i=e+(n-e)*t,a=o-i,c=0,s=1,u=20;Math.abs(a)>.01&&u-- >0;)r&&(a*=-1),a<0?(c=t,t+=.5*(s-t)):(s=t,t+=.5*(c-t)),o=_(t,!0).lab()[0],a=o-i;return t}:function(t){return t},x},x.padding=function(t){return null!=t?("number"===en(t)&&(t=[t,t]),a=t,x):a},x.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=s.slice(0);else if(1===e)r=[x(.5)];else if(e>1){var i=o[0],a=o[1]-i;r=on(0,e,!1).map((function(t){return x(i+t/(e-1)*a)}))}else{t=[];var u=[];if(c&&c.length>2)for(var l=1,f=c.length,g=1<=f;g?l<f:l>f;g?l++:l--)u.push(.5*(c[l-1]+c[l]));else u=o;r=u.map((function(t){return x(t)}))}return h[n]&&(r=r.map((function(t){return t[n]()}))),r},x.cache=function(t){return null!=t?(d=t,x):d},x.gamma=function(t){return null!=t?(m=t,x):m},x.nodata=function(t){return null!=t?(n=h(t),x):n},x};function on(t,e,n){for(var r=[],o=t<e,i=n?o?e+1:e-1:e,a=t;o?a<i:a>i;o?a++:a--)r.push(a);return r}var an=function(t){var e,n,r,o,i,a,c;if(2===(t=t.map((function(t){return new p(t)}))).length)e=t.map((function(t){return t.lab()})),i=e[0],a=e[1],o=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(a[e]-i[e])}));return new p(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),i=n[0],a=n[1],c=n[2],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*a[e]+t*t*c[e]}));return new p(e,"lab")};else if(4===t.length){var s;r=t.map((function(t){return t.lab()})),i=r[0],a=r[1],c=r[2],s=r[3],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*c[e]+t*t*t*s[e]}));return new p(e,"lab")}}else if(5===t.length){var u=an(t.slice(0,3)),l=an(t.slice(2,5));o=function(t){return t<.5?u(2*t):l(2*(t-.5))}}return o},cn=function(t,e,n){if(!cn[n])throw new Error("unknown blend mode "+n);return cn[n](t,e)},sn=function(t){return function(e,n){var r=h(n).rgb(),o=h(e).rgb();return h.rgb(t(r,o))}},un=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}};cn.normal=sn(un((function(t){return t}))),cn.multiply=sn(un((function(t,e){return t*e/255}))),cn.screen=sn(un((function(t,e){return 255*(1-(1-t/255)*(1-e/255))}))),cn.overlay=sn(un((function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))}))),cn.darken=sn(un((function(t,e){return t>e?e:t}))),cn.lighten=sn(un((function(t,e){return t>e?t:e}))),cn.dodge=sn(un((function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t}))),cn.burn=sn(un((function(t,e){return 255*(1-(1-e/255)/(t/255))})));for(var ln=cn,fn=c.type,gn=c.clip_rgb,pn=c.TWOPI,dn=Math.pow,hn=Math.sin,mn=Math.cos,yn=Math.floor,vn=Math.random,bn=Math.log,_n=Math.pow,wn=Math.floor,xn=Math.abs,Sn=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===i(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===i(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return En(n,t,e)},n},En=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==i(t)&&(t=Sn(t));var r=t.min,o=t.max,a=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,o];var c=[];if("c"===e.substr(0,1)&&(c.push(r),c.push(o)),"e"===e.substr(0,1)){c.push(r);for(var s=1;s<n;s++)c.push(r+s/n*(o-r));c.push(o)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*bn(r),l=Math.LOG10E*bn(o);c.push(r);for(var f=1;f<n;f++)c.push(_n(10,u+f/n*(l-u)));c.push(o)}else if("q"===e.substr(0,1)){c.push(r);for(var g=1;g<n;g++){var p=(a.length-1)*g/n,d=wn(p);if(d===p)c.push(a[d]);else{var h=p-d;c.push(a[d]*(1-h)+a[d+1]*h)}}c.push(o)}else if("k"===e.substr(0,1)){var m,y=a.length,v=new Array(y),b=new Array(n),_=!0,w=0,x=null;(x=[]).push(r);for(var S=1;S<n;S++)x.push(r+S/n*(o-r));for(x.push(o);_;){for(var E=0;E<n;E++)b[E]=0;for(var k=0;k<y;k++)for(var A=a[k],O=Number.MAX_VALUE,I=void 0,T=0;T<n;T++){var j=xn(x[T]-A);j<O&&(O=j,I=T),b[I]++,v[k]=I}for(var C=new Array(n),M=0;M<n;M++)C[M]=null;for(var P=0;P<y;P++)null===C[m=v[P]]?C[m]=a[P]:C[m]+=a[P];for(var L=0;L<n;L++)C[L]*=1/b[L];_=!1;for(var R=0;R<n;R++)if(C[R]!==x[R]){_=!0;break}x=C,++w>200&&(_=!1)}for(var D={},N=0;N<n;N++)D[N]=[];for(var U=0;U<y;U++)D[m=v[U]].push(a[U]);for(var z=[],q=0;q<n;q++)z.push(D[q][0]),z.push(D[q][D[q].length-1]);z=z.sort((function(t,e){return t-e})),c.push(z[0]);for(var B=1;B<z.length;B+=2){var F=z[B];isNaN(F)||-1!==c.indexOf(F)||c.push(F)}}return c},kn={analyze:Sn,limits:En},An=Math.sqrt,On=Math.atan2,In=Math.abs,Tn=Math.cos,jn=Math.PI,Cn={cool:function(){return rn([h.hsl(180,1,.9),h.hsl(250,.7,.4)])},hot:function(){return rn(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Mn={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pn=0,Ln=Object.keys(Mn);Pn<Ln.length;Pn+=1){var Rn=Ln[Pn];Mn[Rn.toLowerCase()]=Mn[Rn]}var Dn=Mn;return h.average=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var o=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=o})),t=t.map((function(t){return new p(t)})),"lrgb"===e)return tn(t,n);for(var i=t.shift(),a=i.get(e),c=[],s=0,u=0,l=0;l<a.length;l++)if(a[l]=(a[l]||0)*n[0],c.push(isNaN(a[l])?0:n[0]),"h"===e.charAt(l)&&!isNaN(a[l])){var f=a[l]/180*Ye;s+=Ze(f)*n[0],u+=Je(f)*n[0]}var g=i.alpha()*n[0];t.forEach((function(t,r){var o=t.get(e);g+=t.alpha()*n[r+1];for(var i=0;i<a.length;i++)if(!isNaN(o[i]))if(c[i]+=n[r+1],"h"===e.charAt(i)){var l=o[i]/180*Ye;s+=Ze(l)*n[r+1],u+=Je(l)*n[r+1]}else a[i]+=o[i]*n[r+1]}));for(var d=0;d<a.length;d++)if("h"===e.charAt(d)){for(var h=Qe(u/c[d],s/c[d])/Ye*180;h<0;)h+=360;for(;h>=360;)h-=360;a[d]=h}else a[d]=a[d]/c[d];return g/=r,new p(a,e).alpha(g>.99999?1:g,!0)},h.bezier=function(t){var e=an(t);return e.scale=function(){return rn(e)},e},h.blend=ln,h.cubehelix=function(t,e,n,r,o){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=[0,1]);var i,a=0;"array"===fn(o)?i=o[1]-o[0]:(i=0,o=[o,o]);var c=function(c){var s=pn*((t+120)/360+e*c),u=dn(o[0]+i*c,r),l=(0!==a?n[0]+c*a:n)*u*(1-u)/2,f=mn(s),g=hn(s);return h(gn([255*(u+l*(-.14861*f+1.78277*g)),255*(u+l*(-.29227*f-.90649*g)),255*(u+l*(1.97294*f)),1]))};return c.start=function(e){return null==e?t:(t=e,c)},c.rotations=function(t){return null==t?e:(e=t,c)},c.gamma=function(t){return null==t?r:(r=t,c)},c.hue=function(t){return null==t?n:("array"===fn(n=t)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,c)},c.lightness=function(t){return null==t?o:("array"===fn(t)?(o=t,i=t[1]-t[0]):(o=[t,t],i=0),c)},c.scale=function(){return h.scale(c)},c.hue(n),c},h.mix=h.interpolate=Be,h.random=function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef".charAt(yn(16*vn()));return new p(t,"hex")},h.scale=rn,h.analyze=kn.analyze,h.contrast=function(t,e){t=new p(t),e=new p(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},h.deltaE=function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=1),t=new p(t),e=new p(e);for(var o=Array.from(t.lab()),i=o[0],a=o[1],c=o[2],s=Array.from(e.lab()),u=s[0],l=s[1],f=s[2],g=An(a*a+c*c),d=An(l*l+f*f),h=i<16?.511:.040975*i/(1+.01765*i),m=.0638*g/(1+.0131*g)+.638,y=g<1e-6?0:180*On(c,a)/jn;y<0;)y+=360;for(;y>=360;)y-=360;var v=y>=164&&y<=345?.56+In(.2*Tn(jn*(y+168)/180)):.36+In(.4*Tn(jn*(y+35)/180)),b=g*g*g*g,_=An(b/(b+1900)),w=m*(_*v+1-_),x=g-d,S=a-l,E=c-f,k=(i-u)/(n*h),A=x/(r*m);return An(k*k+A*A+(S*S+E*E-x*x)/(w*w))},h.distance=function(t,e,n){void 0===n&&(n="lab"),t=new p(t),e=new p(e);var r=t.get(n),o=e.get(n),i=0;for(var a in r){var c=(r[a]||0)-(o[a]||0);i+=c*c}return Math.sqrt(i)},h.limits=kn.limits,h.valid=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(p,[null].concat(t))),!0}catch(t){return!1}},h.scales=Cn,h.colors=be,h.brewer=Dn,h}()},function(t,e,n){"use strict";n.r(e),n.d(e,"simpleFrag",(function(){return r})),n.d(e,"simpleVert",(function(){return o})),n.d(e,"imgFrag",(function(){return i})),n.d(e,"demoFrag",(function(){return a})),n.d(e,"gridFrag",(function(){return c})),n.d(e,"pLineEdit",(function(){return s})),n.d(e,"pLineStub",(function(){return u})),n.d(e,"polygonEdit",(function(){return l})),n.d(e,"polygonStub",(function(){return f})),n.d(e,"circleEdit",(function(){return g})),n.d(e,"circleStub",(function(){return p})),n.d(e,"rectangleEdit",(function(){return d})),n.d(e,"rectangleStub",(function(){return h}));var r="#version 300 es\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n   outColor = texture(u_texture, v_texcoord);\n}",o="#version 300 es\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\nuniform mat4 u_textureMatrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\n  gl_Position = u_matrix * a_position;\n  v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n}",i="#version 300 es\nprecision highp float;\n \nin vec2 v_texcoord;\n \nuniform sampler2D u_img;\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nout vec4 outColor;\n \nvoid main() {\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= u_dPt.z / 64.;\n\n  outColor = texture(u_img, uv);\n}",a="#version 300 es\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform sampler2D u_eTex;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = vec4(0.5, 0.5, 0.5, 0.25);\n  vec2 uv = vec2(v_texcoord);\n\n\n\n\n}",c="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nout vec4 outColor;\n\n// float repeat(float x) { return abs(fract(x*0.5+0.5)-0.5)*2.0; }\nfloat gridMnr(float x) { return abs(fract(x*0.5+0.5)-0.5) * 2.; }\nfloat gridMjr(float x) { return abs(fract(x*0.5+0.5)-0.5) * 2.; }\n\nvoid main() {\n  outColor = vec4(1.0);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  vec2 q = vec2(v_texcoord);\n  uv -= u_dPt.xy;\n  uv *= u_dPt.z;\n\n  // vec2 q = uv-0.5;\n\n  //https://www.shadertoy.com/view/XtVcWc - beautiful grid\n  // vec3 col = vec3(1.0) - smoothstep(0.018,0.0, abs(uv.x-0.05))*vec3(.25,0.17,0.02);\n  // col -= smoothstep(0.018,0.0, abs(uv.y-0.05))*vec3(.25,0.17,0.02);\n  // vec2 rp = mod(uv,0.75)-0.05;\n  // vec2 rp = fract(x*0.5+0.5)-0.5;\n  \n  vec3 col = vec3(1.) - smoothstep( (u_dPt.z * 0.001),0.0, abs(gridMnr(uv.x)))*vec3(.25,0.15,0.02);\n  col -= smoothstep((u_dPt.z * 0.001), 0.0, abs(gridMnr(uv.y)))*vec3(.25,0.15,0.02);\n  \n  col -= (smoothstep( (u_dPt.z * 0.0002),0.0, abs(gridMnr(uv.x / 12.)))*vec3(0.,0.77,0.7)) * 0.25;\n  col -= (smoothstep((u_dPt.z * 0.0002), 0.0, abs(gridMnr(uv.y / 12.)))*vec3(0.,0.77,0.7)) * 0.25;\n  \n  // subtle paper texture\n  // col *= (smoothstep(0.26,.25,(fract(sin(dot(uv.x, uv.y))*150130.1)))*0.03+0.97)*vec3(1.005,1.,0.99);\n  //vignette\n  // col *= clamp(pow( 256.0*q.x*q.y*(1.0-q.x)*(1.0-q.y), .09 ),0.,1.)*.325+0.7;\n\n  outColor = vec4(col,1.0);\n}",s="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_mPt;\n\nuniform sampler2D u_eTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform float u_opacity;\n\nout vec4 outColor;\n\n//https://www.shadertoy.com/view/4tc3DX\nfloat LineDistField(vec2 uv, vec2 pA, vec2 pB, vec2 thick, float rounded, float dashOn) {\n    // Don't let it get more round than circular.\n    rounded = min(thick.y, rounded);\n\n    vec2 mid = (pB + pA) * 0.5;\n    vec2 delta = pB - pA;\n    float lenD = length(delta);\n    vec2 unit = delta / lenD;\n\n    // Check for when line endpoints are the same\n    if (lenD < 0.0001) unit = vec2(1.0, 0.0);\t// if pA and pB are same\n    \n    // Perpendicular vector to unit - also length 1.0\n    vec2 perp = unit.yx * vec2(-1.0, 1.0);\n    \n    // position along line from midpoint\n    float dpx = dot(unit, uv - mid);\n    \n    // distance away from line at a right angle\n    float dpy = dot(perp, uv - mid);\n    \n    // Make a distance function that is 0 at the transition from black to white\n    float disty = abs(dpy) - thick.y + rounded;\n    float distx = abs(dpx) - lenD * 0.5 - thick.x + rounded;\n\n    float dist = length(vec2(max(0.0, distx), max(0.0,disty))) - rounded;\n    dist = min(dist, max(distx, disty));\n\n    return dist;\n}\n\nfloat drawLine(vec2 uv, vec2 pA, vec2 pB, float weight, float dash){\n  float line = LineDistField(uv, pA, pB, vec2(weight), weight, dash);\n  // line = 1.0 - smoothstep(0.0, 0.003, line);\n  return line;\n}\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\nfloat ao2D_simple(float d, float pixSize, float width, float coef)\n{\n\tfloat max_dist = pixSize * width * 3.0;\n\tfloat dRef = max_dist * coef;\n\tif (d <= max_dist)\n\t\treturn clamp(d, 0.0, dRef) / dRef;\n\treturn 1.0;\n}\n\nvoid main(){\n  outColor = vec4(1.0);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  float texelOffset = 0.5 * (1. / (16. * 16.));\n\n  float dist = sdCircle(uv, u_mPt.xy, 0.003);\n\n  vec2 prevPt = texture(u_eTex, vec2(texelOffset, texelOffset)).xy;\n  float one = 1.0;\n\n  if(prevPt == vec2(0.)) {discard;}\n\n  for (float i = 0.; i < 16.; i++ ){\n    float yIndex = i / 16. + texelOffset;\n\n    for (float j = 0.; j < 16.; j++ ){\n      //this is to skip the first point only;\n      j += one;\n      one = 0.;\n\n      float xIndex = j / 16.  + texelOffset;\n      vec2 vIndex = vec2(xIndex, yIndex);\n      vec2 tPt = texture(u_eTex, vIndex).xy;\n\n      if (tPt == vec2(0.)){ break; }\n\n      dist = min(dist, drawLine(uv, prevPt, tPt, u_weight, 0.0));\n      dist = min(dist, sdCircle(uv, tPt, 0.003));\n\n      prevPt = tPt;\n    }\n  }\n\n\n  dist = min(dist, drawLine(uv, prevPt, u_mPt.xy, u_weight, 1.0));\n\n  // float ao = dist;\n\n  dist = line(dist, u_weight);\n  vec3 col = mix(vec3(1.0), u_stroke, dist);\n  \n  //ao interface hint for edit object...would be nice\n  // can't figure out how to properly set opacity with this\n  // ao = 0.75 + 0.25*smoothstep( 0.0, 0.13, sqrt(ao) );\n  // col *= ao;\n  if ( dist < 0.001) discard;\n\n\n\n  // outColor = vec4(col, (dist + ao) * 0.5);\n  outColor = vec4(col, dist * u_opacity);\n}",u="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_scale;\n\nuniform sampler2D u_eTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform float u_opacity;\n\nuniform vec3 u_idCol;\n\nout vec4 outColor;\n\n//https://www.shadertoy.com/view/4tc3DX\nfloat LineDistField(vec2 uv, vec2 pA, vec2 pB, vec2 thick, float rounded, float dashOn) {\n    // Don't let it get more round than circular.\n    rounded = min(thick.y, rounded);\n\n    vec2 mid = (pB + pA) * 0.5;\n    vec2 delta = pB - pA;\n    float lenD = length(delta);\n    vec2 unit = delta / lenD;\n\n    // Check for when line endpoints are the same\n    if (lenD < 0.0001) unit = vec2(1.0, 0.0);\t// if pA and pB are same\n    \n    // Perpendicular vector to unit - also length 1.0\n    vec2 perp = unit.yx * vec2(-1.0, 1.0);\n    \n    // position along line from midpoint\n    float dpx = dot(unit, uv - mid);\n    \n    // distance away from line at a right angle\n    float dpy = dot(perp, uv - mid);\n    \n    // Make a distance function that is 0 at the transition from black to white\n    float disty = abs(dpy) - thick.y + rounded;\n    float distx = abs(dpx) - lenD * 0.5 - thick.x + rounded;\n\n    float dist = length(vec2(max(0.0, distx), max(0.0,disty))) - rounded;\n    dist = min(dist, max(distx, disty));\n\n    return dist;\n}\n\nfloat drawLine(vec2 uv, vec2 pA, vec2 pB, float weight, float dash){\n  float line = LineDistField(uv, pA, pB, vec2(weight), weight, dash);\n  // line = 1.0 - smoothstep(0.0, 0.003, line);\n  return line;\n}\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  //very simple lod\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\n//$INSERT FUNCTION$------\n\n//$ENDINSERT FUNCTION$---\n\nvec4 sceneDist(vec2 uv) {\n  //temp distance\n  float d = 1.0;\n  //xyz:color, w:cumulative distance \n  vec4 colDist = vec4(1.);\n  //index in parameters texture\n  vec2 index = vec2(0.);\n  //$INSERT CALL$------\n\n  //$ENDINSERT CALL$---\n  return colDist;\n}\n\nvoid main(){\n  outColor = vec4(u_idCol, 0.125);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  // uv.xy = u_scale.xy;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  vec4 scene = sceneDist(uv);\n  vec3 col = scene.xyz;\n  float dist = scene.w;\n\n  // dist = line(dist, u_weight);\n  // col = mix(vec3(1.0), col, dist);\n\n  if ( dist < 0.0000000000000001){\n    discard;\n  }\n\n  // if ( dist > 0.0000000000000001){\n  //   outColor = vec4(col, dist);\n  // }\n\n  outColor = vec4(col, dist * u_opacity);\n\n  //TODO: try alpha = dist, enable gl.BLEND\n  \n}",l="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_mPt;\n\nuniform sampler2D u_eTex;\nuniform float u_cTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform vec3 u_fill;\nuniform float u_opacity;\n\nout vec4 outColor;\n\n//https://www.shadertoy.com/view/4tc3DX\nfloat LineDistField(vec2 uv, vec2 pA, vec2 pB, vec2 thick, float rounded, float dashOn) {\n    // Don't let it get more round than circular.\n    rounded = min(thick.y, rounded);\n\n    vec2 mid = (pB + pA) * 0.5;\n    vec2 delta = pB - pA;\n    float lenD = length(delta);\n    vec2 unit = delta / lenD;\n\n    // Check for when line endpoints are the same\n    if (lenD < 0.0001) unit = vec2(1.0, 0.0);\t// if pA and pB are same\n    \n    // Perpendicular vector to unit - also length 1.0\n    vec2 perp = unit.yx * vec2(-1.0, 1.0);\n    \n    // position along line from midpoint\n    float dpx = dot(unit, uv - mid);\n    \n    // distance away from line at a right angle\n    float dpy = dot(perp, uv - mid);\n    \n    // Make a distance function that is 0 at the transition from black to white\n    float disty = abs(dpy) - thick.y + rounded;\n    float distx = abs(dpx) - lenD * 0.5 - thick.x + rounded;\n\n    float dist = length(vec2(max(0.0, distx), max(0.0,disty))) - rounded;\n    dist = min(dist, max(distx, disty));\n\n    return dist;\n}\n\nfloat drawLine(vec2 uv, vec2 pA, vec2 pB, float weight, float dash){\n  float line = LineDistField(uv, pA, pB, vec2(weight), weight, dash);\n  // line = 1.0 - smoothstep(0.0, 0.003, line);\n  return line;\n}\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\n// fill\nfloat fillMask(float dist){\n\treturn smoothstep(0.0,0.003, clamp(-dist, 0.0, 1.0));\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\nfloat AO(vec2 p, float dist, float radius, float intensity){\n\tfloat a = clamp(dist / radius, 0.0, 1.0) - 1.0;\n\treturn 1.0 - (pow(abs(a), 5.0) + 1.0) * intensity + (1.0 - intensity);\n\t//return smoothstep(0.0, 1.0, dist / radius);\n}\n\nvoid main(){\n  outColor = vec4(1.0);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  float texelOffset = 0.5 * (1. / (16. * 16.));\n\n  float dist = sdCircle(uv, u_mPt.xy, 0.003);\n\n  vec2 first = texture(u_eTex, vec2(0./16. + texelOffset, 0./16. + texelOffset)).xy;\n\n  float iX = (mod(u_cTex, 16.) / 16.) + texelOffset;\n  float iY = (floor(u_cTex / 16.) / 16.) + texelOffset;\n\n  vec2 last = texture(u_eTex, vec2(iX, iY)).xy;\n  dist = dot(uv - first, uv - first);\n  vec2 prevPt = last;\n\n  //may need another texture to display current mouse pos\n  // if(prevPt == vec2(0.)) {discard;}\n  \n  float s = 1.0;\n  for (float i = 0.; i < 16.; i++ ){\n    float yIndex = i / 16. + texelOffset;\n    for (float j = 0.; j < 16.; j++ ){\n      float xIndex = j / 16.  + texelOffset;\n      vec2 vIndex = vec2(xIndex, yIndex);\n\n      vec2 tPt = texture(u_eTex, vIndex).xy;\n\n      if (tPt == vec2(0.)){ break; }\n\n      // https://www.shadertoy.com/view/wdBXRW iq signed distance to polygon\n      if (prevPt != vec2(0.)){\n        vec2 e = prevPt - tPt;\n        vec2 w = uv - tPt;\n        vec2 b = w - e*clamp( dot(w,e)/dot(e,e), 0.0, 1.0 );\n        dist = min( dist, dot(b,b) );\n\n        // winding number from http://geomalgorithms.com/a03-_inclusion.html\n        bvec3 cond = bvec3( uv.y>=tPt.y, uv.y<prevPt.y, e.x*w.y>e.y*w.x );\n        if( all(cond) || all(not(cond)) ) s*=-1.0;\n\n        prevPt = tPt;\n      }\n    }\n  }\n\n  dist = s*sqrt(dist);\n\n\n  float fill = fillMask(dist);\n  vec4 fillCol = mix(vec4(vec3(1.),0.), vec4(u_fill, u_opacity), fill);\n\n  if (prevPt != vec2(0.)){\n    dist = min(dist, drawLine(uv, prevPt, u_mPt.xy, u_weight / 2., 0.0));\n    dist = min(dist, drawLine(uv, u_mPt.xy, first, u_weight / 2., 0.0));\n  }\n\n  float stroke = line(dist, u_weight);\n  vec4 strokeCol = mix(vec4(vec3(1.),0.), vec4(u_stroke,stroke) , stroke);\n  \n  dist = min(stroke, fill);\n  \n  if ( dist > 1.) discard;\n\n  outColor = vec4(vec3(fillCol.rgb * strokeCol.rgb), fillCol.a + strokeCol.a);\n}",f="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_scale;\n\nuniform sampler2D u_eTex;\nuniform float u_cTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform vec3 u_fill;\nuniform float u_opacity;\n\nuniform vec3 u_idCol;\n\nout vec4 outColor;\n\n//https://www.shadertoy.com/view/4tc3DX\nfloat LineDistField(vec2 uv, vec2 pA, vec2 pB, vec2 thick, float rounded, float dashOn) {\n    // Don't let it get more round than circular.\n    rounded = min(thick.y, rounded);\n\n    vec2 mid = (pB + pA) * 0.5;\n    vec2 delta = pB - pA;\n    float lenD = length(delta);\n    vec2 unit = delta / lenD;\n\n    // Check for when line endpoints are the same\n    if (lenD < 0.0001) unit = vec2(1.0, 0.0);\t// if pA and pB are same\n    \n    // Perpendicular vector to unit - also length 1.0\n    vec2 perp = unit.yx * vec2(-1.0, 1.0);\n    \n    // position along line from midpoint\n    float dpx = dot(unit, uv - mid);\n    \n    // distance away from line at a right angle\n    float dpy = dot(perp, uv - mid);\n    \n    // Make a distance function that is 0 at the transition from black to white\n    float disty = abs(dpy) - thick.y + rounded;\n    float distx = abs(dpx) - lenD * 0.5 - thick.x + rounded;\n\n    float dist = length(vec2(max(0.0, distx), max(0.0,disty))) - rounded;\n    dist = min(dist, max(distx, disty));\n\n    return dist;\n}\n\nfloat drawLine(vec2 uv, vec2 pA, vec2 pB, float weight, float dash){\n  float line = LineDistField(uv, pA, pB, vec2(weight), weight, dash);\n  // line = 1.0 - smoothstep(0.0, 0.003, line);\n  return line;\n}\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  //very simple lod\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\n// fill\nfloat fillMask(float dist){\n\treturn smoothstep(0.0,0.003, clamp(-dist, 0.0, 1.0));\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\n//smooth sdf Iso\nvec3 sdf(vec2 uv, float d){\n  vec3 col = vec3(1.0) - sign(d)*vec3(0.1,0.4,0.7);\n\tcol *= 1.0 - exp(-3.0*abs(d));\n\tcol *= 0.8 + 0.2*cos(150.0*d);\n\tcol = mix( col, vec3(1.0), 1.0-smoothstep(0.0,0.003,abs(d)));\n  return col;\n}\n\n//$INSERT FUNCTION$------\n\n//$ENDINSERT FUNCTION$---\n\nvec4 sceneDist(vec2 uv) {\n  //temp distance\n  float d = 1.0;\n  //xyz:color, w:cumulative distance \n  vec4 colDist = vec4(1.);\n  //index in parameters texture\n  vec2 index = vec2(0.);\n  //$INSERT CALL$------\n\n  //$ENDINSERT CALL$---\n  return colDist;\n}\n\nvoid main(){\n  outColor = vec4(u_idCol, 0.25);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  vec4 scene = sceneDist(uv);\n  float d = scene.w;\n\n  float fill = fillMask(d);\n  vec4 fillCol = mix(vec4(vec3(1.),0.), vec4(u_fill, u_opacity), fill);\n  float stroke = line(d, u_weight);\n  vec4 strokeCol = mix(vec4(vec3(1.),0.), vec4(u_stroke,stroke) , stroke);\n  \n  float dist = min(stroke, fill);\n\n  if ( dist > 1.){\n    discard;\n  }\n\n  outColor = vec4(vec3(fillCol.rgb * strokeCol.rgb), fillCol.a + strokeCol.a);\n  // outColor = vec4(vec3(0.), scene.w);\n}",g="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_mPt;\n\nuniform sampler2D u_eTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform vec3 u_fill;\nuniform float u_opacity;\n\nout vec4 outColor;\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\n// fill\nfloat fillMask(float dist){\n\treturn smoothstep(0.0,0.003, clamp(-dist, 0.0, 1.0));\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\nfloat AO(vec2 p, float dist, float radius, float intensity){\n\tfloat a = clamp(dist / radius, 0.0, 1.0) - 1.0;\n\treturn 1.0 - (pow(abs(a), 5.0) + 1.0) * intensity + (1.0 - intensity);\n}\n\nvoid main(){\n  outColor = vec4(1.0);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  float texelOffset = 0.5 * (1. / (16. * 16.));\n\n  float dist = sdCircle(uv, u_mPt.xy, 0.125);\n  \n  vec2 center = texture(u_eTex, vec2(texelOffset, texelOffset)).xy;\n\n  if(center.x != 0.0){\n    vec2 rPt = u_mPt.xy;\n    float radius = distance(center, rPt);\n    dist = sdCircle(uv, center, radius);\n  }\n\n  //stroke\n  float stroke = line(dist, u_weight);\n  vec4 strokeCol = mix(vec4(vec3(1.),0.), vec4(u_stroke,stroke) , stroke);\n  float fill = fillMask(dist);\n  vec4 fillCol = mix(vec4(vec3(1.),0.), vec4(u_fill, u_opacity), fill);\n\n  dist = min(stroke, fill);\n\n  if ( dist > 1.) discard;\n\n  outColor = vec4(vec3(fillCol.rgb * strokeCol.rgb), fillCol.a + strokeCol.a);\n}",p="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_scale;\n\nuniform sampler2D u_eTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform vec3 u_fill;\nuniform float u_opacity;\n\nuniform vec3 u_idCol;\n\nout vec4 outColor;\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  //very simple lod\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\n// fill\nfloat fillMask(float dist){\n\treturn smoothstep(0.0,0.003, clamp(-dist, 0.0, 1.0));\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\nvoid main(){\n  outColor = vec4(u_idCol, 0.125);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  //$INSERT CALL$------\n\n  //$ENDINSERT CALL$---\n}",d="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_mPt;\n\nuniform sampler2D u_eTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform vec3 u_fill;\nuniform float u_opacity;\nuniform float u_radius;\n\nout vec4 outColor;\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//uv, p translation point, b 1/2 length, width, r radius\nfloat sdBox( in vec2 uv, in vec2 p, in vec2 b , in float r)\n{\n    b -= r;\n    uv = (uv-p);\n    vec2 d = abs(uv)-b;\n    return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0) - r;\n}\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\n// fill\nfloat fillMask(float dist){\n\treturn smoothstep(0.0,0.003, clamp(-dist, 0.0, 1.0));\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\nfloat AO(vec2 p, float dist, float radius, float intensity){\n\tfloat a = clamp(dist / radius, 0.0, 1.0) - 1.0;\n\treturn 1.0 - (pow(abs(a), 5.0) + 1.0) * intensity + (1.0 - intensity);\n}\n\nvoid main(){\n  outColor = vec4(1.0);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  float texelOffset = 0.5 * (1. / (16. * 16.));\n\n  vec2 topLeft = texture(u_eTex, vec2(texelOffset, texelOffset)).xy;\n  vec2 rect = vec2(0.20225, 0.125);\n  vec2 flipX = vec2(-1.0, -1.0);\n\n  vec2 center = u_mPt.xy - rect * flipX;\n\n  float dist = sdBox(uv, center, rect, u_radius);\n\n  if(topLeft.x != 0.0){\n    center = 0.5 * (u_mPt.xy - topLeft.xy) + topLeft.xy;\n    vec2 rPt = abs(u_mPt.xy - center);\n    dist = sdBox(uv, center, rPt, u_radius);\n  }\n\n  //stroke\n  float stroke = line(dist, u_weight);\n  vec4 strokeCol = mix(vec4(vec3(1.),0.), vec4(u_stroke,stroke) , stroke);\n  float fill = fillMask(dist);\n  vec4 fillCol = mix(vec4(vec3(1.),0.), vec4(u_fill, u_opacity), fill);\n\n  dist = min(stroke, fill);\n\n  if ( dist > 1.) discard;\n\n  outColor = vec4(vec3(fillCol.rgb * strokeCol.rgb), fillCol.a + strokeCol.a);\n}",h="#version 300 es\n#define saturate(a) clamp(a, 0.0, 1.0)\n\nprecision mediump float;\n\nin vec2 v_texcoord;\n\nuniform vec3 u_resolution;\nuniform vec3 u_dPt;\n\nuniform vec3 u_scale;\n\nuniform sampler2D u_eTex;\nuniform float u_weight;\nuniform vec3 u_stroke;\nuniform vec3 u_fill;\nuniform float u_opacity;\nuniform float u_radius;\n\nuniform vec3 u_idCol;\n\nout vec4 outColor;\n\nfloat sdCircle(vec2 uv, vec2 p, float r){\n  uv = uv - p;\n  return length(uv) - r;\n}\n\n//uv, p translation point, b 1/2 length, width, r radius\nfloat sdBox( in vec2 uv, in vec2 p, in vec2 b , in float r)\n{\n    b -= r;\n    uv = (uv-p);\n    vec2 d = abs(uv)-b;\n    return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0) - r;\n}\n\n\n//smooth Line Filter\nfloat line(float d, float w){\n  d = clamp(abs(d) - w, 0.0, 1.0);\n  //very simple lod\n  d = 1.0 - smoothstep(0.0,0.00004 * u_dPt.z,abs(d));\n  return d;\n}\n\n// fill\nfloat fillMask(float dist){\n\treturn smoothstep(0.0,0.003, clamp(-dist, 0.0, 1.0));\n}\n\nvec3 drawPt(vec2 uv, vec2 p, float dist, vec3 col){\n    vec3 color = mix(col, vec3(1.0, 0.25, 0.25), dist);\n    return color;\n}\n\nvoid main(){\n  outColor = vec4(u_idCol, 0.125);\n  vec2 uv = vec2(v_texcoord);\n  uv.x *= u_resolution.x / u_resolution.y;\n  uv -= u_dPt.xy;\n  uv *= (u_dPt.z / 64.);\n\n  //$INSERT CALL$------\n\n  //$ENDINSERT CALL$---\n}"},function(t,e,n){"use strict";function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e,n){var r=document.getElementById("mode-stack"),o=r.children,i=document.createElement("div");i.id=t,i.classList.add("mode-hint"),i.classList.add("enter-left");var a=n||"rgba(237, 55, 67, .75)";return i.innerText=e,i.style.backgroundColor=a,o.length>0?r.insertBefore(i,o[0]):r.appendChild(i),i}function a(t){var e=document.getElementById("button-stack"),n=(e.children,document.createElement("div"));n.id=t.tag,n.classList.add("button-header"),n.classList.add("enter-left");return n.innerText=t.tag.charAt(0).toUpperCase()+t.tag.substring(1),n.style.backgroundColor="rgba(172, 172, 180, 0.00)",e.appendChild(n),n}function c(t){var e=document.getElementById("button-stack"),n=(e.children,document.createElement("div"));return n.id=t.name,n.classList.add("button-hint"),n.classList.add("enter-left"),n.classList.add(t.tag),n.innerText=t.keyCut+" : "+t.name,e.appendChild(n),n}function s(t){document.getElementById("button-stack").children}function u(t){var e=t.tag+"-active";t.elem.classList.toggle(e)}function l(t){var e=t.tag+"-active";t.elem.classList.toggle(e),window.setTimeout(function(){t.elem.classList.toggle(e)}.bind(t),250)}function f(t){t.classList.remove("enter-left"),t.classList.add("exit-left"),setTimeout(function(){this.remove()}.bind(t),1e3)}function g(t,e,n){var r=i(t,e,n);setTimeout(function(){f(this)}.bind(r),3e3)}function p(t,e){var n=document.getElementById("snackbar");if(!n.classList.contains("show")){var r=e||"rgba(237, 55, 67, .75)";n.innerHTML=t,n.style.background=r,n.classList.toggle("show"),setTimeout((function(){n.classList.toggle("show")}),2e3)}}function d(t){var e,n=r(document.getElementById("mode-stack").children);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.id===t)return o}}catch(t){n.e(t)}finally{n.f()}return null}n.r(e),n.d(e,"pushModeHint",(function(){return i})),n.d(e,"addButtonHeading",(function(){return a})),n.d(e,"addButtonHint",(function(){return c})),n.d(e,"popModeHint",(function(){return f})),n.d(e,"pushPopModeHint",(function(){return g})),n.d(e,"snackHint",(function(){return p})),n.d(e,"getModeHintID",(function(){return d})),n.d(e,"pulseActive",(function(){return l})),n.d(e,"toggleActive",(function(){return u})),n.d(e,"modButtonStack",(function(){return s}))},function(module,exports,__webpack_require__){var factory;factory=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/automerge.js")}({"./backend/index.js":
/*!**************************!*\
  !*** ./backend/index.js ***!
  \**************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),a=i.Map,c=i.List,s=i.fromJS,u=n(/*! ../src/common */"./src/common.js"),l=(u.isObject,u.lessOrEqual),f=u.parseElemId,g=n(/*! ./op_set */"./backend/op_set.js"),p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.diffs={},this.children={}}return o(t,[{key:"unpackValue",value:function(t,e,n){Object.assign(e,n),n.link&&this.children[t].push(n.value)}},{key:"unpackConflicts",value:function(t,e,n){if(n){e.conflicts=[];var o=!0,i=!1,a=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,l=r(u,2),f=l[0],g=l[1],p={actor:f};this.unpackValue(t,p,g),e.conflicts.push(p)}}catch(t){i=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}}}},{key:"instantiateMap",value:function(t,e,n){var r=this.diffs[e];e!==g.ROOT_ID&&r.push({obj:e,type:n,action:"create"});var o=g.getObjectConflicts(t,e,this),i=!0,a=!1,c=void 0;try{for(var s,u=g.getObjectFields(t,e)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,f={obj:e,type:n,action:"set",key:l};this.unpackValue(e,f,g.getObjectField(t,e,l,this)),this.unpackConflicts(e,f,o.get(l)),r.push(f)}}catch(t){a=!0,c=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw c}}}},{key:"instantiateList",value:function(t,e,n){var r=this.diffs[e],o=0;r.push({obj:e,type:n,action:"create"});var i=!0,a=!1,c=void 0;try{for(var s,u=g.listIterator(t,e,this)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,p=l.index,d=l.elemId,h=l.value,m=l.conflicts;if(o=Math.max(o,f(d).counter),void 0!==p){var y={obj:e,type:n,action:"insert",index:p,elemId:d};this.unpackValue(e,y,h),this.unpackConflicts(e,y,m),r.push(y)}}}catch(t){a=!0,c=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw c}}r.push({obj:e,type:n,action:"maxElem",value:o})}},{key:"instantiateObject",value:function(t,e){if(this.diffs[e])return{value:e,link:!0};var n=e===g.ROOT_ID,r=t.getIn(["byObject",e,"_init","action"]);if(this.diffs[e]=[],this.children[e]=[],n||"makeMap"===r)this.instantiateMap(t,e,"map");else if("makeTable"===r)this.instantiateMap(t,e,"table");else if("makeList"===r)this.instantiateList(t,e,"list");else{if("makeText"!==r)throw new RangeError("Unknown object type: "+r);this.instantiateList(t,e,"text")}return{value:e,link:!0}}},{key:"makePatch",value:function(t,e){var n=!0,r=!1,o=void 0;try{for(var i,a=this.children[t][Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;this.makePatch(c,e)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}var s=!0,u=!1,l=void 0;try{for(var f,g=this.diffs[t][Symbol.iterator]();!(s=(f=g.next()).done);s=!0){var p=f.value;e.push(p)}}catch(t){u=!0,l=t}finally{try{!s&&g.return&&g.return()}finally{if(u)throw l}}}}]),t}();function d(t,e){var n=t.getIn(["opSet","undoPos"])>0,r=!t.getIn(["opSet","redoStack"]).isEmpty();return{clock:t.getIn(["opSet","clock"]).toJS(),deps:t.getIn(["opSet","deps"]).toJS(),canUndo:n,canRedo:r,diffs:e}}function h(t,e,n){var o=[],i=t.get("opSet"),a=!0,c=!1,u=void 0;try{for(var l,f=s(e)[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var p=l.value;p=p.remove("requestType");var h=g.addChange(i,p,n),m=r(h,2),y=m[0],v=m[1],b=!0,_=!1,w=void 0;try{for(var x,S=v[Symbol.iterator]();!(b=(x=S.next()).done);b=!0){var E=x.value;o.push(E)}}catch(t){_=!0,w=t}finally{try{!b&&S.return&&S.return()}finally{if(_)throw w}}i=y}}catch(t){c=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(c)throw u}}return[t=t.set("opSet",i),d(t,o)]}function m(t,e){return h(t,e,!1)}t.exports={init:function(){return a({opSet:g.init()})},applyChanges:m,applyLocalChange:function(t,e){if("string"!=typeof e.actor||"number"!=typeof e.seq)throw new TypeError("Change request requries `actor` and `seq` properties");if(e.seq<=t.getIn(["opSet","clock",e.actor],0))throw new RangeError("Change request has already been applied");var n=void 0;if("change"===e.requestType){var o=h(t,[e],!1!==e.undoable),i=r(o,2);t=i[0],n=i[1]}else if("undo"===e.requestType){var u=function(t,e){var n=t.getIn(["opSet","undoPos"]),o=t.getIn(["opSet","undoStack",n-1]);if(n<1||!o)throw new RangeError("Cannot undo: there is nothing to be undone");var i=e.actor,u=e.seq,l=e.deps,f=e.message,p=a({actor:i,seq:u,deps:s(l),message:f,ops:o}),h=t.get("opSet"),m=c().withMutations((function(t){var e=!0,n=!1,r=void 0;try{for(var i,c=o[Symbol.iterator]();!(e=(i=c.next()).done);e=!0){var s=i.value;if(!["set","del","link","inc"].includes(s.get("action")))throw new RangeError("Unexpected operation type in undo history: "+s);var u=g.getFieldOps(h,s.get("obj"),s.get("key"));if("inc"===s.get("action"))t.push(a({action:"inc",obj:s.get("obj"),key:s.get("key"),value:-s.get("value")}));else if(u.isEmpty())t.push(a({action:"del",obj:s.get("obj"),key:s.get("key")}));else{var l=!0,f=!1,p=void 0;try{for(var d,m=u[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var y=d.value;t.push(y.remove("actor").remove("seq"))}}catch(t){f=!0,p=t}finally{try{!l&&m.return&&m.return()}finally{if(f)throw p}}}}}catch(t){n=!0,r=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw r}}}));h=h.set("undoPos",n-1).update("redoStack",(function(t){return t.push(m)}));var y=g.addChange(h,p,!1),v=r(y,2),b=v[0],_=v[1];return[t=t.set("opSet",b),d(t,_)]}(t,e),l=r(u,2);t=l[0],n=l[1]}else{if("redo"!==e.requestType)throw new RangeError("Unknown requestType: "+e.requestType);var f=function(t,e){var n=t.getIn(["opSet","redoStack"]).last();if(!n)throw new RangeError("Cannot redo: the last change was not an undo");var o=e.actor,i=e.seq,c=e.deps,u=e.message,l=a({actor:o,seq:i,deps:s(c),message:u,ops:n}),f=t.get("opSet").update("undoPos",(function(t){return t+1})).update("redoStack",(function(t){return t.pop()})),p=g.addChange(f,l,!1),h=r(p,2),m=h[0],y=h[1];return[t=t.set("opSet",m),d(t,y)]}(t,e),p=r(f,2);t=p[0],n=p[1]}return n.actor=e.actor,n.seq=e.seq,[t,n]},getPatch:function(t){var e=[],n=t.get("opSet"),r=new p(n);return r.instantiateObject(n,g.ROOT_ID),r.makePatch(g.ROOT_ID,e),d(t,e)},getChanges:function(t,e){var n=t.getIn(["opSet","clock"]),r=e.getIn(["opSet","clock"]);if(!l(n,r))throw new RangeError("Cannot diff two states that have diverged");return g.getMissingChanges(e.get("opSet"),n).toJS()},getChangesForActor:function(t,e){return g.getChangesForActor(t.get("opSet"),e).toJS()},getMissingChanges:function(t,e){return g.getMissingChanges(t.get("opSet"),e).toJS()},getMissingDeps:function(t){return g.getMissingDeps(t.get("opSet"))},merge:function(t,e){var n=g.getMissingChanges(e.get("opSet"),t.getIn(["opSet","clock"]));return m(t,n)}}},"./backend/op_set.js":
/*!***************************!*\
  !*** ./backend/op_set.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),a=i.Map,c=i.List,s=i.Set,u=n(/*! ./skip_list */"./backend/skip_list.js").SkipList,l=n(/*! ../src/common */"./src/common.js"),f=l.ROOT_ID,g=l.parseElemId;function p(t,e,n){var r=[e.get("actor"),e.get("seq")],o=r[0],i=r[1],a=[n.get("actor"),n.get("seq")],c=a[0],s=a[1];if(!(o&&c&&i&&s))return!1;var u=t.getIn(["states",o,i-1,"allDeps"]),l=t.getIn(["states",c,s-1,"allDeps"]);return u.get(c,0)<s&&l.get(o,0)<i}function d(t,e){var n=e.get("actor"),r=e.get("seq"),o=!0;return e.get("deps").set(n,r-1).forEach((function(e,n){t.getIn(["clock",n],0)<e&&(o=!1)})),o}function h(t,e){return e.reduce((function(e,n,r){if(n<=0)return e;var o=t.getIn(["states",r,n-1,"allDeps"]);return e.mergeWith((function(t,e){return Math.max(t,e)}),o).set(r,n)}),a())}function m(t,e){for(var n=[];e!==f;){var r=t.getIn(["byObject",e,"_inbound"],s()).first();if(!r)return null;e=r.get("obj");var o=t.getIn(["byObject",e,"_init","action"]);if("makeList"===o||"makeText"===o){var i=t.getIn(["byObject",e,"_elemIds"]).indexOf(r.get("key"));if(i<0)return null;n.unshift(i)}else n.unshift(r.get("key"))}return n}function y(t,e){var n=e.get("obj");if(t.hasIn(["byObject",n,"_keys"]))throw new Error("Duplicate creation of object "+n);var r={action:"create",obj:n},o=a({_init:e,_inbound:s(),_keys:a()});return"makeMap"===e.get("action")?r.type="map":"makeTable"===e.get("action")?r.type="table":(r.type="makeText"===e.get("action")?"text":"list",o=o.set("_elemIds",new u)),[t=t.setIn(["byObject",n],o),[r]]}function v(t,e){var n=e.get("obj"),r=e.get("elem"),o=e.get("actor")+":"+r,i=Math.max(r,t.getIn(["byObject",n,"_maxElem"],0)),a="makeText"===t.getIn(["byObject",n,"_init","action"])?"text":"list";if(!t.get("byObject").has(n))throw new Error("Modification of unknown object "+n);if(t.hasIn(["byObject",n,"_insertion",o]))throw new Error("Duplicate list element ID "+o);return[t=t.updateIn(["byObject",n,"_following",e.get("key")],c(),(function(t){return t.push(e)})).setIn(["byObject",n,"_maxElem"],i).setIn(["byObject",n,"_insertion",o],e),[{obj:n,type:a,action:"maxElem",value:i,path:m(t,n)}]]}function b(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=t.shift()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value,s={actor:c.get("actor"),value:c.get("value")};"link"===c.get("action")&&(s.link=!0),c.get("datatype")&&(s.datatype=c.get("datatype")),e.push(s)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e}function _(t,e,n,r,o,i){var a="makeText"===t.getIn(["byObject",e,"_init","action"])?"text":"list",c=i?i.first():null,s=t.getIn(["byObject",e,"_elemIds"]),u=c?c.get("value"):null,l={action:o,type:a,obj:e,index:n,path:m(t,e)};if(c&&"link"===c.get("action")&&(l.link=!0,u={obj:c.get("value")}),"insert"===o)s=s.insertIndex(n,c.get("key"),u),l.elemId=r,l.value=c.get("value"),c.get("datatype")&&(l.datatype=c.get("datatype"));else if("set"===o)s=s.setValue(c.get("key"),u),l.value=c.get("value"),c.get("datatype")&&(l.datatype=c.get("datatype"));else{if("remove"!==o)throw new Error("Unknown action type: "+o);s=s.removeIndex(n)}return i&&i.size>1&&(l.conflicts=b(i)),[t=t.setIn(["byObject",e,"_elemIds"],s),[l]]}function w(t,e,n,r){var o=A(t,e,r),i=o.first(),a={action:"",type:n,obj:e,key:r,path:m(t,e)};return o.isEmpty()?a.action="remove":(a.action="set",a.value=i.get("value"),"link"===i.get("action")&&(a.link=!0),i.get("datatype")&&(a.datatype=i.get("datatype")),o.size>1&&(a.conflicts=b(o))),[t,[a]]}function x(t,e,n){var r=e.get("obj"),o=t.getIn(["byObject",r,"_init","action"]);if(!t.get("byObject").has(r))throw new Error("Modification of unknown object "+r);if(t.has("undoLocal")&&n){var i=void 0;(i="inc"===e.get("action")?c.of(a({action:"inc",obj:r,key:e.get("key"),value:-e.get("value")})):t.getIn(["byObject",r,"_keys",e.get("key")],c()).map((function(t){return t.filter((function(t,e){return["action","obj","key","value","datatype"].includes(e)}))}))).isEmpty()&&(i=c.of(a({action:"del",obj:r,key:e.get("key")}))),t=t.update("undoLocal",(function(t){return t.concat(i)}))}var u=t.getIn(["byObject",r,"_keys",e.get("key")],c()),l=void 0,g=void 0;if("inc"===e.get("action"))l=c(),g=u.map((function(n){return"set"!==n.get("action")||"number"!=typeof n.get("value")||"counter"!==n.get("datatype")||p(t,n,e)?n:n.set("value",n.get("value")+e.get("value"))}));else{var d=u.groupBy((function(n){return!!p(t,n,e)}));l=d.get(!1,c()),g=d.get(!0,c())}var h=function(e){t=t.updateIn(["byObject",e.get("value"),"_inbound"],(function(t){return t.remove(e)}))},m=!0,y=!1,v=void 0;try{for(var b,x=l.filter((function(t){return"link"===t.get("action")}))[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)h(b.value)}catch(t){y=!0,v=t}finally{try{!m&&x.return&&x.return()}finally{if(y)throw v}}if("link"===e.get("action")&&(t=t.updateIn(["byObject",e.get("value"),"_inbound"],s(),(function(t){return t.add(e)}))),["set","link"].includes(e.get("action"))&&(g=g.push(e)),g=g.sortBy((function(t){return t.get("actor")})).reverse(),t=t.setIn(["byObject",r,"_keys",e.get("key")],g),r===f||"makeMap"===o)return w(t,r,"map",e.get("key"));if("makeTable"===o)return w(t,r,"table",e.get("key"));if("makeList"===o||"makeText"===o)return function(t,e,n){var r=A(t,e,n),o=t.getIn(["byObject",e,"_elemIds"]),i=o.indexOf(n);if(i>=0)return r.isEmpty()?_(t,e,i,n,"remove",null):_(t,e,i,n,"set",r);if(r.isEmpty())return[t,[]];for(var a=n;i=-1,(a=C(t,e,a))&&!((i=o.indexOf(a))>=0););return _(t,e,i+1,n,"insert",r)}(t,r,e.get("key"));throw new RangeError("Unknown operation type "+o)}function S(t){for(var e={},n=[],r=t.length-1;r>=0;r--){var o=t[r],i=o.obj,a=o.action;if("maxElem"===a)(void 0===e[i]||e[i]<o.value)&&(e[i]=o.value,n.push(o));else if("insert"===a){var c=g(o.elemId).counter;(void 0===e[i]||e[i]<c)&&(e[i]=c),n.push(o)}else n.push(o)}return n.reverse()}function E(t,e){var n=e.get("actor"),r=e.get("seq"),i=t.getIn(["states",n],c());if(r<=i.size){if(!i.get(r-1).get("change").equals(e))throw new Error("Inconsistent reuse of sequence number "+r+" by "+n);return[t,[]]}var u,l=h(t,e.get("deps").set(n,r-1)),f=function(t,e){var n=[],r=s(),i=!0,a=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value,g=void 0,p=f.get("action");if(["makeMap","makeList","makeText","makeTable"].includes(p)){r=r.add(f.get("obj"));var d=y(t,f),h=o(d,2);t=h[0],g=h[1]}else if("ins"===p){var m=v(t,f),b=o(m,2);t=b[0],g=b[1]}else{if(!["set","del","link","inc"].includes(p))throw new RangeError("Unknown operation type "+p);var _=x(t,f,!r.contains(f.get("obj"))),w=o(_,2);t=w[0],g=w[1]}var E=!0,k=!1,A=void 0;try{for(var O,I=g[Symbol.iterator]();!(E=(O=I.next()).done);E=!0){var T=O.value;n.push(T)}}catch(t){k=!0,A=t}finally{try{!E&&I.return&&I.return()}finally{if(k)throw A}}}}catch(t){a=!0,c=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}return[t,S(n)]}(t=t.setIn(["states",n],i.push(a({change:e,allDeps:l}))),e.get("ops").map((function(t){return t.merge({actor:n,seq:r})}))),g=o(f,2);t=g[0],u=g[1];var p=t.get("deps").filter((function(t,e){return t>l.get(e,0)})).set(n,r);return[t=t.set("deps",p).setIn(["clock",n],r).update("history",(function(t){return t.push(e)})),u]}function k(t){for(var e=c(),n=void 0,r=[];;){var i=!0,a=!1,s=void 0;try{for(var u,l=t.get("queue")[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value;if(d(t,f)){var g=E(t,f),p=o(g,2);t=p[0],n=p[1];var h=!0,m=!1,y=void 0;try{for(var v,b=n[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var _=v.value;r.push(_)}}catch(t){m=!0,y=t}finally{try{!h&&b.return&&b.return()}finally{if(m)throw y}}}else e=e.push(f)}}catch(t){a=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}if(e.count()===t.get("queue").count())return[t,r];t=t.set("queue",e),e=c()}}function A(t,e,n){return t.getIn(["byObject",e,"_keys",n],c())}function O(t,e,n){if("_head"!==n){var r=t.getIn(["byObject",e,"_insertion",n]);if(!r)throw new TypeError("Missing index entry for list element "+n);return r.get("key")}}function I(t,e){return t.get("elem")<e.get("elem")?-1:t.get("elem")>e.get("elem")?1:t.get("actor")<e.get("actor")?-1:t.get("actor")>e.get("actor")?1:0}function T(t,e,n,r){var o=null;if(r){var i=g(r);o=a({actor:i.actorId,elem:i.counter})}return t.getIn(["byObject",e,"_following",n],c()).filter((function(t){return"ins"===t.get("action")})).filter((function(t){return!o||I(t,o)<0})).sort(I).reverse().map((function(t){return t.get("actor")+":"+t.get("elem")}))}function j(t,e,n){var r=T(t,e,n);if(!r.isEmpty())return r.first();for(var o=void 0;;){if(!(o=O(t,e,n)))return;var i=T(t,e,o,n);if(!i.isEmpty())return i.first();n=o}}function C(t,e,n){var r=O(t,e,n),o=T(t,e,r);if(o.first()===n)return"_head"===r?null:r;var i=void 0,a=!0,c=!1,s=void 0;try{for(var u,l=o[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;if(f===n)break;i=f}}catch(t){c=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(c)throw s}}for(;;){if((o=T(t,e,i)).isEmpty())return i;i=o.last()}}function M(t,e,n){if("object"!==(void 0===e?"undefined":r(e))||null===e)return e;if("link"===e.get("action"))return n.instantiateObject(t,e.get("value"));if("set"===e.get("action")){var o={value:e.get("value")};return e.get("datatype")&&(o.datatype=e.get("datatype")),o}throw new TypeError("Unexpected operation action: "+e.get("action"))}t.exports={init:function(){return a().set("states",a()).set("history",c()).set("byObject",a().set(f,a().set("_keys",a()))).set("clock",a()).set("deps",a()).set("undoPos",0).set("undoStack",c()).set("redoStack",c()).set("queue",c())},addChange:function(t,e,n){if(t=t.update("queue",(function(t){return t.push(e)})),n){var r,i=k(t=t.set("undoLocal",c())),a=o(i,2);return t=a[0],r=a[1],[t=function(t){var e=t.get("undoPos");return t.update("undoStack",(function(n){return n.slice(0,e).push(t.get("undoLocal"))})).set("undoPos",e+1).set("redoStack",c()).remove("undoLocal")}(t),r]}return k(t)},getMissingChanges:function(t,e){var n=h(t,e);return t.get("states").map((function(t,e){return t.skip(n.get(e,0))})).valueSeq().flatten(1).map((function(t){return t.get("change")}))},getChangesForActor:function(t,e,n){return n=n||0,t.get("states").filter((function(t,n){return n===e})).map((function(t,e){return t.skip(n)})).valueSeq().flatten(1).map((function(t){return t.get("change")}))},getMissingDeps:function(t){var e={},n=!0,r=!1,o=void 0;try{for(var i,a=t.get("queue")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;c.get("deps").set(c.get("actor"),c.get("seq")-1).forEach((function(n,r){t.getIn(["clock",r],0)<n&&(e[r]=Math.max(n,e[r]||0))}))}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e},getObjectFields:function(t,e){return t.getIn(["byObject",e,"_keys"]).keySeq().filter((function(n){return function(t,e,n){return!A(t,e,n).isEmpty()}(t,e,n)})).toSet()},getObjectField:function(t,e,n,r){var o=A(t,e,n);if(!o.isEmpty())return M(t,o.first(),r)},getObjectConflicts:function(t,e,n){return t.getIn(["byObject",e,"_keys"]).filter((function(n,r){return A(t,e,r).size>1})).mapEntries((function(e){var r=o(e,2);return[r[0],r[1].shift().toMap().mapEntries((function(e){var r=o(e,2),i=(r[0],r[1]);return[i.get("actor"),M(t,i,n)]}))]}))},getFieldOps:A,listElemByIndex:function(t,e,n,r){var o=t.getIn(["byObject",e,"_elemIds"]).keyOf(n);if(o){var i=A(t,e,o);if(!i.isEmpty())return M(t,i.first(),r)}},listLength:function(t,e){return t.getIn(["byObject",e,"_elemIds"]).length},listIterator:function(t,e,n){var r="_head",i=-1,a={next:function(){for(;r;){if(!(r=j(t,e,r)))return{done:!0};var a={elemId:r},c=A(t,e,r);return c.isEmpty()||(i+=1,a.index=i,a.value=M(t,c.first(),n),a.conflicts=null,c.size>1&&(a.conflicts=c.shift().toMap().mapEntries((function(e){var r=o(e,2),i=(r[0],r[1]);return[i.get("actor"),M(t,i,n)]})))),{done:!1,value:a}}}};return a[Symbol.iterator]=function(){return a},a},ROOT_ID:f}},"./backend/skip_list.js":
/*!******************************!*\
  !*** ./backend/skip_list.js ***!
  \******************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js").Map,a=function(){function t(e,n,r,i,a,c,s){o(this,t),this.key=e,this.value=n,this.level=r,this.prevKey=i,this.nextKey=a,this.prevCount=c,this.nextCount=s}return r(t,[{key:"setValue",value:function(e){return new t(this.key,e,this.level,this.prevKey,this.nextKey,this.prevCount,this.nextCount)}},{key:"insertAfter",value:function(e,n,r,o){if(n>this.level&&null!==this.key)throw new RangeError("Cannot increase the level of a non-head node");for(var i=Math.max(this.level,n),a=this.nextKey.slice(),c=this.nextCount.slice(),s=r;s<i;s++)s<n?(a[s]=e,c[s]=o):c[s]+=1;return new t(this.key,this.value,i,this.prevKey,a,this.prevCount,c)}},{key:"insertBefore",value:function(e,n,r,o){if(n>this.level)throw new RangeError("Cannot increase node level");for(var i=this.prevKey.slice(),a=this.prevCount.slice(),c=r;c<this.level;c++)c<n?(i[c]=e,a[c]=o):a[c]+=1;return new t(this.key,this.value,this.level,i,this.nextKey,a,this.nextCount)}},{key:"removeAfter",value:function(e,n,r,o){for(var i=this.nextKey.slice(),a=this.nextCount.slice(),c=e;c<this.level;c++)c<n?(i[c]=r[c],a[c]=o[c]):a[c]-=1;return new t(this.key,this.value,this.level,this.prevKey,i,this.prevCount,a)}},{key:"removeBefore",value:function(e,n,r,o){for(var i=this.prevKey.slice(),a=this.prevCount.slice(),c=e;c<this.level;c++)c<n?(i[c]=r[c],a[c]=o[c]):a[c]-=1;return new t(this.key,this.value,this.level,i,this.nextKey,a,this.nextCount)}}]),t}(),c=function(){function t(e){o(this,t);var n=new a(null,null,1,[],[null],[],[null]),r=e?e():{next:function(){for(var t=Math.floor(4294967296*Math.random()),e=1;t<1<<32-2*e&&e<16;)e+=1;return{value:e,done:!1}}};return s(0,i().set(null,n),r)}return r(t,[{key:"predecessors",value:function(t,e){for(var n=[t],r=[1],o=1;o<e;o++){for(var i=n[o-1],a=r[o-1];i;){var c=this._nodes.get(i);if(c.level>o)break;if(c.level<o)throw new RangeError("Node "+i+" below expected level "+(o-1));a+=c.prevCount[o-1],i=c.prevKey[o-1]}n[o]=i,r[o]=a}return{preKeys:n,preCounts:r}}},{key:"successors",value:function(t,e){for(var n=[t],r=[1],o=1;o<e;o++){for(var i=n[o-1],a=r[o-1];i;){var c=this._nodes.get(i);if(c.level>o)break;if(c.level<o)throw new RangeError("Node "+i+" below expected level "+(o-1));a+=c.nextCount[o-1],i=c.nextKey[o-1]}n[o]=i,r[o]=a}return{sucKeys:n,sucCounts:r}}},{key:"insertAfter",value:function(t,e,n){if("string"!=typeof e||""===e)throw new RangeError("Key must be a nonempty string");if(!this._nodes.has(t))throw new RangeError("The referenced predecessor key does not exist");if(this._nodes.has(e))throw new RangeError("Cannot insert a key that already exists");var r=this._randomSource.next().value,o=Math.max(r,this.headNode.level),i=this._nodes.get(t).nextKey[0]||null,c=this.predecessors(t,o),u=c.preKeys,l=c.preCounts,f=this.successors(i,o),g=f.sucKeys,p=f.sucCounts;return s(this.length+1,this._nodes.withMutations((function(t){for(var i=0,c=0,s=function(n){var a=Math.min(n,r);n!==o&&u[n]===u[i]||(t.update(u[i],(function(t){return t.insertAfter(e,a,i,l[i])})),i=n),!g[c]||n!==o&&g[n]===g[c]||(t.update(g[c],(function(t){return t.insertBefore(e,a,c,p[c])})),c=n)},f=1;f<=o;f++)s(f);t.set(e,new a(e,n,r,u.slice(0,r),g.slice(0,r),l.slice(0,r),p.slice(0,r)))})),this._randomSource)}},{key:"insertIndex",value:function(t,e,n){if("number"!=typeof t||t<0)throw new RangeError("Index must be a non-negative integer");return 0===t?this.insertAfter(null,e,n):this.insertAfter(this.keyOf(t-1),e,n)}},{key:"removeKey",value:function(t){if("string"!=typeof t||!this._nodes.has(t))throw new RangeError("The given key cannot be removed because it does not exist");for(var e=this._nodes.get(t),n=this.headNode.level,r=this.predecessors(e.prevKey[0],n),o=r.preKeys,i=r.preCounts,a=this.successors(e.nextKey[0],n),c=a.sucKeys,u=a.sucCounts,l=new Array(n),f=0;f<n;f++)l[f]=i[f]+u[f]-1;return s(this.length-1,this._nodes.withMutations((function(r){r.remove(t);for(var i=0,a=0,s=function(t){var s=Math.min(t,e.level);t!==n&&o[t]===o[i]||(r.update(o[i],(function(t){return t.removeAfter(i,s,c,l)})),i=t),!c[a]||t!==n&&c[t]===c[a]||(r.update(c[a],(function(t){return t.removeBefore(a,s,o,l)})),a=t)},u=1;u<=n;u++)s(u)})),this._randomSource)}},{key:"removeIndex",value:function(t){return this.removeKey(this.keyOf(t))}},{key:"indexOf",value:function(t){if("string"!=typeof t||""===t||!this._nodes.has(t))return-1;for(var e=this._nodes.get(t),n=0;e&&e.key;)n+=e.prevCount[e.level-1],e=this._nodes.get(e.prevKey[e.level-1]);return n-1}},{key:"keyOf",value:function(t){if("number"!=typeof t)return null;if(t<0&&(t+=this.length),t<0||t>=this.length)return null;for(var e=this._nodes.get(null),n=e.level-1,r=0;;){if(r===t+1)return e.key;r+e.nextCount[n]>t+1?n-=1:(r+=e.nextCount[n],e=this._nodes.get(e.nextKey[n]))}}},{key:"getValue",value:function(t){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");var e=this._nodes.get(t);return e&&e.value}},{key:"setValue",value:function(t,e){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");var n=this._nodes.get(t);if(!n)throw new RangeError("The referenced key does not exist");return n=n.setValue(e),s(this.length,this._nodes.set(t,n),this._randomSource)}},{key:"iterator",value:function(t){var e=this,n=this._nodes,r=n.get(null).nextKey[0];return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({next:function(){if(!r)return{value:void 0,done:!0};var e=n.get(r),o=void 0;switch(t){case"keys":o={value:r,done:!1};break;case"values":o={value:e.value,done:!1};break;case"entries":o={value:[r,e.value],done:!1}}return r=e.nextKey[0],o}},Symbol.iterator,(function(){return e.iterator(t)}))}},{key:Symbol.iterator,value:function(){return this.iterator("values")}},{key:"headNode",get:function(){return this._nodes.get(null)}}]),t}();function s(t,e,n){var r=Object.create(c.prototype);return r.length=t,r._nodes=e,r._randomSource=n,r}t.exports={SkipList:c}},"./frontend/apply_patch.js":
/*!*********************************!*\
  !*** ./frontend/apply_patch.js ***!
  \*********************************/
/*! no static exports found */function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=n(/*! ../src/common */"./src/common.js"),i=o.ROOT_ID,a=o.isObject,c=o.copyObject,s=o.parseElemId,u=n(/*! ./constants */"./frontend/constants.js"),l=u.OPTIONS,f=u.OBJECT_ID,g=u.CONFLICTS,p=u.ELEM_IDS,d=u.MAX_ELEM,h=n(/*! ./text */"./frontend/text.js"),m=(h.Text,h.instantiateText),y=n(/*! ./table */"./frontend/table.js"),v=y.Table,b=y.instantiateTable,_=n(/*! ./counter */"./frontend/counter.js").Counter;function w(t,e,n){if(t.link)return n[t.value]||e[t.value];if("timestamp"===t.datatype)return new Date(t.value);if("counter"===t.datatype)return new _(t.value);if(void 0!==t.datatype)throw new TypeError("Unknown datatype: "+t.datatype);return t.value}function x(t,e){var n={},r=t[g][e]||{},o=[t[e]].concat(Object.values(r)),i=!0,c=!1,s=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var p=u.value;a(p)&&p[f]&&(n[p[f]]=!0)}}catch(t){c=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(c)throw s}}return n}function S(t,e,n,r){var o=!0,i=!1,a=void 0;try{for(var c,s=Object.keys(e)[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;n[u]||delete r[u]}}catch(t){i=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}var l=!0,f=!1,g=void 0;try{for(var p,d=Object.keys(n)[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var h=p.value;if(r[h]&&r[h]!==t)throw new RangeError("Object "+h+" has multiple parents");r[h]||(r[h]=t)}}catch(t){f=!0,g=t}finally{try{!l&&d.return&&d.return()}finally{if(f)throw g}}}function E(t,e){if(t&&t[f]!==e)throw new RangeError("cloneMapObject ID mismatch: "+t[f]+" !== "+e);var n=c(t),r=c(t?t[g]:void 0);return Object.defineProperty(n,g,{value:r}),Object.defineProperty(n,f,{value:e}),n}function k(t,e,n,r){n[t.obj]||(n[t.obj]=E(e[t.obj],t.obj));var o=n[t.obj],i=o[g],a={},c={};if("create"===t.action);else if("set"===t.action){if(a=x(o,t.key),o[t.key]=w(t,e,n),t.conflicts){i[t.key]={};var s=!0,u=!1,l=void 0;try{for(var f,p=t.conflicts[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var d=f.value;i[t.key][d.actor]=w(d,e,n)}}catch(t){u=!0,l=t}finally{try{!s&&p.return&&p.return()}finally{if(u)throw l}}Object.freeze(i[t.key])}else delete i[t.key];c=x(o,t.key)}else{if("remove"!==t.action)throw new RangeError("Unknown action type: "+t.action);a=x(o,t.key),delete o[t.key],delete i[t.key]}S(t.obj,a,c,r)}function A(t,e,n){n[t]||(n[t]=E(e[t],t));var r=n[t],o=!0,s=!1,u=void 0;try{for(var p,d=Object.keys(r)[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var h=p.value,m=r[h];a(m)&&n[m[f]]&&(r[h]=n[m[f]]);var y=r[g][h]||{},v=null,b=!0,_=!1,w=void 0;try{for(var x,S=Object.keys(y)[Symbol.iterator]();!(b=(x=S.next()).done);b=!0){var k=x.value;m=y[k],a(m)&&n[m[f]]&&(v||(v=c(y),r[g][h]=v),v[k]=n[m[f]])}}catch(t){_=!0,w=t}finally{try{!b&&S.return&&S.return()}finally{if(_)throw w}}v&&e[i][l].freeze&&Object.freeze(v)}}catch(t){s=!0,u=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw u}}}function O(t,e,n,r){n[t.obj]||(n[t.obj]=e[t.obj]?e[t.obj]._clone():b(t.obj));var o=n[t.obj],i={},c={};if("create"===t.action);else if("set"===t.action){var s=o.byId(t.key);a(s)&&(i[s[f]]=!0),t.link?(o._set(t.key,n[t.value]||e[t.value]),c[t.value]=!0):o._set(t.key,t.value)}else{if("remove"!==t.action)throw new RangeError("Unknown action type: "+t.action);var u=o.byId(t.key);a(u)&&(i[u[f]]=!0),o.remove(t.key)}S(t.obj,i,c,r)}function I(t,e,n){n[t]||(n[t]=e[t]._clone());var r=n[t],o=!0,i=!1,c=void 0;try{for(var s,u=Object.keys(r.entries)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value,g=r.byId(l);a(g)&&n[g[f]]&&r._set(l,n[g[f]])}}catch(t){i=!0,c=t}finally{try{!o&&u.return&&u.return()}finally{if(i)throw c}}}function T(t,e){if(t&&t[f]!==e)throw new RangeError("cloneListObject ID mismatch: "+t[f]+" !== "+e);var n=t?t.slice():[],r=t&&t[g]?t[g].slice():[],o=t&&t[p]?t[p].slice():[],i=t&&t[d]?t[d]:0;return Object.defineProperty(n,f,{value:e}),Object.defineProperty(n,g,{value:r}),Object.defineProperty(n,p,{value:o}),Object.defineProperty(n,d,{value:i,writable:!0}),n}function j(t,e,n,r){n[t.obj]||(n[t.obj]=T(e[t.obj],t.obj));var o=n[t.obj],i=o[g],a=o[p],c=null,u=null;if(["insert","set"].includes(t.action)&&(c=w(t,e,n),t.conflicts)){u={};var l=!0,f=!1,h=void 0;try{for(var m,y=t.conflicts[Symbol.iterator]();!(l=(m=y.next()).done);l=!0){var v=m.value;u[v.actor]=w(v,e,n)}}catch(t){f=!0,h=t}finally{try{!l&&y.return&&y.return()}finally{if(f)throw h}}Object.freeze(u)}var b={},_={};if("create"===t.action);else if("insert"===t.action)o[d]=Math.max(o[d],s(t.elemId).counter),o.splice(t.index,0,c),i.splice(t.index,0,u),a.splice(t.index,0,t.elemId),_=x(o,t.index);else if("set"===t.action)b=x(o,t.index),o[t.index]=c,i[t.index]=u,_=x(o,t.index);else if("remove"===t.action)b=x(o,t.index),o.splice(t.index,1),i.splice(t.index,1),a.splice(t.index,1);else{if("maxElem"!==t.action)throw new RangeError("Unknown action type: "+t.action);o[d]=Math.max(o[d],t.value)}S(t.obj,b,_,r)}function C(t,e,n){n[t]||(n[t]=T(e[t],t));for(var r=n[t],o=0;o<r.length;o++){var s=r[o];a(s)&&n[s[f]]&&(r[o]=n[s[f]]);var u=r[g][o]||{},p=null,d=!0,h=!1,m=void 0;try{for(var y,v=Object.keys(u)[Symbol.iterator]();!(d=(y=v.next()).done);d=!0){var b=y.value;s=u[b],a(s)&&n[s[f]]&&(p||(p=c(u),r[g][o]=p),p[b]=n[s[f]])}}catch(t){h=!0,m=t}finally{try{!d&&v.return&&v.return()}finally{if(h)throw m}}p&&e[i][l].freeze&&Object.freeze(p)}}function M(t,e,n,o,i){var a=t[e].obj;if(!i[a])if(o[a]){var c=o[a].elems.slice(),u=o[a][d];i[a]=m(a,c,u)}else i[a]=m(a,[],0);for(var l=i[a].elems,f=i[a][d],g=-1,p=void 0,h=void 0;e<=n;){var y=t[e];if("create"===y.action);else if("insert"===y.action){g<0&&(g=y.index,p=0,h=[]),f=Math.max(f,s(y.elemId).counter);var v=w(y,o,i);h.push({elemId:y.elemId,value:v,conflicts:y.conflicts}),e!==n&&"insert"===t[e+1].action&&t[e+1].index===y.index+1||(l.splice.apply(l,[g,p].concat(r(h))),g=-1)}else if("set"===y.action)l[y.index]={elemId:l[y.index].elemId,value:w(y,o,i),conflicts:y.conflicts};else if("remove"===y.action)g<0&&(g=y.index,p=0,h=[]),p+=1,e!==n&&["insert","remove"].includes(t[e+1].action)&&t[e+1].index===y.index||(l.splice(g,p),g=-1);else{if("maxElem"!==y.action)throw new RangeError("Unknown action type: "+y.action);f=Math.max(f,y.value)}e+=1}i[a]=m(a,l,f)}t.exports={applyDiffs:function(t,e,n,r){for(var o=0,i=0;i<t.length;i++){var a=t[i];if("map"===a.type)k(a,e,n,r),o=i+1;else if("table"===a.type)O(a,e,n,r),o=i+1;else if("list"===a.type)j(a,e,n,r),o=i+1;else{if("text"!==a.type)throw new TypeError("Unknown object type: "+a.type);i!==t.length-1&&t[i+1].obj===a.obj||(M(t,o,i,e,n),o=i+1)}}},updateParentObjects:function(t,e,n){for(var r=e;Object.keys(r).length>0;){var o={},i=!0,a=!1,c=void 0;try{for(var s,u=Object.keys(r)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=n[s.value];l&&(o[l]=!0)}}catch(t){a=!0,c=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw c}}r=o;var f=!0,g=!1,p=void 0;try{for(var d,h=Object.keys(o)[Symbol.iterator]();!(f=(d=h.next()).done);f=!0){var m=d.value;Array.isArray(e[m]||t[m])?C(m,t,e):(e[m]||t[m])instanceof v?I(m,t,e):A(m,t,e)}}catch(t){g=!0,p=t}finally{try{!f&&h.return&&h.return()}finally{if(g)throw p}}}},cloneRootObject:function(t){if(t[f]!==i)throw new RangeError("Not the root object: "+t[f]);return E(t,i)}}},"./frontend/constants.js":
/*!*******************************!*\
  !*** ./frontend/constants.js ***!
  \*******************************/
/*! no static exports found */function(t,e,n){"use strict";var r=Symbol("_options"),o=Symbol("_cache"),i=Symbol("_inbound"),a=Symbol("_state"),c=Symbol("_objectId"),s=Symbol("_conflicts"),u=Symbol("_change"),l=Symbol("_elemIds"),f=Symbol("_maxElem");t.exports={OPTIONS:r,CACHE:o,INBOUND:i,STATE:a,OBJECT_ID:c,CONFLICTS:s,CHANGE:u,ELEM_IDS:l,MAX_ELEM:f}},"./frontend/context.js":
/*!*****************************!*\
  !*** ./frontend/context.js ***!
  \*****************************/
/*! no static exports found */function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! ./constants */"./frontend/constants.js"),a=i.CACHE,c=i.INBOUND,s=i.OBJECT_ID,u=i.CONFLICTS,l=i.MAX_ELEM,f=n(/*! ./apply_patch */"./frontend/apply_patch.js").applyDiffs,g=n(/*! ./text */"./frontend/text.js"),p=g.Text,d=g.getElemId,h=n(/*! ./table */"./frontend/table.js").Table,m=n(/*! ./counter */"./frontend/counter.js"),y=m.Counter,v=m.getWriteableCounter,b=n(/*! ../src/common */"./src/common.js"),_=b.isObject,w=b.copyObject,x=n(/*! ../src/uuid */"./src/uuid.js"),S=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actorId=n,this.cache=e[a],this.updated={},this.inbound=w(e[c]),this.ops=[],this.diffs=[]}return o(t,[{key:"addOp",value:function(t){this.ops.push(t)}},{key:"apply",value:function(t){this.diffs.push(t),f([t],this.cache,this.updated,this.inbound)}},{key:"getObject",value:function(t){var e=this.updated[t]||this.cache[t];if(!e)throw new RangeError("Target object does not exist: "+t);return e}},{key:"getObjectField",value:function(t,e){if(["string","number"].includes(void 0===e?"undefined":r(e))){var n=this.getObject(t);return n[e]instanceof y?v(n[e].value,this,t,e):_(n[e])?this.instantiateObject(n[e][s]):n[e]}}},{key:"createNestedObjects",value:function(t){if("string"==typeof t[s])throw new TypeError("Cannot assign an object that already belongs to an Automerge document. See https://github.com/automerge/automerge#making-fine-grained-changes");var e=x();if(t instanceof p){this.apply({action:"create",type:"text",obj:e}),this.addOp({action:"makeText",obj:e}),t.length>0&&this.splice(e,0,0,[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t)));var n=this.getObject(e);t[s]=e,t.elems=n.elems,t[l]=n.maxElem,t.context=this}else if(t instanceof h){if(t.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");this.apply({action:"create",type:"table",obj:e}),this.addOp({action:"makeTable",obj:e})}else if(Array.isArray(t))this.apply({action:"create",type:"list",obj:e}),this.addOp({action:"makeList",obj:e}),this.splice(e,0,0,t);else{this.apply({action:"create",type:"map",obj:e}),this.addOp({action:"makeMap",obj:e});var r=!0,o=!1,i=void 0;try{for(var a,c=Object.keys(t)[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;this.setMapKey(e,"map",u,t[u])}}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}}return e}},{key:"setValue",value:function(t,e,n){if(!["object","boolean","number","string"].includes(void 0===n?"undefined":r(n)))throw new TypeError("Unsupported type of value: "+(void 0===n?"undefined":r(n)));if(_(n)){if(n instanceof Date){var o=n.getTime();return this.addOp({action:"set",obj:t,key:e,value:o,datatype:"timestamp"}),{value:o,datatype:"timestamp"}}if(n instanceof y)return this.addOp({action:"set",obj:t,key:e,value:n.value,datatype:"counter"}),{value:n.value,datatype:"counter"};var i=this.createNestedObjects(n);return this.addOp({action:"link",obj:t,key:e,value:i}),{value:i,link:!0}}return this.addOp({action:"set",obj:t,key:e,value:n}),{value:n}}},{key:"setMapKey",value:function(t,e,n,o){if("string"!=typeof n)throw new RangeError("The key of a map entry must be a string, not "+(void 0===n?"undefined":r(n)));if(""===n)throw new RangeError("The key of a map entry must not be an empty string");var i=this.getObject(t);if(i[n]instanceof y)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");if(i[n]!==o||i[u][n]||void 0===o){var a=this.setValue(t,n,o);this.apply(Object.assign({action:"set",type:e,obj:t,key:n},a))}}},{key:"deleteMapKey",value:function(t,e){void 0!==this.getObject(t)[e]&&(this.apply({action:"remove",type:"map",obj:t,key:e}),this.addOp({action:"del",obj:t,key:e}))}},{key:"insertListItem",value:function(t,e,n){var r=this.getObject(t);if(e<0||e>r.length)throw new RangeError("List index "+e+" is out of bounds for list of length "+r.length);var o=r[l]+1,i=r instanceof p?"text":"list",a=0===e?"_head":d(r,e-1),c=this.actorId+":"+o;this.addOp({action:"ins",obj:t,key:a,elem:o});var s=this.setValue(t,c,n);this.apply(Object.assign({action:"insert",type:i,obj:t,index:e,elemId:c},s)),this.getObject(t)[l]=o}},{key:"setListIndex",value:function(t,e,n){var r=this.getObject(t);if(e!==r.length){if(e<0||e>r.length)throw new RangeError("List index "+e+" is out of bounds for list of length "+r.length);if(r[e]instanceof y)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");if(r[e]!==n||r[u][e]||void 0===n){var o=d(r,e),i=r instanceof p?"text":"list",a=this.setValue(t,o,n);this.apply(Object.assign({action:"set",type:i,obj:t,index:e},a))}}else this.insertListItem(t,e,n)}},{key:"splice",value:function(t,e,n,r){var o=this.getObject(t),i=o instanceof p?"text":"list";if(n>0){if(e<0||e>o.length-n)throw new RangeError(n+" deletions starting at index "+e+" are out of bounds for list of length "+o.length);for(var a=0;a<n;a++)this.addOp({action:"del",obj:t,key:d(o,e)}),this.apply({action:"remove",type:i,obj:t,index:e}),0===a&&(o=this.getObject(t))}for(var c=0;c<r.length;c++)this.insertListItem(t,e+c,r[c])}},{key:"addTableRow",value:function(t,e){if(!_(e)||Array.isArray(e))throw new TypeError("A table row must be an object");if(e[s])throw new TypeError("Cannot reuse an existing object as table row");if(e.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');var n=this.createNestedObjects(e);return this.apply({action:"set",type:"table",obj:t,key:n,value:n,link:!0}),this.addOp({action:"link",obj:t,key:n,value:n}),n}},{key:"deleteTableRow",value:function(t,e){this.apply({action:"remove",type:"table",obj:t,key:e}),this.addOp({action:"del",obj:t,key:e})}},{key:"increment",value:function(t,e,n){var r=this.getObject(t);if(!(r[e]instanceof y))throw new TypeError("Only counter values can be incremented");var o=r[e].value+n;if(Array.isArray(r)||r instanceof p){var i=d(r,e),a=r instanceof p?"text":"list";this.addOp({action:"inc",obj:t,key:i,value:n}),this.apply({action:"set",obj:t,type:a,index:e,value:o,datatype:"counter"})}else this.addOp({action:"inc",obj:t,key:e,value:n}),this.apply({action:"set",obj:t,type:"map",key:e,value:o,datatype:"counter"})}}]),t}();t.exports={Context:S}},"./frontend/counter.js":
/*!*****************************!*\
  !*** ./frontend/counter.js ***!
  \*****************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){i(this,t),this.value=e||0,Object.freeze(this)}return r(t,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.valueOf().toString()}},{key:"toJSON",value:function(){return this.value}}]),t}(),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"increment",value:function(t){return t="number"==typeof t?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}},{key:"decrement",value:function(t){return this.increment("number"==typeof t?-t:-1)}}]),e}(a);t.exports={Counter:a,getWriteableCounter:function(t,e,n,r){var o=Object.create(c.prototype);return o.value=t,o.context=e,o.objectId=n,o.key=r,o}}},"./frontend/index.js":
/*!***************************!*\
  !*** ./frontend/index.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(/*! ./constants */"./frontend/constants.js"),a=i.OPTIONS,c=i.CACHE,s=i.INBOUND,u=i.STATE,l=i.OBJECT_ID,f=i.CONFLICTS,g=i.CHANGE,p=i.ELEM_IDS,d=n(/*! ../src/common */"./src/common.js"),h=d.ROOT_ID,m=d.isObject,y=d.copyObject,v=n(/*! ../src/uuid */"./src/uuid.js"),b=n(/*! ./apply_patch */"./frontend/apply_patch.js"),_=b.applyDiffs,w=b.updateParentObjects,x=b.cloneRootObject,S=n(/*! ./proxies */"./frontend/proxies.js").rootObjectProxy,E=n(/*! ./context */"./frontend/context.js").Context,k=n(/*! ./text */"./frontend/text.js").Text,A=n(/*! ./table */"./frontend/table.js").Table,O=n(/*! ./counter */"./frontend/counter.js").Counter;function I(t,e,n,r){var o=e[h];if(o||(o=x(t[c][h]),e[h]=o),Object.defineProperty(o,a,{value:t[a]}),Object.defineProperty(o,c,{value:e}),Object.defineProperty(o,s,{value:n}),Object.defineProperty(o,u,{value:r}),t[a].freeze){var i=!0,l=!1,g=void 0;try{for(var p,d=Object.keys(e)[Symbol.iterator]();!(i=(p=d.next()).done);i=!0){var m=p.value;e[m]instanceof A?e[m]._freeze():(Object.freeze(e[m]),Object.freeze(e[m][f]))}}catch(t){l=!0,g=t}finally{try{!i&&d.return&&d.return()}finally{if(l)throw g}}}var y=!0,v=!1,b=void 0;try{for(var _,w=Object.keys(t[c])[Symbol.iterator]();!(y=(_=w.next()).done);y=!0){var S=_.value;e[S]||(e[S]=t[c][S])}}catch(t){v=!0,b=t}finally{try{!y&&w.return&&w.return()}finally{if(v)throw b}}return t[a].freeze&&(Object.freeze(e),Object.freeze(n)),o}function T(t,e,n,i){var c=R(t);if(!c)throw new Error("Actor ID must be initialized with setActorId() before making a change");var s=y(t[u]);s.seq+=1;var l=y(s.deps);delete l[c];var f={requestType:e,actor:c,seq:s.seq,deps:l};if(i&&void 0!==i.message&&(f.message=i.message),i&&!1===i.undoable&&(f.undoable=!1),n&&(f.ops=function(t){for(var e={},n=[],r=t.length-1;r>=0;r--){var i=t[r],a=i.obj,c=i.key,s=i.action;["set","del","link","inc"].includes(s)?e[a]?e[a][c]?"inc"===e[a][c].action&&["set","inc"].includes(s)&&(e[a][c].action=s,e[a][c].value+=i.value):(e[a][c]=i,n.push(i)):(e[a]=o({},c,i),n.push(i)):n.push(i)}return n.reverse()}(n.ops)),t[a].backend){var g=t[a].backend.applyLocalChange(s.backendState,f),p=r(g,2),d=p[0],h=p[1];return s.backendState=d,s.requests=[],[j(t,h,s,!0),f]}n||(n=new E(t,c));var m=y(f);return m.before=t,m.diffs=n.diffs,s.requests=s.requests.slice(),s.requests.push(m),[I(t,n.updated,n.inbound,s),f]}function j(t,e,n,r){var o=R(t),i=y(t[s]),a={};if(_(e.diffs,t[c],a,i),w(t[c],a,i),r){var u=e.clock?e.clock[o]:void 0;u&&u>n.seq&&(n.seq=u),n.deps=e.deps,n.canUndo=e.canUndo,n.canRedo=e.canRedo}return I(t,a,i,n)}function C(t,e){var n=[],r=!0,o=!1,i=void 0;try{t:for(var a,c=t.diffs[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;s=y(s);var u=!0,l=!1,f=void 0;try{for(var g,p=e.diffs[Symbol.iterator]();!(u=(g=p.next()).done);u=!0){var d=g.value;if(s.obj===d.obj&&"list"===s.type&&["insert","set","remove"].includes(s.action)&&("insert"===d.action&&d.index<=s.index&&(s.index+=1),"remove"===d.action&&d.index<s.index&&(s.index-=1),"remove"===d.action&&d.index===s.index&&("set"===s.action&&(s.action="insert"),"remove"===s.action)))continue t}}catch(t){l=!0,f=t}finally{try{!u&&p.return&&p.return()}finally{if(l)throw f}}n.push(s)}}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}t.diffs=n}function M(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!m(t))throw new TypeError("Unsupported value for init() options: "+t);void 0!==t.actorId||t.deferActorId||(t.actorId=v());var e={},n=o({},h,e),r={seq:0,requests:[],deps:{},canUndo:!1,canRedo:!1};return t.backend&&(r.backendState=t.backend.init()),Object.defineProperty(e,l,{value:h}),Object.defineProperty(e,a,{value:Object.freeze(t)}),Object.defineProperty(e,f,{value:Object.freeze({})}),Object.defineProperty(e,c,{value:Object.freeze(n)}),Object.defineProperty(e,s,{value:Object.freeze({})}),Object.defineProperty(e,u,{value:Object.freeze(r)}),Object.freeze(e)}function P(t,e,n){if(t[l]!==h)throw new TypeError("The first argument to Automerge.change must be the document root");if(t[g])throw new TypeError("Calls to Automerge.change cannot be nested");if("function"==typeof e&&void 0===n){var r=[n,e];e=r[0],n=r[1]}if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");var o=R(t);if(!o)throw new Error("Actor ID must be initialized with setActorId() before making a change");var i=new E(t,o);return n(S(i)),0===Object.keys(i.updated).length?[t,null]:(w(t[c],i.updated,i.inbound),T(t,"change",i,e))}function L(t){return t[u].requests.some((function(t){return["undo","redo"].includes(t.requestType)}))}function R(t){return t[u].actorId||t[a].actorId}t.exports={init:M,from:function(t,e){return P(M(e),"Initialization",(function(e){return Object.assign(e,t)}))},change:P,emptyChange:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");var n=R(t);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");return T(t,"change",new E(t,n),e)},applyPatch:function(t,e){var n=y(t[u]),r=void 0;if(n.requests.length>0)if(r=n.requests[0].before,e.actor===R(t)&&void 0!==e.seq){if(n.requests[0].seq!==e.seq)throw new RangeError("Mismatched sequence number: patch "+e.seq+" does not match next request "+n.requests[0].seq);n.requests=n.requests.slice(1).map(y)}else n.requests=n.requests.slice().map(y);else r=t,n.requests=[];if(t[a].backend){if(!e.state)throw new RangeError("When an immediate backend is used, a patch must contain the new backend state");return n.backendState=e.state,n.requests=[],j(t,e,n,!0)}var o=j(r,e,n,!0),i=!0,c=!1,s=void 0;try{for(var l,f=n.requests[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var g=l.value;g.before=o,C(g,e),o=j(g.before,g,n,!1)}}catch(t){c=!0,s=t}finally{try{!i&&f.return&&f.return()}finally{if(c)throw s}}return o},canUndo:function(t){return!!t[u].canUndo&&!L(t)},undo:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");if(!t[u].canUndo)throw new Error("Cannot undo: there is nothing to be undone");if(L(t))throw new Error("Can only have one undo in flight at any one time");return T(t,"undo",null,e)},canRedo:function(t){return!!t[u].canRedo&&!L(t)},redo:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");if(!t[u].canRedo)throw new Error("Cannot redo: there is no prior undo");if(L(t))throw new Error("Can only have one redo in flight at any one time");return T(t,"redo",null,e)},getObjectId:function(t){return t[l]},getObjectById:function(t,e){var n=t[g];return n?n.instantiateObject(e):t[c][e]},getActorId:R,setActorId:function(t,e){var n=Object.assign({},t[u],{actorId:e});return I(t,{},t[s],n)},getConflicts:function(t,e){return t[f][e]},getBackendState:function(t){return t[u].backendState},getElementIds:function(t){return t[p]},Text:k,Table:A,Counter:O}},"./frontend/proxies.js":
/*!*****************************!*\
  !*** ./frontend/proxies.js ***!
  \*****************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(/*! ../src/common */"./src/common.js").ROOT_ID,i=n(/*! ./constants */"./frontend/constants.js"),a=i.OBJECT_ID,c=i.CHANGE,s=i.STATE,u=n(/*! ./text */"./frontend/text.js").Text,l=n(/*! ./table */"./frontend/table.js").Table;function f(t){if("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"!=typeof t)throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(t));if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}var g={get:function(t,e){var n=t.context,r=t.objectId;return e===a?r:e===c?n:e===s?{actorId:n.actorId}:n.getObjectField(r,e)},set:function(t,e,n){var r=t.context,o=t.objectId,i=t.readonly;if(Array.isArray(i)&&i.indexOf(e)>=0)throw new RangeError('Object property "'+e+'" cannot be modified');return r.setMapKey(o,"map",e,n),!0},deleteProperty:function(t,e){var n=t.context,r=t.objectId,o=t.readonly;if(Array.isArray(o)&&o.indexOf(e)>=0)throw new RangeError('Object property "'+e+'" cannot be modified');return n.deleteMapKey(r,e),!0},has:function(t,e){var n=t.context,r=t.objectId;return[a,c].includes(e)||e in n.getObject(r)},getOwnPropertyDescriptor:function(t,e){var n=t.context,r=t.objectId;if(e in n.getObject(r))return{configurable:!0,enumerable:!0,value:n.getObjectField(r,e)}},ownKeys:function(t){var e=t.context,n=t.objectId;return Object.keys(e.getObject(n))}},p={get:function(t,e){var n=r(t,2),o=n[0],i=n[1];return e===Symbol.iterator?o.getObject(i)[Symbol.iterator]:e===a?i:e===c?o:"length"===e?o.getObject(i).length:"string"==typeof e&&/^[0-9]+$/.test(e)?o.getObjectField(i,f(e)):function(t,e){for(var n={deleteAt:function(n,r){return t.splice(e,f(n),r||1,[]),this},fill:function(n,r,o){for(var i=t.getObject(e),a=f(r||0);a<f(o||i.length);a++)t.setListIndex(e,a,n);return this},insertAt:function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.splice(e,f(n),0,o),this},pop:function(){var n=t.getObject(e);if(0!=n.length){var r=t.getObjectField(e,n.length-1);return t.splice(e,n.length-1,1,[]),r}},push:function(){for(var n=t.getObject(e),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.splice(e,n.length,0,o),t.getObject(e).length},shift:function(){if(0!=t.getObject(e).length){var n=t.getObjectField(e,0);return t.splice(e,0,1,[]),n}},splice:function(n,r){var o=t.getObject(e);n=f(n),void 0===r&&(r=o.length-n);for(var i=[],a=0;a<r;a++)i.push(t.getObjectField(e,n+a));for(var c=arguments.length,s=Array(c>2?c-2:0),u=2;u<c;u++)s[u-2]=arguments[u];return t.splice(e,n,r,s),i},unshift:function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.splice(e,0,0,r),t.getObject(e).length}},r=function(r){var o=t.getObject(e);n[r]=function(){return o[r]()}},o=["entries","keys","values"],i=0;i<o.length;i++)r(o[i]);for(var a=function(r){n[r]=function(){for(var n,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=t.getObject(e).map((function(n,r){return t.getObjectField(e,r)}));return(n=c[r]).call.apply(n,[c].concat(i))}},c=["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"],s=0;s<c.length;s++)a(c[s]);return n}(o,i)[e]},set:function(t,e,n){var o=r(t,2),i=o[0],a=o[1];return i.setListIndex(a,f(e),n),!0},deleteProperty:function(t,e){var n=r(t,2),o=n[0],i=n[1];return o.splice(i,f(e),1,[]),!0},has:function(t,e){var n=r(t,2),o=n[0],i=n[1];return"string"==typeof e&&/^[0-9]+$/.test(e)?f(e)<o.getObject(i).length:["length",a,c].includes(e)},getOwnPropertyDescriptor:function(t,e){var n=r(t,2),o=n[0],i=n[1],c=o.getObject(i);if("length"===e)return{writable:!0,value:c.length};if(e===a)return{configurable:!1,enumerable:!1,value:i};if("string"==typeof e&&/^[0-9]+$/.test(e)){var s=f(e);if(s<c.length)return{configurable:!0,enumerable:!0,value:o.getObjectField(i,s)}}},ownKeys:function(t){var e=r(t,2),n=e[0],o=e[1],i=n.getObject(o),a=["length"],c=!0,s=!1,u=void 0;try{for(var l,f=Object.keys(i)[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var g=l.value;a.push(g)}}catch(t){s=!0,u=t}finally{try{!c&&f.return&&f.return()}finally{if(s)throw u}}return a}};function d(t,e,n){return new Proxy({context:t,objectId:e,readonly:n},g)}function h(t,e){var n=this.getObject(t);return Array.isArray(n)?function(t,e){return new Proxy([t,e],p)}(this,t):n instanceof u||n instanceof l?n.getWriteable(this):d(this,t,e)}t.exports={rootObjectProxy:function(t){return t.instantiateObject=h,d(t,o)}}},"./frontend/table.js":
/*!***************************!*\
  !*** ./frontend/table.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(/*! ./constants */"./frontend/constants.js"),c=a.OBJECT_ID,s=a.CONFLICTS,u=n(/*! ../src/common */"./src/common.js"),l=u.isObject,f=u.copyObject;function g(t,e,n){var r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;if(e[s]!==n[s]){if("number"==typeof e[s]&&"number"==typeof n[s])return e[s]-n[s];var u=""+e[s],l=""+n[s];if(u!==l)return u<l?-1:1}}}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return 0}var p=function(){function t(){i(this,t),this.entries=Object.freeze({}),Object.freeze(this)}return r(t,[{key:"byId",value:function(t){return this.entries[t]}},{key:"filter",value:function(t,e){return this.rows.filter(t,e)}},{key:"find",value:function(t,e){return this.rows.find(t,e)}},{key:"map",value:function(t,e){return this.rows.map(t,e)}},{key:"sort",value:function(t){if("function"==typeof t)return this.rows.sort(t);if("string"==typeof t)return this.rows.sort((function(e,n){return g([t],e,n)}));if(Array.isArray(t))return this.rows.sort((function(e,n){return g(t,e,n)}));if(void 0===t)return this.rows.sort((function(t,e){return g(["id"],t,e)}));throw new TypeError("Unsupported sorting argument: "+t)}},{key:Symbol.iterator,value:function(){var t=this.rows,e=-1;return{next:function(){return(e+=1)<t.length?{done:!1,value:t[e]}:{done:!0}}}}},{key:"_clone",value:function(){if(!this[c])throw new RangeError("clone() requires the objectId to be set");return h(this[c],f(this.entries))}},{key:"_set",value:function(t,e){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");l(e)&&!Array.isArray(e)&&Object.defineProperty(e,"id",{value:t,enumerable:!0}),this.entries[t]=e}},{key:"remove",value:function(t){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[t]}},{key:"_freeze",value:function(){Object.freeze(this.entries),Object.freeze(this)}},{key:"getWriteable",value:function(t){if(!this[c])throw new RangeError("getWriteable() requires the objectId to be set");var e=Object.create(d.prototype);return e[c]=this[c],e.context=t,e.entries=this.entries,e}},{key:"toJSON",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var o,i=this.ids[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;t[a]=this.byId(a)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}},{key:"ids",get:function(){var t=this;return Object.keys(this.entries).filter((function(e){var n=t.entries[e];return l(n)&&n.id===e}))}},{key:"count",get:function(){return this.ids.length}},{key:"rows",get:function(){var t=this;return this.ids.map((function(e){return t.byId(e)}))}}]),t}(),d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"byId",value:function(t){if(l(this.entries[t])&&this.entries[t].id===t)return this.context.instantiateObject(t,["id"])}},{key:"add",value:function(t){return this.context.addTableRow(this[c],t)}},{key:"remove",value:function(t){if(!l(this.entries[t])||this.entries[t].id!==t)throw new RangeError("There is no row with ID "+t+" in this table");this.context.deleteTableRow(this[c],t)}}]),e}(p);function h(t,e){var n=Object.create(p.prototype);return n[c]=t,n[s]=Object.freeze({}),n.entries=e||{},n}t.exports={Table:p,instantiateTable:h}},"./frontend/text.js":
/*!**************************!*\
  !*** ./frontend/text.js ***!
  \**************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}for(var i=n(/*! ./constants */"./frontend/constants.js"),a=i.OBJECT_ID,c=i.ELEM_IDS,s=i.MAX_ELEM,u=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e)return p(void 0,e.split("").map((function(t){return{value:t}})),void 0);if(Array.isArray(e))return p(void 0,e.map((function(t){return{value:t}})),void 0);if(void 0===e)return p(void 0,[],0);throw new TypeError("Unsupported initial value for Text: "+e)}return r(t,[{key:"get",value:function(t){return this.elems[t].value}},{key:"getElemId",value:function(t){return this.elems[t].elemId}},{key:Symbol.iterator,value:function(){var t=this.elems,e=-1;return{next:function(){return(e+=1)<t.length?{done:!1,value:t[e].value}:{done:!0}}}}},{key:"toString",value:function(){var t="",e=!0,n=!1,r=void 0;try{for(var o,i=this.elems[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;"string"==typeof a.value&&(t+=a.value)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}},{key:"toSpans",value:function(){var t=[],e="",n=!0,r=!1,o=void 0;try{for(var i,a=this.elems[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;"string"==typeof c.value?e+=c.value:(e.length>0&&(t.push(e),e=""),t.push(c.value))}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e.length>0&&t.push(e),t}},{key:"toJSON",value:function(){return this.toString()}},{key:"getWriteable",value:function(t){if(!this[a])throw new RangeError("getWriteable() requires the objectId to be set");var e=p(this[a],this.elems,this[s]);return e.context=t,e}},{key:"set",value:function(t,e){if(this.context)this.context.setListIndex(this[a],t,e);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems[t].value=e}return this}},{key:"insertAt",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.context)this.context.splice(this[a],t,0,n);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");var i;(i=this.elems).splice.apply(i,[t,0].concat(o(n.map((function(t){return{value:t}})))))}return this}},{key:"deleteAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.context)this.context.splice(this[a],t,e,[]);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,e)}return this}},{key:"length",get:function(){return this.elems.length}}]),t}(),l=function(t){u.prototype[t]=function(){for(var e,n=[].concat(o(this)),r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n[t]).call.apply(e,[n].concat(i))}},f=["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"],g=0;g<f.length;g++)l(f[g]);function p(t,e,n){var r=Object.create(u.prototype);return r[a]=t,r.elems=e,r[s]=n,r}t.exports={Text:u,getElemId:function(t,e){return t instanceof u?t.getElemId(e):t[c][e]},instantiateText:p}},"./node_modules/immutable/dist/immutable.js":
/*!**************************************************!*\
  !*** ./node_modules/immutable/dist/immutable.js ***!
  \**************************************************/
/*! no static exports found */function(t,e,n){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return a(t)?t:F(t)}function r(t){return c(t)?t:H(t)}function o(t){return s(t)?t:V(t)}function i(t){return a(t)&&!u(t)?t:$(t)}function a(t){return!(!t||!t[f])}function c(t){return!(!t||!t[g])}function s(t){return!(!t||!t[p])}function u(t){return c(t)||s(t)}function l(t){return!(!t||!t[d])}e(r,n),e(o,n),e(i,n),n.isIterable=a,n.isKeyed=c,n.isIndexed=s,n.isAssociative=u,n.isOrdered=l,n.Keyed=r,n.Indexed=o,n.Set=i;var f="@@__IMMUTABLE_ITERABLE__@@",g="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",d="@@__IMMUTABLE_ORDERED__@@",h={},m={value:!1},y={value:!1};function v(t){return t.value=!1,t}function b(t){t&&(t.value=!0)}function _(){}function w(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),o=0;o<n;o++)r[o]=t[o+e];return r}function x(t){return void 0===t.size&&(t.size=t.__iterate(E)),t.size}function S(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?x(t)+e:e}function E(){return!0}function k(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function A(t,e){return I(t,e,0)}function O(t,e){return I(t,e,e)}function I(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var T,j,C,M="function"==typeof Symbol&&Symbol.iterator,P=M||"@@iterator";function L(t){this.next=t}function R(t,e,n,r){var o=0===t?e:1===t?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function D(){return{value:void 0,done:!0}}function N(t){return!!q(t)}function U(t){return t&&"function"==typeof t.next}function z(t){var e=q(t);return e&&e.call(t)}function q(t){var e=t&&(M&&t[M]||t["@@iterator"]);if("function"==typeof e)return e}function B(t){return t&&"number"==typeof t.length}function F(t){return null==t?Z():a(t)?t.toSeq():function(t){var e=tt(t)||"object"==typeof t&&new K(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function H(t){return null==t?Z().toKeyedSeq():a(t)?c(t)?t.toSeq():t.fromEntrySeq():J(t)}function V(t){return null==t?Z():a(t)?c(t)?t.entrySeq():t.toIndexedSeq():Q(t)}function $(t){return(null==t?Z():a(t)?c(t)?t.entrySeq():t:Q(t)).toSetSeq()}function W(t){this._array=t,this.size=t.length}function K(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function G(t){this._iterable=t,this.size=t.length||t.size}function X(t){this._iterator=t,this._iteratorCache=[]}function Y(t){return!(!t||!t["@@__IMMUTABLE_SEQ__@@"])}function Z(){return T||(T=new W([]))}function J(t){var e=Array.isArray(t)?new W(t).fromEntrySeq():U(t)?new X(t).fromEntrySeq():N(t)?new G(t).fromEntrySeq():"object"==typeof t?new K(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function Q(t){var e=tt(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function tt(t){return B(t)?new W(t):U(t)?new X(t):N(t)?new G(t):void 0}function et(t,e,n,r){var o=t._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var c=o[n?i-a:a];if(!1===e(c[1],r?c[0]:a,t))return a+1}return a}return t.__iterateUncached(e,n)}function nt(t,e,n,r){var o=t._cache;if(o){var i=o.length-1,a=0;return new L((function(){var t=o[n?i-a:a];return a++>i?{value:void 0,done:!0}:R(e,r?t[0]:a-1,t[1])}))}return t.__iteratorUncached(e,n)}function rt(t,e){return e?function t(e,n,r,o){return Array.isArray(n)?e.call(o,r,V(n).map((function(r,o){return t(e,r,o,n)}))):it(n)?e.call(o,r,H(n).map((function(r,o){return t(e,r,o,n)}))):n}(e,t,"",{"":t}):ot(t)}function ot(t){return Array.isArray(t)?V(t).map(ot).toList():it(t)?H(t).map(ot).toMap():t}function it(t){return t&&(t.constructor===Object||void 0===t.constructor)}function at(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function ct(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||c(t)!==c(e)||s(t)!==s(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(l(t)){var r=t.entries();return e.every((function(t,e){var o=r.next().value;return o&&at(o[1],t)&&(n||at(o[0],e))}))&&r.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var f=!0,g=e.__iterate((function(e,r){if(n?!t.has(e):o?!at(e,t.get(r,h)):!at(t.get(r,h),e))return f=!1,!1}));return f&&t.size===g}function st(t,e){if(!(this instanceof st))return new st(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(j)return j;j=this}}function ut(t,e){if(!t)throw new Error(e)}function lt(t,e,n){if(!(this instanceof lt))return new lt(t,e,n);if(ut(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(C)return C;C=this}}function ft(){throw TypeError("Abstract")}function gt(){}function pt(){}function dt(){}L.prototype.toString=function(){return"[Iterator]"},L.KEYS=0,L.VALUES=1,L.ENTRIES=2,L.prototype.inspect=L.prototype.toSource=function(){return this.toString()},L.prototype[P]=function(){return this},e(F,n),F.of=function(){return F(arguments)},F.prototype.toSeq=function(){return this},F.prototype.toString=function(){return this.__toString("Seq {","}")},F.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},F.prototype.__iterate=function(t,e){return et(this,t,e,!0)},F.prototype.__iterator=function(t,e){return nt(this,t,e,!0)},e(H,F),H.prototype.toKeyedSeq=function(){return this},e(V,F),V.of=function(){return V(arguments)},V.prototype.toIndexedSeq=function(){return this},V.prototype.toString=function(){return this.__toString("Seq [","]")},V.prototype.__iterate=function(t,e){return et(this,t,e,!1)},V.prototype.__iterator=function(t,e){return nt(this,t,e,!1)},e($,F),$.of=function(){return $(arguments)},$.prototype.toSetSeq=function(){return this},F.isSeq=Y,F.Keyed=H,F.Set=$,F.Indexed=V,F.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,e(W,V),W.prototype.get=function(t,e){return this.has(t)?this._array[S(this,t)]:e},W.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(!1===t(n[e?r-o:o],o,this))return o+1;return o},W.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,o=0;return new L((function(){return o>r?{value:void 0,done:!0}:R(t,o,n[e?r-o++:o++])}))},e(K,H),K.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},K.prototype.has=function(t){return this._object.hasOwnProperty(t)},K.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,o=r.length-1,i=0;i<=o;i++){var a=r[e?o-i:i];if(!1===t(n[a],a,this))return i+1}return i},K.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,o=r.length-1,i=0;return new L((function(){var a=r[e?o-i:i];return i++>o?{value:void 0,done:!0}:R(t,a,n[a])}))},K.prototype[d]=!0,e(G,V),G.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=z(this._iterable),r=0;if(U(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},G.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=z(this._iterable);if(!U(n))return new L(D);var r=0;return new L((function(){var e=n.next();return e.done?e:R(t,r++,e.value)}))},e(X,V),X.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===t(o[i],i++,this))return i;for(;!(n=r.next()).done;){var a=n.value;if(o[i]=a,!1===t(a,i++,this))break}return i},X.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,o=0;return new L((function(){if(o>=r.length){var e=n.next();if(e.done)return e;r[o]=e.value}return R(t,o,r[o++])}))},e(st,V),st.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},st.prototype.get=function(t,e){return this.has(t)?this._value:e},st.prototype.includes=function(t){return at(this._value,t)},st.prototype.slice=function(t,e){var n=this.size;return k(t,e,n)?this:new st(this._value,O(e,n)-A(t,n))},st.prototype.reverse=function(){return this},st.prototype.indexOf=function(t){return at(this._value,t)?0:-1},st.prototype.lastIndexOf=function(t){return at(this._value,t)?this.size:-1},st.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},st.prototype.__iterator=function(t,e){var n=this,r=0;return new L((function(){return r<n.size?R(t,r++,n._value):{value:void 0,done:!0}}))},st.prototype.equals=function(t){return t instanceof st?at(this._value,t._value):ct(t)},e(lt,V),lt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},lt.prototype.get=function(t,e){return this.has(t)?this._start+S(this,t)*this._step:e},lt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},lt.prototype.slice=function(t,e){return k(t,e,this.size)?this:(t=A(t,this.size),(e=O(e,this.size))<=t?new lt(0,0):new lt(this.get(t,this._end),this.get(e,this._end),this._step))},lt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},lt.prototype.lastIndexOf=function(t){return this.indexOf(t)},lt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,o=e?this._start+n*r:this._start,i=0;i<=n;i++){if(!1===t(o,i,this))return i+1;o+=e?-r:r}return i},lt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,o=e?this._start+n*r:this._start,i=0;return new L((function(){var a=o;return o+=e?-r:r,i>n?{value:void 0,done:!0}:R(t,i++,a)}))},lt.prototype.equals=function(t){return t instanceof lt?this._start===t._start&&this._end===t._end&&this._step===t._step:ct(this,t)},e(ft,n),e(gt,ft),e(pt,ft),e(dt,ft),ft.Keyed=gt,ft.Indexed=pt,ft.Set=dt;var ht="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function mt(t){return t>>>1&1073741824|3221225471&t}function yt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return mt(n)}if("string"===e)return t.length>kt?function(t){var e=It[t];return void 0===e&&(e=vt(t),Ot===At&&(Ot=0,It={}),Ot++,It[t]=e),e}(t):vt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(xt&&void 0!==(e=bt.get(t)))return e;if(void 0!==(e=t[Et]))return e;if(!wt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Et]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++St,1073741824&St&&(St=0),xt)bt.set(t,e);else{if(void 0!==_t&&!1===_t(t))throw new Error("Non-extensible objects are not allowed as keys.");if(wt)Object.defineProperty(t,Et,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Et]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Et]=e}}return e}(t);if("function"==typeof t.toString)return vt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function vt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return mt(e)}var bt,_t=Object.isExtensible,wt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),xt="function"==typeof WeakMap;xt&&(bt=new WeakMap);var St=0,Et="__immutablehash__";"function"==typeof Symbol&&(Et=Symbol(Et));var kt=16,At=255,Ot=0,It={};function Tt(t){ut(t!==1/0,"Cannot perform this action with an infinite size.")}function jt(t){return null==t?Vt():Ct(t)&&!l(t)?t:Vt().withMutations((function(e){var n=r(t);Tt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Ct(t){return!(!t||!t[Pt])}e(jt,gt),jt.of=function(){var e=t.call(arguments,0);return Vt().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},jt.prototype.toString=function(){return this.__toString("Map {","}")},jt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},jt.prototype.set=function(t,e){return $t(this,t,e)},jt.prototype.setIn=function(t,e){return this.updateIn(t,h,(function(){return e}))},jt.prototype.remove=function(t){return $t(this,t,h)},jt.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return h}))},jt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},jt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=function t(e,n,r,o){var i=e===h,a=n.next();if(a.done){var c=i?r:e,s=o(c);return s===c?e:s}ut(i||e&&e.set,"invalid keyPath");var u=a.value,l=i?h:e.get(u,h),f=t(l,n,r,o);return f===l?e:f===h?e.remove(u):(i?Vt():e).set(u,f)}(this,Xe(t),e,n);return r===h?void 0:r},jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Vt()},jt.prototype.merge=function(){return Xt(this,void 0,arguments)},jt.prototype.mergeWith=function(e){var n=t.call(arguments,1);return Xt(this,e,n)},jt.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Vt(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},jt.prototype.mergeDeep=function(){return Xt(this,Yt,arguments)},jt.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Xt(this,Zt(e),n)},jt.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Vt(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},jt.prototype.sort=function(t){return we(Ue(this,t))},jt.prototype.sortBy=function(t,e){return we(Ue(this,e,t))},jt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},jt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new _)},jt.prototype.asImmutable=function(){return this.__ensureOwner()},jt.prototype.wasAltered=function(){return this.__altered},jt.prototype.__iterator=function(t,e){return new qt(this,t,e)},jt.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},jt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ht(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},jt.isMap=Ct;var Mt,Pt="@@__IMMUTABLE_MAP__@@",Lt=jt.prototype;function Rt(t,e){this.ownerID=t,this.entries=e}function Dt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Nt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Ut(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function zt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function qt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Ft(t._root)}function Bt(t,e){return R(t,e[0],e[1])}function Ft(t,e){return{node:t,index:0,__prev:e}}function Ht(t,e,n,r){var o=Object.create(Lt);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Vt(){return Mt||(Mt=Ht(0))}function $t(t,e,n){var r,o;if(t._root){var i=v(m),a=v(y);if(r=Wt(t._root,t.__ownerID,0,void 0,e,n,i,a),!a.value)return t;o=t.size+(i.value?n===h?-1:1:0)}else{if(n===h)return t;o=1,r=new Rt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Ht(o,r):Vt()}function Wt(t,e,n,r,o,i,a,c){return t?t.update(e,n,r,o,i,a,c):i===h?t:(b(c),b(a),new zt(e,r,[o,i]))}function Kt(t){return t.constructor===zt||t.constructor===Ut}function Gt(t,e,n,r,o){if(t.keyHash===r)return new Ut(e,r,[t.entry,o]);var i,a=31&(0===n?t.keyHash:t.keyHash>>>n),c=31&(0===n?r:r>>>n);return new Dt(e,1<<a|1<<c,a===c?[Gt(t,e,n+5,r,o)]:(i=new zt(e,r,o),a<c?[t,i]:[i,t]))}function Xt(t,e,n){for(var o=[],i=0;i<n.length;i++){var c=n[i],s=r(c);a(c)||(s=s.map((function(t){return rt(t)}))),o.push(s)}return Jt(t,e,o)}function Yt(t,e,n){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):at(t,e)?t:e}function Zt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&a(n))return e.mergeDeepWith(t,n);var o=t(e,n,r);return at(e,o)?e:o}}function Jt(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var r=e?function(n,r){t.update(r,h,(function(t){return t===h?n:e(t,n,r)}))}:function(e,n){t.set(n,e)},o=0;o<n.length;o++)n[o].forEach(r)})):t.constructor(n[0])}function Qt(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function te(t,e,n,r){var o=r?t:w(t);return o[e]=n,o}Lt[Pt]=!0,Lt.delete=Lt.remove,Lt.removeIn=Lt.deleteIn,Rt.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(at(n,o[i][0]))return o[i][1];return r},Rt.prototype.update=function(t,e,n,r,o,i,a){for(var c=o===h,s=this.entries,u=0,l=s.length;u<l&&!at(r,s[u][0]);u++);var f=u<l;if(f?s[u][1]===o:c)return this;if(b(a),(c||!f)&&b(i),!c||1!==s.length){if(!f&&!c&&s.length>=ee)return function(t,e,n,r){t||(t=new _);for(var o=new zt(t,yt(n),[n,r]),i=0;i<e.length;i++){var a=e[i];o=o.update(t,0,void 0,a[0],a[1])}return o}(t,s,r,o);var g=t&&t===this.ownerID,p=g?s:w(s);return f?c?u===l-1?p.pop():p[u]=p.pop():p[u]=[r,o]:p.push([r,o]),g?(this.entries=p,this):new Rt(t,p)}},Dt.prototype.get=function(t,e,n,r){void 0===e&&(e=yt(n));var o=1<<(31&(0===t?e:e>>>t)),i=this.bitmap;return 0==(i&o)?r:this.nodes[Qt(i&o-1)].get(t+5,e,n,r)},Dt.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=yt(r));var c=31&(0===e?n:n>>>e),s=1<<c,u=this.bitmap,l=0!=(u&s);if(!l&&o===h)return this;var f=Qt(u&s-1),g=this.nodes,p=l?g[f]:void 0,d=Wt(p,t,e+5,n,r,o,i,a);if(d===p)return this;if(!l&&d&&g.length>=ne)return function(t,e,n,r,o){for(var i=0,a=new Array(32),c=0;0!==n;c++,n>>>=1)a[c]=1&n?e[i++]:void 0;return a[r]=o,new Nt(t,i+1,a)}(t,g,u,c,d);if(l&&!d&&2===g.length&&Kt(g[1^f]))return g[1^f];if(l&&d&&1===g.length&&Kt(d))return d;var m=t&&t===this.ownerID,y=l?d?u:u^s:u|s,v=l?d?te(g,f,d,m):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var o=new Array(r),i=0,a=0;a<r;a++)a===e&&(i=1),o[a]=t[a+i];return o}(g,f,m):function(t,e,n,r){var o=t.length+1;if(r&&e+1===o)return t[e]=n,t;for(var i=new Array(o),a=0,c=0;c<o;c++)c===e?(i[c]=n,a=-1):i[c]=t[c+a];return i}(g,f,d,m);return m?(this.bitmap=y,this.nodes=v,this):new Dt(t,y,v)},Nt.prototype.get=function(t,e,n,r){void 0===e&&(e=yt(n));var o=31&(0===t?e:e>>>t),i=this.nodes[o];return i?i.get(t+5,e,n,r):r},Nt.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=yt(r));var c=31&(0===e?n:n>>>e),s=o===h,u=this.nodes,l=u[c];if(s&&!l)return this;var f=Wt(l,t,e+5,n,r,o,i,a);if(f===l)return this;var g=this.count;if(l){if(!f&&--g<re)return function(t,e,n,r){for(var o=0,i=0,a=new Array(n),c=0,s=1,u=e.length;c<u;c++,s<<=1){var l=e[c];void 0!==l&&c!==r&&(o|=s,a[i++]=l)}return new Dt(t,o,a)}(t,u,g,c)}else g++;var p=t&&t===this.ownerID,d=te(u,c,f,p);return p?(this.count=g,this.nodes=d,this):new Nt(t,g,d)},Ut.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(at(n,o[i][0]))return o[i][1];return r},Ut.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=yt(r));var c=o===h;if(n!==this.keyHash)return c?this:(b(a),b(i),Gt(this,t,e,n,[r,o]));for(var s=this.entries,u=0,l=s.length;u<l&&!at(r,s[u][0]);u++);var f=u<l;if(f?s[u][1]===o:c)return this;if(b(a),(c||!f)&&b(i),c&&2===l)return new zt(t,this.keyHash,s[1^u]);var g=t&&t===this.ownerID,p=g?s:w(s);return f?c?u===l-1?p.pop():p[u]=p.pop():p[u]=[r,o]:p.push([r,o]),g?(this.entries=p,this):new Ut(t,this.keyHash,p)},zt.prototype.get=function(t,e,n,r){return at(n,this.entry[0])?this.entry[1]:r},zt.prototype.update=function(t,e,n,r,o,i,a){var c=o===h,s=at(r,this.entry[0]);return(s?o===this.entry[1]:c)?this:(b(a),c?void b(i):s?t&&t===this.ownerID?(this.entry[1]=o,this):new zt(t,this.keyHash,[r,o]):(b(i),Gt(this,t,e,yt(r),[r,o])))},Rt.prototype.iterate=Ut.prototype.iterate=function(t,e){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===t(n[e?o-r:r]))return!1},Dt.prototype.iterate=Nt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[e?o-r:r];if(i&&!1===i.iterate(t,e))return!1}},zt.prototype.iterate=function(t,e){return t(this.entry)},e(qt,L),qt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,o=e.index++;if(r.entry){if(0===o)return Bt(t,r.entry)}else if(r.entries){if(o<=(n=r.entries.length-1))return Bt(t,r.entries[this._reverse?n-o:o])}else if(o<=(n=r.nodes.length-1)){var i=r.nodes[this._reverse?n-o:o];if(i){if(i.entry)return Bt(t,i.entry);e=this._stack=Ft(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ee=8,ne=16,re=8;function oe(t){var e=de();if(null==t)return e;if(ie(t))return t;var n=o(t),r=n.size;return 0===r?e:(Tt(r),r>0&&r<32?pe(0,r,5,null,new se(n.toArray())):e.withMutations((function(t){t.setSize(r),n.forEach((function(e,n){return t.set(n,e)}))})))}function ie(t){return!(!t||!t[ae])}e(oe,pt),oe.of=function(){return this(arguments)},oe.prototype.toString=function(){return this.__toString("List [","]")},oe.prototype.get=function(t,e){if((t=S(this,t))>=0&&t<this.size){var n=ye(this,t+=this._origin);return n&&n.array[31&t]}return e},oe.prototype.set=function(t,e){return function(t,e,n){if((e=S(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ve(t,e).set(0,n):ve(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,o=t._root,i=v(y);return e>=_e(t._capacity)?r=he(r,t.__ownerID,0,e,n,i):o=he(o,t.__ownerID,t._level,e,n,i),i.value?t.__ownerID?(t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t):pe(t._origin,t._capacity,t._level,o,r):t}(this,t,e)},oe.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},oe.prototype.insert=function(t,e){return this.splice(t,0,e)},oe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):de()},oe.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){ve(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},oe.prototype.pop=function(){return ve(this,0,-1)},oe.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ve(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},oe.prototype.shift=function(){return ve(this,1)},oe.prototype.merge=function(){return be(this,void 0,arguments)},oe.prototype.mergeWith=function(e){var n=t.call(arguments,1);return be(this,e,n)},oe.prototype.mergeDeep=function(){return be(this,Yt,arguments)},oe.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return be(this,Zt(e),n)},oe.prototype.setSize=function(t){return ve(this,0,t)},oe.prototype.slice=function(t,e){var n=this.size;return k(t,e,n)?this:ve(this,A(t,n),O(e,n))},oe.prototype.__iterator=function(t,e){var n=0,r=ge(this,e);return new L((function(){var e=r();return e===fe?{value:void 0,done:!0}:R(t,n++,e)}))},oe.prototype.__iterate=function(t,e){for(var n,r=0,o=ge(this,e);(n=o())!==fe&&!1!==t(n,r++,this););return r},oe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?pe(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},oe.isList=ie;var ae="@@__IMMUTABLE_LIST__@@",ce=oe.prototype;function se(t,e){this.array=t,this.ownerID=e}ce[ae]=!0,ce.delete=ce.remove,ce.setIn=Lt.setIn,ce.deleteIn=ce.removeIn=Lt.removeIn,ce.update=Lt.update,ce.updateIn=Lt.updateIn,ce.mergeIn=Lt.mergeIn,ce.mergeDeepIn=Lt.mergeDeepIn,ce.withMutations=Lt.withMutations,ce.asMutable=Lt.asMutable,ce.asImmutable=Lt.asImmutable,ce.wasAltered=Lt.wasAltered,se.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&31;if(r>=this.array.length)return new se([],t);var o,i=0===r;if(e>0){var a=this.array[r];if((o=a&&a.removeBefore(t,e-5,n))===a&&i)return this}if(i&&!o)return this;var c=me(this,t);if(!i)for(var s=0;s<r;s++)c.array[s]=void 0;return o&&(c.array[r]=o),c},se.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,o=n-1>>>e&31;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((r=i&&i.removeAfter(t,e-5,n))===i&&o===this.array.length-1)return this}var a=me(this,t);return a.array.splice(o+1),r&&(a.array[o]=r),a};var ue,le,fe={};function ge(t,e){var n=t._origin,r=t._capacity,o=_e(r),i=t._tail;return a(t._root,t._level,0);function a(t,c,s){return 0===c?function(t,a){var c=a===o?i&&i.array:t&&t.array,s=a>n?0:n-a,u=r-a;return u>32&&(u=32),function(){if(s===u)return fe;var t=e?--u:s++;return c&&c[t]}}(t,s):function(t,o,i){var c,s=t&&t.array,u=i>n?0:n-i>>o,l=1+(r-i>>o);return l>32&&(l=32),function(){for(;;){if(c){var t=c();if(t!==fe)return t;c=null}if(u===l)return fe;var n=e?--l:u++;c=a(s&&s[n],o-5,i+(n<<o))}}}(t,c,s)}}function pe(t,e,n,r,o,i,a){var c=Object.create(ce);return c.size=e-t,c._origin=t,c._capacity=e,c._level=n,c._root=r,c._tail=o,c.__ownerID=i,c.__hash=a,c.__altered=!1,c}function de(){return ue||(ue=pe(0,0,5))}function he(t,e,n,r,o,i){var a,c=r>>>n&31,s=t&&c<t.array.length;if(!s&&void 0===o)return t;if(n>0){var u=t&&t.array[c],l=he(u,e,n-5,r,o,i);return l===u?t:((a=me(t,e)).array[c]=l,a)}return s&&t.array[c]===o?t:(b(i),a=me(t,e),void 0===o&&c===a.array.length-1?a.array.pop():a.array[c]=o,a)}function me(t,e){return e&&t&&e===t.ownerID?t:new se(t?t.array.slice():[],e)}function ye(t,e){if(e>=_e(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&31],r-=5;return n}}function ve(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new _,o=t._origin,i=t._capacity,a=o+e,c=void 0===n?i:n<0?i+n:o+n;if(a===o&&c===i)return t;if(a>=c)return t.clear();for(var s=t._level,u=t._root,l=0;a+l<0;)u=new se(u&&u.array.length?[void 0,u]:[],r),l+=1<<(s+=5);l&&(a+=l,o+=l,c+=l,i+=l);for(var f=_e(i),g=_e(c);g>=1<<s+5;)u=new se(u&&u.array.length?[u]:[],r),s+=5;var p=t._tail,d=g<f?ye(t,c-1):g>f?new se([],r):p;if(p&&g>f&&a<i&&p.array.length){for(var h=u=me(u,r),m=s;m>5;m-=5){var y=f>>>m&31;h=h.array[y]=me(h.array[y],r)}h.array[f>>>5&31]=p}if(c<i&&(d=d&&d.removeAfter(r,0,c)),a>=g)a-=g,c-=g,s=5,u=null,d=d&&d.removeBefore(r,0,a);else if(a>o||g<f){for(l=0;u;){var v=a>>>s&31;if(v!==g>>>s&31)break;v&&(l+=(1<<s)*v),s-=5,u=u.array[v]}u&&a>o&&(u=u.removeBefore(r,s,a-l)),u&&g<f&&(u=u.removeAfter(r,s,g-l)),l&&(a-=l,c-=l)}return t.__ownerID?(t.size=c-a,t._origin=a,t._capacity=c,t._level=s,t._root=u,t._tail=d,t.__hash=void 0,t.__altered=!0,t):pe(a,c,s,u,d)}function be(t,e,n){for(var r=[],i=0,c=0;c<n.length;c++){var s=n[c],u=o(s);u.size>i&&(i=u.size),a(s)||(u=u.map((function(t){return rt(t)}))),r.push(u)}return i>t.size&&(t=t.setSize(i)),Jt(t,e,r)}function _e(t){return t<32?0:t-1>>>5<<5}function we(t){return null==t?Ee():xe(t)?t:Ee().withMutations((function(e){var n=r(t);Tt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function xe(t){return Ct(t)&&l(t)}function Se(t,e,n,r){var o=Object.create(we.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=n,o.__hash=r,o}function Ee(){return le||(le=Se(Vt(),de()))}function ke(t,e,n){var r,o,i=t._map,a=t._list,c=i.get(e),s=void 0!==c;if(n===h){if(!s)return t;a.size>=32&&a.size>=2*i.size?(r=(o=a.filter((function(t,e){return void 0!==t&&c!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=o.__ownerID=t.__ownerID)):(r=i.remove(e),o=c===a.size-1?a.pop():a.set(c,void 0))}else if(s){if(n===a.get(c)[1])return t;r=i,o=a.set(c,[e,n])}else r=i.set(e,a.size),o=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=o,t.__hash=void 0,t):Se(r,o)}function Ae(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Oe(t){this._iter=t,this.size=t.size}function Ie(t){this._iter=t,this.size=t.size}function Te(t){this._iter=t,this.size=t.size}function je(t){var e=We(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ke,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new L((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,n)},e}function Ce(t,e,n){var r=We(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,o){var i=t.get(r,h);return i===h?o:e.call(n,i,r,t)},r.__iterateUncached=function(r,o){var i=this;return t.__iterate((function(t,o,a){return!1!==r(e.call(n,t,o,a),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=t.__iterator(2,o);return new L((function(){var o=i.next();if(o.done)return o;var a=o.value,c=a[0];return R(r,c,e.call(n,a[1],c,t),o)}))},r}function Me(t,e){var n=We(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=je(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Ke,n.__iterate=function(e,n){var r=this;return t.__iterate((function(t,n){return e(t,n,r)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function Pe(t,e,n,r){var o=We(t);return r&&(o.has=function(r){var o=t.get(r,h);return o!==h&&!!e.call(n,o,r,t)},o.get=function(r,o){var i=t.get(r,h);return i!==h&&e.call(n,i,r,t)?i:o}),o.__iterateUncached=function(o,i){var a=this,c=0;return t.__iterate((function(t,i,s){if(e.call(n,t,i,s))return c++,o(t,r?i:c-1,a)}),i),c},o.__iteratorUncached=function(o,i){var a=t.__iterator(2,i),c=0;return new L((function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value,u=s[0],l=s[1];if(e.call(n,l,u,t))return R(o,r?u:c++,l,i)}}))},o}function Le(t,e,n,r){var o=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=o:n|=0),k(e,n,o))return t;var i=A(e,o),a=O(n,o);if(i!=i||a!=a)return Le(t.toSeq().cacheResult(),e,n,r);var c,s=a-i;s==s&&(c=s<0?0:s);var u=We(t);return u.size=0===c?c:t.size&&c||void 0,!r&&Y(t)&&c>=0&&(u.get=function(e,n){return(e=S(this,e))>=0&&e<c?t.get(e+i,n):n}),u.__iterateUncached=function(e,n){var o=this;if(0===c)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,s=!0,u=0;return t.__iterate((function(t,n){if(!s||!(s=a++<i))return u++,!1!==e(t,r?n:u-1,o)&&u!==c})),u},u.__iteratorUncached=function(e,n){if(0!==c&&n)return this.cacheResult().__iterator(e,n);var o=0!==c&&t.__iterator(e,n),a=0,s=0;return new L((function(){for(;a++<i;)o.next();if(++s>c)return{value:void 0,done:!0};var t=o.next();return r||1===e?t:R(e,s-1,0===e?void 0:t.value[1],t)}))},u}function Re(t,e,n,r){var o=We(t);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var c=!0,s=0;return t.__iterate((function(t,i,u){if(!c||!(c=e.call(n,t,i,u)))return s++,o(t,r?i:s-1,a)})),s},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var c=t.__iterator(2,i),s=!0,u=0;return new L((function(){var t,i,l;do{if((t=c.next()).done)return r||1===o?t:R(o,u++,0===o?void 0:t.value[1],t);var f=t.value;i=f[0],l=f[1],s&&(s=e.call(n,l,i,a))}while(s);return 2===o?t:R(o,i,l,t)}))},o}function De(t,e){var n=c(t),o=[t].concat(e).map((function(t){return a(t)?n&&(t=r(t)):t=n?J(t):Q(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===o.length)return t;if(1===o.length){var i=o[0];if(i===t||n&&c(i)||s(t)&&s(i))return i}var u=new W(o);return n?u=u.toKeyedSeq():s(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=o.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),u}function Ne(t,e,n){var r=We(t);return r.__iterateUncached=function(r,o){var i=0,c=!1;return function t(s,u){var l=this;s.__iterate((function(o,s){return(!e||u<e)&&a(o)?t(o,u+1):!1===r(o,n?s:i++,l)&&(c=!0),!c}),o)}(t,0),i},r.__iteratorUncached=function(r,o){var i=t.__iterator(r,o),c=[],s=0;return new L((function(){for(;i;){var t=i.next();if(!1===t.done){var u=t.value;if(2===r&&(u=u[1]),e&&!(c.length<e)||!a(u))return n?t:R(r,s++,u,t);c.push(i),i=u.__iterator(r,o)}else i=c.pop()}return{value:void 0,done:!0}}))},r}function Ue(t,e,n){e||(e=Ge);var r=c(t),o=0,i=t.toSeq().map((function(e,r){return[r,e,o++,n?n(e,r,t):e]})).toArray();return i.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),r?H(i):s(t)?V(i):$(i)}function ze(t,e,n){if(e||(e=Ge),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return qe(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return qe(e,t,n)?n:t}))}function qe(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function Be(t,e,r){var o=We(t);return o.size=new W(r).map((function(t){return t.size})).min(),o.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),o=0;!(n=r.next()).done&&!1!==t(n.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=r.map((function(t){return t=n(t),z(o?t.reverse():t)})),a=0,c=!1;return new L((function(){var n;return c||(n=i.map((function(t){return t.next()})),c=n.some((function(t){return t.done}))),c?{value:void 0,done:!0}:R(t,a++,e.apply(null,n.map((function(t){return t.value}))))}))},o}function Fe(t,e){return Y(t)?e:t.constructor(e)}function He(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ve(t){return Tt(t.size),x(t)}function $e(t){return c(t)?r:s(t)?o:i}function We(t){return Object.create((c(t)?H:s(t)?V:$).prototype)}function Ke(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):F.prototype.cacheResult.call(this)}function Ge(t,e){return t>e?1:t<e?-1:0}function Xe(t){var e=z(t);if(!e){if(!B(t))throw new TypeError("Expected iterable or array-like: "+t);e=z(n(t))}return e}function Ye(t,e){var n,r=function(i){if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var a=Object.keys(t);!function(t,e){try{e.forEach(tn.bind(void 0,t))}catch(t){}}(o,a),o.size=a.length,o._name=e,o._keys=a,o._defaultValues=t}this._map=jt(i)},o=r.prototype=Object.create(Ze);return o.constructor=r,r}e(we,jt),we.of=function(){return this(arguments)},we.prototype.toString=function(){return this.__toString("OrderedMap {","}")},we.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},we.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ee()},we.prototype.set=function(t,e){return ke(this,t,e)},we.prototype.remove=function(t){return ke(this,t,h)},we.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},we.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},we.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},we.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Se(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},we.isOrderedMap=xe,we.prototype[d]=!0,we.prototype.delete=we.prototype.remove,e(Ae,H),Ae.prototype.get=function(t,e){return this._iter.get(t,e)},Ae.prototype.has=function(t){return this._iter.has(t)},Ae.prototype.valueSeq=function(){return this._iter.valueSeq()},Ae.prototype.reverse=function(){var t=this,e=Me(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Ae.prototype.map=function(t,e){var n=this,r=Ce(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},Ae.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Ve(this):0,function(o){return t(o,e?--n:n++,r)}),e)},Ae.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(1,e),r=e?Ve(this):0;return new L((function(){var o=n.next();return o.done?o:R(t,e?--r:r++,o.value,o)}))},Ae.prototype[d]=!0,e(Oe,V),Oe.prototype.includes=function(t){return this._iter.includes(t)},Oe.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate((function(e){return t(e,r++,n)}),e)},Oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e),r=0;return new L((function(){var e=n.next();return e.done?e:R(t,r++,e.value,e)}))},e(Ie,$),Ie.prototype.has=function(t){return this._iter.includes(t)},Ie.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},Ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new L((function(){var e=n.next();return e.done?e:R(t,e.value,e.value,e)}))},e(Te,H),Te.prototype.entrySeq=function(){return this._iter.toSeq()},Te.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){He(e);var r=a(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},Te.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new L((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){He(r);var o=a(r);return R(t,o?r.get(0):r[0],o?r.get(1):r[1],e)}}}))},Oe.prototype.cacheResult=Ae.prototype.cacheResult=Ie.prototype.cacheResult=Te.prototype.cacheResult=Ke,e(Ye,gt),Ye.prototype.toString=function(){return this.__toString(Qe(this)+" {","}")},Ye.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Ye.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Ye.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Je(this,Vt()))},Ye.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Qe(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Je(this,n)},Ye.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Je(this,e)},Ye.prototype.wasAltered=function(){return this._map.wasAltered()},Ye.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},Ye.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},Ye.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Je(this,e,t):(this.__ownerID=t,this._map=e,this)};var Ze=Ye.prototype;function Je(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Qe(t){return t._name||t.constructor.name||"Record"}function tn(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){ut(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function en(t){return null==t?un():nn(t)&&!l(t)?t:un().withMutations((function(e){var n=i(t);Tt(n.size),n.forEach((function(t){return e.add(t)}))}))}function nn(t){return!(!t||!t[on])}Ze.delete=Ze.remove,Ze.deleteIn=Ze.removeIn=Lt.removeIn,Ze.merge=Lt.merge,Ze.mergeWith=Lt.mergeWith,Ze.mergeIn=Lt.mergeIn,Ze.mergeDeep=Lt.mergeDeep,Ze.mergeDeepWith=Lt.mergeDeepWith,Ze.mergeDeepIn=Lt.mergeDeepIn,Ze.setIn=Lt.setIn,Ze.update=Lt.update,Ze.updateIn=Lt.updateIn,Ze.withMutations=Lt.withMutations,Ze.asMutable=Lt.asMutable,Ze.asImmutable=Lt.asImmutable,e(en,dt),en.of=function(){return this(arguments)},en.fromKeys=function(t){return this(r(t).keySeq())},en.prototype.toString=function(){return this.__toString("Set {","}")},en.prototype.has=function(t){return this._map.has(t)},en.prototype.add=function(t){return cn(this,this._map.set(t,!0))},en.prototype.remove=function(t){return cn(this,this._map.remove(t))},en.prototype.clear=function(){return cn(this,this._map.clear())},en.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},en.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},en.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},en.prototype.merge=function(){return this.union.apply(this,arguments)},en.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},en.prototype.sort=function(t){return ln(Ue(this,t))},en.prototype.sortBy=function(t,e){return ln(Ue(this,e,t))},en.prototype.wasAltered=function(){return this._map.wasAltered()},en.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,r){return t(r,r,n)}),e)},en.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},en.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},en.isSet=nn;var rn,on="@@__IMMUTABLE_SET__@@",an=en.prototype;function cn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function sn(t,e){var n=Object.create(an);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function un(){return rn||(rn=sn(Vt()))}function ln(t){return null==t?hn():fn(t)?t:hn().withMutations((function(e){var n=i(t);Tt(n.size),n.forEach((function(t){return e.add(t)}))}))}function fn(t){return nn(t)&&l(t)}an[on]=!0,an.delete=an.remove,an.mergeDeep=an.merge,an.mergeDeepWith=an.mergeWith,an.withMutations=Lt.withMutations,an.asMutable=Lt.asMutable,an.asImmutable=Lt.asImmutable,an.__empty=un,an.__make=sn,e(ln,en),ln.of=function(){return this(arguments)},ln.fromKeys=function(t){return this(r(t).keySeq())},ln.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ln.isOrderedSet=fn;var gn,pn=ln.prototype;function dn(t,e){var n=Object.create(pn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function hn(){return gn||(gn=dn(Ee()))}function mn(t){return null==t?xn():yn(t)?t:xn().unshiftAll(t)}function yn(t){return!(!t||!t[bn])}pn[d]=!0,pn.__empty=hn,pn.__make=dn,e(mn,pt),mn.of=function(){return this(arguments)},mn.prototype.toString=function(){return this.__toString("Stack [","]")},mn.prototype.get=function(t,e){var n=this._head;for(t=S(this,t);n&&t--;)n=n.next;return n?n.value:e},mn.prototype.peek=function(){return this._head&&this._head.value},mn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):wn(t,e)},mn.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;Tt(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):wn(e,n)},mn.prototype.pop=function(){return this.slice(1)},mn.prototype.unshift=function(){return this.push.apply(this,arguments)},mn.prototype.unshiftAll=function(t){return this.pushAll(t)},mn.prototype.shift=function(){return this.pop.apply(this,arguments)},mn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):xn()},mn.prototype.slice=function(t,e){if(k(t,e,this.size))return this;var n=A(t,this.size);if(O(e,this.size)!==this.size)return pt.prototype.slice.call(this,t,e);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):wn(r,o)},mn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},mn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},mn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new L((function(){if(r){var e=r.value;return r=r.next,R(t,n++,e)}return{value:void 0,done:!0}}))},mn.isStack=yn;var vn,bn="@@__IMMUTABLE_STACK__@@",_n=mn.prototype;function wn(t,e,n,r){var o=Object.create(_n);return o.size=t,o._head=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function xn(){return vn||(vn=wn(0))}function Sn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}_n[bn]=!0,_n.withMutations=Lt.withMutations,_n.asMutable=Lt.asMutable,_n.asImmutable=Lt.asImmutable,_n.wasAltered=Lt.wasAltered,n.Iterator=L,Sn(n,{toArray:function(){Tt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new Oe(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Ae(this,!0)},toMap:function(){return jt(this.toKeyedSeq())},toObject:function(){Tt(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return we(this.toKeyedSeq())},toOrderedSet:function(){return ln(c(this)?this.valueSeq():this)},toSet:function(){return en(c(this)?this.valueSeq():this)},toSetSeq:function(){return new Ie(this)},toSeq:function(){return s(this)?this.toIndexedSeq():c(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return mn(c(this)?this.valueSeq():this)},toList:function(){return oe(c(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return Fe(this,De(this,e))},includes:function(t){return this.some((function(e){return at(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Tt(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!t.call(e,r,o,i))return n=!1,!1})),n},filter:function(t,e){return Fe(this,Pe(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Tt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Tt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Fe(this,Ce(this,t,e))},reduce:function(t,e,n){var r,o;return Tt(this.size),arguments.length<2?o=!0:r=e,this.__iterate((function(e,i,a){o?(o=!1,r=e):r=t.call(n,r,e,i,a)})),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Fe(this,Me(this,!0))},slice:function(t,e){return Fe(this,Le(this,t,e,!0))},some:function(t,e){return!this.every(In(t),e)},sort:function(t){return Fe(this,Ue(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return x(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=jt().asMutable();return t.__iterate((function(o,i){r.update(e.call(n,o,i,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return ct(this,t)},entrySeq:function(){var t=this;if(t._cache)return new W(t._cache);var e=t.toSeq().map(On).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(In(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,o,i){if(t.call(e,n,o,i))return r=[o,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(E)},flatMap:function(t,e){return Fe(this,function(t,e,n){var r=$e(t);return t.toSeq().map((function(o,i){return r(e.call(n,o,i,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Fe(this,Ne(this,t,!0))},fromEntrySeq:function(){return new Te(this)},get:function(t,e){return this.find((function(e,n){return at(n,t)}),void 0,e)},getIn:function(t,e){for(var n,r=this,o=Xe(t);!(n=o.next()).done;){var i=n.value;if((r=r&&r.get?r.get(i,h):h)===h)return e}return r},groupBy:function(t,e){return function(t,e,n){var r=c(t),o=(l(t)?we():jt()).asMutable();t.__iterate((function(i,a){o.update(e.call(n,i,a,t),(function(t){return(t=t||[]).push(r?[a,i]:i),t}))}));var i=$e(t);return o.map((function(e){return Fe(t,i(e))}))}(this,t,e)},has:function(t){return this.get(t,h)!==h},hasIn:function(t){return this.getIn(t,h)!==h},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return at(e,t)}))},keySeq:function(){return this.toSeq().map(An).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ze(this,t)},maxBy:function(t,e){return ze(this,e,t)},min:function(t){return ze(this,t?Tn(t):Mn)},minBy:function(t,e){return ze(this,e?Tn(e):Mn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Fe(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Fe(this,Re(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(In(t),e)},sortBy:function(t,e){return Fe(this,Ue(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Fe(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Fe(this,function(t,e,n){var r=We(t);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return t.__iterate((function(t,o,c){return e.call(n,t,o,c)&&++a&&r(t,o,i)})),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=t.__iterator(2,o),c=!0;return new L((function(){if(!c)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var o=t.value,s=o[0],u=o[1];return e.call(n,u,s,i)?2===r?t:R(r,s,u,t):(c=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(In(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),n=c(t),r=e?1:0;return function(t,e){return e=ht(e,3432918353),e=ht(e<<15|e>>>-15,461845907),e=ht(e<<13|e>>>-13,5),e=ht((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=mt((e=ht(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Pn(yt(t),yt(e))|0}:function(t,e){r=r+Pn(yt(t),yt(e))|0}:e?function(t){r=31*r+yt(t)|0}:function(t){r=r+yt(t)|0}),r)}(this))}});var En=n.prototype;En[f]=!0,En[P]=En.values,En.__toJS=En.toArray,En.__toStringMapper=jn,En.inspect=En.toSource=function(){return this.toString()},En.chain=En.flatMap,En.contains=En.includes,Sn(r,{flip:function(){return Fe(this,je(this))},mapEntries:function(t,e){var n=this,r=0;return Fe(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Fe(this,this.toSeq().flip().map((function(r,o){return t.call(e,r,o,n)})).flip())}});var kn=r.prototype;function An(t,e){return e}function On(t,e){return[e,t]}function In(t){return function(){return!t.apply(this,arguments)}}function Tn(t){return function(){return-t.apply(this,arguments)}}function jn(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Cn(){return w(arguments)}function Mn(t,e){return t<e?1:t>e?-1:0}function Pn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return kn[g]=!0,kn[P]=En.entries,kn.__toJS=En.toObject,kn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+jn(t)},Sn(o,{toKeyedSeq:function(){return new Ae(this,!1)},filter:function(t,e){return Fe(this,Pe(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Fe(this,Me(this,!1))},slice:function(t,e){return Fe(this,Le(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=A(t,t<0?this.count():this.size);var r=this.slice(0,t);return Fe(this,1===n?r:r.concat(w(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Fe(this,Ne(this,t,!1))},get:function(t,e){return(t=S(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=S(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Fe(this,function(t,e){var n=We(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return t.__iterate((function(t,r){return(!i||!1!==n(e,i++,o))&&!1!==n(t,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=t.__iterator(1,r),a=0;return new L((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?R(n,a++,e):R(n,a++,o.value,o)}))},n}(this,t))},interleave:function(){var t=[this].concat(w(arguments)),e=Be(this.toSeq(),V.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Fe(this,n)},keySeq:function(){return lt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Fe(this,Re(this,t,e,!1))},zip:function(){var t=[this].concat(w(arguments));return Fe(this,Be(this,Cn,t))},zipWith:function(t){var e=w(arguments);return e[0]=this,Fe(this,Be(this,t,e))}}),o.prototype[p]=!0,o.prototype[d]=!0,Sn(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=En.includes,i.prototype.contains=i.prototype.includes,Sn(H,r.prototype),Sn(V,o.prototype),Sn($,i.prototype),Sn(gt,r.prototype),Sn(pt,o.prototype),Sn(dt,i.prototype),{Iterable:n,Seq:F,Collection:ft,Map:jt,OrderedMap:we,List:oe,Stack:mn,Set:en,OrderedSet:ln,Record:Ye,Range:lt,Repeat:st,is:at,fromJS:rt}}()},"./node_modules/transit-immutable-js/index.js":
/*!****************************************************!*\
  !*** ./node_modules/transit-immutable-js/index.js ***!
  \****************************************************/
/*! no static exports found */function(t,e,n){var r=n(/*! transit-js */"./node_modules/transit-js/transit.js"),o=n(/*! immutable */"./node_modules/immutable/dist/immutable.js");function i(t,e,n){var r={iM:function(t){for(var e=o.Map().asMutable(),n=0;n<t.length;n+=2)e=e.set(t[n],t[n+1]);return e.asImmutable()},iOM:function(t){for(var e=o.OrderedMap().asMutable(),n=0;n<t.length;n+=2)e=e.set(t[n],t[n+1]);return e.asImmutable()},iL:function(t){return o.List(t)},iS:function(t){return o.Set(t)},iOS:function(t){return o.OrderedSet(t)},iR:function(t){var r=e[t.n];return r?new r(t.v):n(t.n,t.v)}};return t.forEach((function(t){r[t.tag]=t.read})),r}function a(t,e,n){function i(t){var e=0;n&&(t=t.filter(n));var r=new Array(2*t.size);return t.forEach((function(t,n){r[e++]=n,r[e++]=t})),r}var a=r.map([o.Map,r.makeWriteHandler({tag:function(){return"iM"},rep:i}),o.OrderedMap,r.makeWriteHandler({tag:function(){return"iOM"},rep:i}),o.List,r.makeWriteHandler({tag:function(){return"iL"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),o.Set,r.makeWriteHandler({tag:function(){return"iS"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),o.OrderedSet,r.makeWriteHandler({tag:function(){return"iOS"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),Function,r.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}}),"default",r.makeWriteHandler({tag:function(){return"iM"},rep:function(t){if(!("toMap"in t)){var e="Error serializing unrecognized object "+t.toString();throw new Error(e)}return i(t.toMap())}})]);return Object.keys(e).forEach((function(t){a.set(e[t],function(t){return r.makeWriteHandler({tag:function(){return"iR"},rep:function(e){return{n:t,v:e.toObject()}}})}(t))})),t.forEach((function(t){a.set(t.class,r.makeWriteHandler({tag:function(){return t.tag},rep:t.write}))})),a}function c(t,e){var n=JSON.stringify(t);throw new Error(e.replace("%j",n))}function s(t){throw new Error("Tried to deserialize Record type named `"+t+"`, but no type with that name was passed to withRecords()")}function u(t){var e=t.records||{},n=t.filter||!1,r=t.missingRecordHandler||s,o=t.extras||[];return{read:i(o,e,r),write:a(o,e,n),withExtraHandlers:function(t){return function(t){Array.isArray(t)||c(t,"Expected array of handlers, got %j"),t.forEach((function(t){"string"!=typeof t.tag&&c(t,"Expected %j to have property 'tag' which is a string"),"function"!=typeof t.class&&c(t,"Expected %j to have property 'class' which is a constructor function"),"function"!=typeof t.write&&c(t,"Expected %j to have property 'write' which is a function"),"function"!=typeof t.read&&c(t,"Expected %j to have property 'write' which is a function")}))}(t),u({extras:o.concat(t),records:e,filter:n,missingRecordHandler:r})},withFilter:function(t){return u({extras:o,records:e,filter:t,missingRecordHandler:r})},withRecords:function(t,e){var r=function(t){var e={};return t.forEach((function(t){var n,r=new t({}),o=(n=r)._name||n.constructor.name||"Record";if(!o||"Record"===o)throw new Error("Cannot (de)serialize Record() without a name");if(e[o])throw new Error("There's already a constructor for a Record named "+o);e[o]=t})),e}(t);return u({extras:o,records:r,filter:n,missingRecordHandler:e})}}}t.exports=function t(e){var n=function(t){return r.reader("json",{mapBuilder:{init:function(){return{}},add:function(t,e,n){return t[e]=n,t},finalize:function(t){return t}},handlers:t})}(e.read),o=function(t){return r.writer("json",{handlers:t})}(e.write);return{toJSON:function(t){return o.write(t)},fromJSON:function(t){return n.read(t)},withExtraHandlers:function(n){return t(e.withExtraHandlers(n))},withFilter:function(n){return t(e.withFilter(n))},withRecords:function(n,r){return t(e.withRecords(n,r))}}}(u({})),t.exports.handlers=u({})},"./node_modules/transit-js/transit.js":
/*!********************************************!*\
  !*** ./node_modules/transit-js/transit.js ***!
  \********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){(function(global){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,r){if(e){for(n=$jscomp.global,t=t.split("."),r=0;r<t.length-1;r++){var o=t[r];o in n||(n[o]={}),n=n[o]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("String.prototype.repeat",(function(t){return t||function(t){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var n="";t;)1&t&&(n+=e),(t>>>=1)&&(e+=e);return n}}),"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype((function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}))},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var o=n++;return{value:e(o,t[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill("Array.prototype.entries",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t,e){return[t,e]}))}}),"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t){return t}))}}),"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t,e){return e}))}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,n){t=t.split("."),n=n||goog.global,t[0]in n||!n.execScript||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)!t.length&&goog.isDef(e)?n[r]=e:n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}},goog.define=function(t,e){var n=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(n=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,n)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var n=t;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED){if(t in goog.loadedModules_)return goog.loadedModules_[t];if(!goog.implicitNamespaces_[t])return null!=(t=goog.getObjectByName(t))?t:null}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var n,r=t.split("."),o=e||goog.global;n=r.shift();){if(!goog.isDefAndNotNull(o[n]))return null;o=o[n]}return o},goog.globalize=function(t,e){var n,r=e||goog.global;for(n in t)r[n]=t[n]},goog.addDependency=function(t,e,n,r){if(goog.DEPENDENCIES_ENABLED){var o;t=t.replace(/\\/g,"/");var i=goog.dependencies_;r&&"boolean"!=typeof r||(r=r?{module:"goog"}:{});for(var a=0;o=e[a];a++)i.nameToPath[o]=t,i.loadFlags[t]=r;for(r=0;e=n[r];r++)t in i.requires||(i.requires[t]={}),i.requires[t][e]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t)){if(goog.isInModuleLoader_())return goog.module.getInternal_(t)}else if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(!e)throw t="goog.require could not find: "+t,goog.logToConsole_(t),Error(t);goog.writeScripts_(e)}return null}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("SCRIPT"),e=t.length-1;0<=e;--e){var n=t[e].src,r=-1==(r=n.lastIndexOf("?"))?n.length:r;if("base.js"==n.substr(r-7,7)){goog.basePath=n.substr(0,r-7);break}}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.oldIeWaiting_=!1,goog.importProcessedScript_=function(t,e,n){goog.importScript_("",'goog.retrieveAndExec_("'+t+'", '+e+", "+n+");")},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(0<t){var e=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;n<t;n++)goog.maybeProcessDeferredPath_(e[n])}goog.oldIeWaiting_=!1},goog.maybeProcessDeferredDep_=function(t){goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)&&(t=goog.getPathFromDeps_(t),goog.maybeProcessDeferredPath_(goog.basePath+t))},goog.isDeferredModule_=function(t){var e=(t=goog.getPathFromDeps_(t))&&goog.dependencies_.loadFlags[t]||{},n=e.lang||"es3";return!(!t||"goog"!=e.module&&!goog.needsTranspile_(n))&&goog.basePath+t in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){if((t=goog.getPathFromDeps_(t))&&t in goog.dependencies_.requires)for(var e in goog.dependencies_.requires[t])if(!goog.isProvided_(e)&&!goog.isDeferredModule_(e))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,n=e.createElement("script");n.type="text/javascript",n.src=t,n.defer=!1,n.async=!1,e.head.appendChild(n)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){goog.oldIeWaiting_=!0;var r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+t+'"'+r+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else n.write('<script type="text/javascript">'+goog.protectScriptTag_(e)+"<\/script>");return!0}return!1},goog.protectScriptTag_=function(t){return t.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.needsTranspile_=function(t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),t in goog.requiresTranspilation_)return goog.requiresTranspilation_[t];throw Error("Unknown language mode: "+t)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){var e=[],n={},r=goog.dependencies_;!function t(o){if(!(o in r.written)&&!(o in r.visited)){if(r.visited[o]=!0,o in r.requires)for(var i in r.requires[o])if(!goog.isProvided_(i)){if(!(i in r.nameToPath))throw Error("Undefined nameToPath for "+i);t(r.nameToPath[i])}o in n||(n[o]=!0,e.push(o))}}(t);for(var o=0;o<e.length;o++)t=e[o],goog.dependencies_.written[t]=!0;var i=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,o=0;o<e.length;o++){if(!(t=e[o]))throw goog.moduleLoaderState_=i,Error("Undefined script input");var a=r.loadFlags[t]||{},c=goog.needsTranspile_(a.lang||"es3");"goog"==a.module||c?goog.importProcessedScript_(goog.basePath+t,"goog"==a.module,c):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=i},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(t){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+"\n;})();\n"},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))var n=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),n=goog.loadModuleFromSource_.call(void 0,t)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]=n}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)"."==t[e]?t.splice(e,1):e&&".."==t[e]&&t[e-1]&&".."!=t[e-1]?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(t){return null}},goog.retrieveAndExec_=function(t,e,n){if(!COMPILED){var r=t;t=goog.normalizePath_(t);var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,i=goog.loadFileSync_(t);if(null==i)throw Error('Load of "'+t+'" failed');n&&(i=goog.transpile_.call(goog.global,i,t)),i=e?goog.wrapModule_(t,i):i+"\n//# sourceURL="+t,goog.IS_OLD_IE_&&goog.oldIeWaiting_?(goog.dependencies_.deferred[r]=i,goog.queuedModules_.push(r)):o(t,i)}},goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){if(eval(f+"\n//# sourceURL="+e),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,c=goog.global.$jscomp,d=c.transpile}}return d||(d=c.transpile=function(t,e){return goog.logToConsole_(e+" requires transpilation but no transpiler was found."),t}),d(a,b)},goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){if("object"==(n=goog.typeOf(t))||"array"==n){if(t.clone)return t.clone();var e,n="array"==n?[]:{};for(e in t)n[e]=goog.cloneObject(t[e]);return n}return t},goog.bindNative_=function(t,e,n){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var n in e)t[n]=e[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,n=e.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(e.createTextNode(t)),e.body.appendChild(n),e.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if("."==String(t).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var n=function(t){return goog.cssNameMapping_[t]||t},r=function(t){t=t.split("-");for(var e=[],r=0;r<t.length;r++)e.push(n(t[r]));return e.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(t){return t},r=e?t+"-"+r(e):r(t),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(r):r},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,n){goog.exportPath_(t,e,n)},goog.exportProperty=function(t,e,n){t[e]=n},goog.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return e.prototype[n].apply(t,o)}},goog.base=function(t,e,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var o=Array(arguments.length-1),i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.superClass_.constructor.apply(t,o)}for(o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];i=!1;for(var a=t.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[e]===r)i=!0;else if(i)return a.prototype[e].apply(t,o);if(t[e]===r)return t.constructor.prototype[e].apply(t,o);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var n=e.constructor,r=e.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,t),t&&goog.inherits(n,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(n.prototype,e),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var n=!goog.defineClass.isUnsealable_(e),r=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===r&&n&&Object.seal instanceof Function&&Object.seal(e),e};return r},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function a(t,e){d?c[t]=!0:e()?c[t]=!1:d=c[t]=!0}function b(a){try{return!!eval(a)}catch(t){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",(function(){return b("[1,].length==1")})),a("es6",(function(){var t=e.match(/Edge\/(\d+)(\.\d)*/i);return!(t&&15>Number(t[1]))&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')})),a("es6-impl",(function(){return!0})),a("es7",(function(){return b("2 ** 2 == 4")})),a("es8",(function(){return b("async () => 1, true")})),c},goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},goog.string.endsWith=function(t,e){var n=t.length-e.length;return 0<=n&&t.indexOf(e,n)==n},goog.string.caseInsensitiveStartsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(0,e.length))},goog.string.caseInsensitiveEndsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},goog.string.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.subs=function(t,e){for(var n=t.split("%s"),r="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)r+=n.shift()+o.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptyString=function(t){return 0==t.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&" "<=t&&"~">=t||""<=t&&"�">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,e){var n=String(t).toLowerCase(),r=String(e).toLowerCase();return n<r?-1:n==r?0:1},goog.string.numberAwareCompare_=function(t,e,n){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var r=t.toLowerCase().match(n),o=e.toLowerCase().match(n),i=Math.min(r.length,o.length),a=0;a<i;a++){n=r[a];var c=o[a];if(n!=c)return t=parseInt(n,10),!isNaN(t)&&(e=parseInt(c,10),!isNaN(e)&&t-e)?t-e:n<c?-1:1}return r.length!=o.length?r.length-o.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(goog.string.AMP_RE_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.LT_RE_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.GT_RE_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.QUOT_RE_,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=t.indexOf("e")&&(t=t.replace(goog.string.E_RE_,"&#101;"))}return t},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,(function(t,e){var o=n[t];if(o)return o;if("#"==e.charAt(0)){var i=Number("0"+e.substr(1));isNaN(i)||(o=String.fromCharCode(i))}return o||(r.innerHTML=t+" ",o=r.firstChild.nodeValue.slice(0,-1)),n[t]=o}))},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,(function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var n=Number("0"+e.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return t}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var n=e.length,r=0;r<n;r++){var o=1==n?e:e.charAt(r);if(t.charAt(0)==o&&t.charAt(t.length-1)==o)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,n){return n&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),n&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,n,r){if(n&&(t=goog.string.unescapeEntities(t)),r&&t.length>e){r>e&&(r=e);var o=t.length-r;t=t.substring(0,e-r)+"..."+t.substring(o)}else t.length>e&&(r=Math.floor(e/2),o=t.length-r,t=t.substring(0,r+e%2)+"..."+t.substring(o));return n&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],n=0;n<t.length;n++){var r=t.charAt(n),o=r.charCodeAt(0);e[n+1]=goog.string.specialEscapeChars_[r]||(31<o&&127>o?r:goog.string.escapeChar(r))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=goog.string.escapeChar(t.charAt(n));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var n=t;else 256>e?(n="\\x",(16>e||256<e)&&(n+="0")):(n="\\u",4096>e&&(n+="0")),n+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=n},goog.string.contains=function(t,e){return-1!=t.indexOf(e)},goog.string.caseInsensitiveContains=function(t,e){return goog.string.contains(t.toLowerCase(),e.toLowerCase())},goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,n){var r=t;return 0<=e&&e<t.length&&0<n&&(r=t.substr(0,e)+t.substr(e+n,t.length-e-n)),r},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){var n=new RegExp(goog.string.regExpEscape(e),"g");return t.replace(n,"")},goog.string.replaceAll=function(t,e,n){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,n){return-1==(n=(t=goog.isDef(n)?t.toFixed(n):String(t)).indexOf("."))&&(n=t.length),goog.string.repeat("0",Math.max(0,e-n))+t},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(t,e){for(var n=0,r=goog.string.trim(String(t)).split("."),o=goog.string.trim(String(e)).split("."),i=Math.max(r.length,o.length),a=0;0==n&&a<i;a++){var c=r[a]||"",s=o[a]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==c[0].length&&0==s[0].length)break;n=0==c[1].length?0:parseInt(c[1],10);var u=0==s[1].length?0:parseInt(s[1],10);n=goog.string.compareElements_(n,u)||goog.string.compareElements_(0==c[2].length,0==s[2].length)||goog.string.compareElements_(c[2],s[2]),c=c[3],s=s[3]}while(0==n)}return n},goog.string.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.string.hashCode=function(t){for(var e=0,n=0;n<t.length;++n)e=31*e+t.charCodeAt(n)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return 0==e&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,(function(t,e){return e.toUpperCase()}))},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){var n=goog.isString(e)?goog.string.regExpEscape(e):"\\s";return t.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),(function(t,e,n){return e+n.toUpperCase()}))},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,n){t=t.split(e);for(var r=[];0<n&&t.length;)r.push(t.shift()),n--;return t.length&&r.push(t.join(e)),r},goog.string.lastComponent=function(t,e){if(!e)return t;"string"==typeof e&&(e=[e]);for(var n=-1,r=0;r<e.length;r++)if(""!=e[r]){var o=t.lastIndexOf(e[r]);o>n&&(n=o)}return-1==n?t:t.slice(n+1)},goog.string.editDistance=function(t,e){var n=[],r=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var o=0;o<e.length+1;o++)n[o]=o;for(o=0;o<t.length;o++){r[0]=o+1;for(var i=0;i<e.length;i++)r[i+1]=Math.min(r[i]+1,n[i+1]+1,n[i]+Number(t[o]!=e[i]));for(i=0;i<n.length;i++)n[i]=r[i]}return r[e.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){e.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(t,e,n,r){var o="Assertion failed";if(n){o+=": "+n;var i=r}else t&&(o+=": "+t,i=e);t=new goog.asserts.AssertionError(""+o,i||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,n,r){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],n,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":typeof t},goog.object={},goog.object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},goog.object.forEach=function(t,e,n){for(var r in t)e.call(n,t[r],r,t)},goog.object.filter=function(t,e,n){var r,o={};for(r in t)e.call(n,t[r],r,t)&&(o[r]=t[r]);return o},goog.object.map=function(t,e,n){var r,o={};for(r in t)o[r]=e.call(n,t[r],r,t);return o},goog.object.some=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return!0;return!1},goog.object.every=function(t,e,n){for(var r in t)if(!e.call(n,t[r],r,t))return!1;return!0},goog.object.getCount=function(t){var e,n=0;for(e in t)n++;return n},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n},goog.object.getKeys=function(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n},goog.object.getValueByKeys=function(t,e){for(var n=(r=goog.isArrayLike(e))?e:arguments,r=r?0:1;r<n.length&&(t=t[n[r]],goog.isDef(t));r++);return t},goog.object.containsKey=function(t,e){return null!==t&&e in t},goog.object.containsValue=function(t,e){for(var n in t)if(t[n]==e)return!0;return!1},goog.object.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},goog.object.findValue=function(t,e,n){return(e=goog.object.findKey(t,e,n))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var n;return(n=e in t)&&delete t[e],n},goog.object.add=function(t,e,n){if(null!==t&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,n)},goog.object.get=function(t,e,n){return null!==t&&e in t?t[e]:n},goog.object.set=function(t,e,n){t[e]=n},goog.object.setIfUndefined=function(t,e,n){return e in t?t[e]:t[e]=n},goog.object.setWithReturnValueIfNotSet=function(t,e,n){return e in t?t[e]:(n=n(),t[e]=n)},goog.object.equals=function(t,e){for(var n in t)if(!(n in e)||t[n]!==e[n])return!1;for(n in e)if(!(n in t))return!1;return!0},goog.object.clone=function(t){var e,n={};for(e in t)n[e]=t[e];return n},goog.object.unsafeClone=function(t){if("object"==(n=goog.typeOf(t))||"array"==n){if(goog.isFunction(t.clone))return t.clone();var e,n="array"==n?[]:{};for(e in t)n[e]=goog.object.unsafeClone(t[e]);return n}return t},goog.object.transpose=function(t){var e,n={};for(e in t)n[t[e]]=e;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var n,r,o=1;o<arguments.length;o++){for(n in r=arguments[o])t[n]=r[n];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)n=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}},goog.object.create=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<e;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<e;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,n){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var r={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||n);){for(var o=Object.getOwnPropertyNames(t),i=0;i<o.length;i++)r[o[i]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(r)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch(t){}return!1},goog.reflect.cache=function(t,e,n,r){return r=r?r(e):e,Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=n(e)},goog.math={},goog.math.Long=function(t,e){this.low_=0|t,this.high_=0|e},goog.math.Long.IntCache_={},goog.math.Long.valueCache_={},goog.math.Long.getCachedIntValue_=function(t){return goog.reflect.cache(goog.math.Long.IntCache_,t,(function(t){return new goog.math.Long(t,0>t?-1:0)}))},goog.math.Long.MAX_VALUE_FOR_RADIX_="  111111111111111111111111111111111111111111111111111111111111111 2021110011022210012102010021220101220221 13333333333333333333333333333333 1104332401304422434310311212 1540241003031030222122211 22341010611245052052300 777777777777777777777 67404283172107811827 9223372036854775807 1728002635214590697 41a792678515120367 10b269549075433c37 4340724c6c71dc7a7 160e2ad3246366807 7fffffffffffffff 33d3d8307b214008 16agh595df825fa7 ba643dci0ffeehh 5cbfjia3fh26ja7 2heiciiie82dh97 1adaibb21dckfa7 i6k448cf4192c2 acd772jnc9l0l7 64ie1focnn5g77 3igoecjbmca687 27c48l5b37oaop 1bk39f3ah3dmq7 q1se8f0m04isb hajppbc1fc207 bm03i95hia437 7vvvvvvvvvvvv 5hg4ck9jd4u37 3tdtk1v8j6tpp 2pijmikexrxp7 1y2p0ij32e8e7".split(" "),goog.math.Long.MIN_VALUE_FOR_RADIX_="  -1000000000000000000000000000000000000000000000000000000000000000 -2021110011022210012102010021220101220222 -20000000000000000000000000000000 -1104332401304422434310311213 -1540241003031030222122212 -22341010611245052052301 -1000000000000000000000 -67404283172107811828 -9223372036854775808 -1728002635214590698 -41a792678515120368 -10b269549075433c38 -4340724c6c71dc7a8 -160e2ad3246366808 -8000000000000000 -33d3d8307b214009 -16agh595df825fa8 -ba643dci0ffeehi -5cbfjia3fh26ja8 -2heiciiie82dh98 -1adaibb21dckfa8 -i6k448cf4192c3 -acd772jnc9l0l8 -64ie1focnn5g78 -3igoecjbmca688 -27c48l5b37oaoq -1bk39f3ah3dmq8 -q1se8f0m04isc -hajppbc1fc208 -bm03i95hia438 -8000000000000 -5hg4ck9jd4u38 -3tdtk1v8j6tpq -2pijmikexrxp8 -1y2p0ij32e8e8".split(" "),goog.math.Long.fromInt=function(t){var e=0|t;return goog.asserts.assert(t===e,"value should be a 32-bit integer"),-128<=e&&128>e?goog.math.Long.getCachedIntValue_(e):new goog.math.Long(e,0>e?-1:0)},goog.math.Long.fromNumber=function(t){return isNaN(t)?goog.math.Long.getZero():t<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMinValue():t+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMaxValue():0>t?goog.math.Long.fromNumber(-t).negate():new goog.math.Long(t%goog.math.Long.TWO_PWR_32_DBL_|0,t/goog.math.Long.TWO_PWR_32_DBL_|0)},goog.math.Long.fromBits=function(t,e){return new goog.math.Long(t,e)},goog.math.Long.fromString=function(t,e){if(0==t.length)throw Error("number format error: empty string");var n=e||10;if(2>n||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return goog.math.Long.fromString(t.substring(1),n).negate();if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character: '+t);for(var r=goog.math.Long.fromNumber(Math.pow(n,8)),o=goog.math.Long.getZero(),i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+a),n);8>a?(a=goog.math.Long.fromNumber(Math.pow(n,a)),o=o.multiply(a).add(goog.math.Long.fromNumber(c))):o=(o=o.multiply(r)).add(goog.math.Long.fromNumber(c))}return o},goog.math.Long.isStringInRange=function(t,e){var n=e||10;if(2>n||36<n)throw Error("radix out of range: "+n);return n="-"==t.charAt(0)?goog.math.Long.MIN_VALUE_FOR_RADIX_[n]:goog.math.Long.MAX_VALUE_FOR_RADIX_[n],t.length<n.length||t.length==n.length&&t<=n},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.getZero=function(){return goog.math.Long.getCachedIntValue_(0)},goog.math.Long.getOne=function(){return goog.math.Long.getCachedIntValue_(1)},goog.math.Long.getNegOne=function(){return goog.math.Long.getCachedIntValue_(-1)},goog.math.Long.getMaxValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MAX_VALUE,(function(){return goog.math.Long.fromBits(-1,2147483647)}))},goog.math.Long.getMinValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MIN_VALUE,(function(){return goog.math.Long.fromBits(0,-2147483648)}))},goog.math.Long.getTwoPwr24=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.TWO_PWR_24,(function(){return goog.math.Long.fromInt(16777216)}))},goog.math.Long.prototype.toInt=function(){return this.low_},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},goog.math.Long.prototype.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.getMinValue())){var e=goog.math.Long.fromNumber(t),n=this.div(e);return e=n.multiply(e).subtract(this),n.toString(t)+e.toInt().toString(t)}return"-"+this.negate().toString(t)}n=goog.math.Long.fromNumber(Math.pow(t,6)),e=this;for(var r="";;){var o=e.div(n),i=(e.subtract(o.multiply(n)).toInt()>>>0).toString(t);if((e=o).isZero())return i+r;for(;6>i.length;)i="0"+i;r=""+i+r}},goog.math.Long.prototype.getHighBits=function(){return this.high_},goog.math.Long.prototype.getLowBits=function(){return this.low_},goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.getMinValue())?64:this.negate().getNumBitsAbs();for(var t=0!=this.high_?this.high_:this.low_,e=31;0<e&&0==(t&1<<e);e--);return 0!=this.high_?e+33:e+1},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},goog.math.Long.prototype.isNegative=function(){return 0>this.high_},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},goog.math.Long.prototype.equals=function(t){return this.high_==t.high_&&this.low_==t.low_},goog.math.Long.prototype.notEquals=function(t){return this.high_!=t.high_||this.low_!=t.low_},goog.math.Long.prototype.lessThan=function(t){return 0>this.compare(t)},goog.math.Long.prototype.lessThanOrEqual=function(t){return 0>=this.compare(t)},goog.math.Long.prototype.greaterThan=function(t){return 0<this.compare(t)},goog.math.Long.prototype.greaterThanOrEqual=function(t){return 0<=this.compare(t)},goog.math.Long.prototype.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.subtract(t).isNegative()?-1:1},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.getMinValue())?goog.math.Long.getMinValue():this.not().add(goog.math.Long.getOne())},goog.math.Long.prototype.add=function(t){var e=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=t.high_>>>16,i=65535&t.high_,a=t.low_>>>16;return r=0+((a=0+((t=(65535&this.low_)+(65535&t.low_)+0)>>>16)+(r+a))>>>16),e=0+((r+=n+i)>>>16)+(e+o)&65535,goog.math.Long.fromBits((65535&a)<<16|65535&t,e<<16|65535&r)},goog.math.Long.prototype.subtract=function(t){return this.add(t.negate())},goog.math.Long.prototype.multiply=function(t){if(this.isZero()||t.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue()))return t.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(t.equals(goog.math.Long.getMinValue()))return this.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(goog.math.Long.getTwoPwr24())&&t.lessThan(goog.math.Long.getTwoPwr24()))return goog.math.Long.fromNumber(this.toNumber()*t.toNumber());var e=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=65535&this.low_,i=t.high_>>>16,a=65535&t.high_,c=t.low_>>>16,s=0+o*(t=65535&t.low_),u=0+(s>>>16)+r*t,l=0+(u>>>16);l+=(u=(65535&u)+o*c)>>>16;var f=0+((l+=n*t)>>>16);return f=(f+=(l=(65535&l)+r*c)>>>16)+((l=(65535&l)+o*a)>>>16)+(e*t+n*c+r*a+o*i)&65535,goog.math.Long.fromBits((65535&u)<<16|65535&s,f<<16|65535&l)},goog.math.Long.prototype.div=function(t){if(t.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue())){if(t.equals(goog.math.Long.getOne())||t.equals(goog.math.Long.getNegOne()))return goog.math.Long.getMinValue();if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getOne();var e=this.shiftRight(1);if((e=e.div(t).shiftLeft(1)).equals(goog.math.Long.getZero()))return t.isNegative()?goog.math.Long.getOne():goog.math.Long.getNegOne();var n=this.subtract(t.multiply(e));return e.add(n.div(t))}if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var r=goog.math.Long.getZero();for(n=this;n.greaterThanOrEqual(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=48>=(o=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,o-48),i=goog.math.Long.fromNumber(e),a=i.multiply(t);a.isNegative()||a.greaterThan(n);)e-=o,a=(i=goog.math.Long.fromNumber(e)).multiply(t);i.isZero()&&(i=goog.math.Long.getOne()),r=r.add(i),n=n.subtract(a)}return r},goog.math.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)},goog.math.Long.prototype.and=function(t){return goog.math.Long.fromBits(this.low_&t.low_,this.high_&t.high_)},goog.math.Long.prototype.or=function(t){return goog.math.Long.fromBits(this.low_|t.low_,this.high_|t.high_)},goog.math.Long.prototype.xor=function(t){return goog.math.Long.fromBits(this.low_^t.low_,this.high_^t.high_)},goog.math.Long.prototype.shiftLeft=function(t){if(0==(t&=63))return this;var e=this.low_;return 32>t?goog.math.Long.fromBits(e<<t,this.high_<<t|e>>>32-t):goog.math.Long.fromBits(0,e<<t-32)},goog.math.Long.prototype.shiftRight=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>t):goog.math.Long.fromBits(e>>t-32,0<=e?0:-1)},goog.math.Long.prototype.shiftRightUnsigned=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>>t):32==t?goog.math.Long.fromBits(e,0):goog.math.Long.fromBits(e>>>t-32,0)},goog.math.Long.ValueCacheId_={MAX_VALUE:1,MIN_VALUE:2,TWO_PWR_24:6};var com={cognitect:{}};com.cognitect.transit={},com.cognitect.transit.delimiters={},com.cognitect.transit.delimiters.ESC="~",com.cognitect.transit.delimiters.TAG="#",com.cognitect.transit.delimiters.SUB="^",com.cognitect.transit.delimiters.RES="`",com.cognitect.transit.delimiters.ESC_TAG="~#",com.cognitect.transit.caching={},com.cognitect.transit.caching.MIN_SIZE_CACHEABLE=3,com.cognitect.transit.caching.BASE_CHAR_IDX=48,com.cognitect.transit.caching.CACHE_CODE_DIGITS=44,com.cognitect.transit.caching.MAX_CACHE_ENTRIES=com.cognitect.transit.caching.CACHE_CODE_DIGITS*com.cognitect.transit.caching.CACHE_CODE_DIGITS,com.cognitect.transit.caching.MAX_CACHE_SIZE=4096,com.cognitect.transit.caching.isCacheable=function(t,e){if(t.length>com.cognitect.transit.caching.MIN_SIZE_CACHEABLE){if(e)return!0;var n=t.charAt(0),r=t.charAt(1);return n===com.cognitect.transit.delimiters.ESC&&(":"===r||"$"===r||"#"===r)}return!1},com.cognitect.transit.caching.idxToCode=function(t){var e=Math.floor(t/com.cognitect.transit.caching.CACHE_CODE_DIGITS);return t=String.fromCharCode(t%com.cognitect.transit.caching.CACHE_CODE_DIGITS+com.cognitect.transit.caching.BASE_CHAR_IDX),0===e?com.cognitect.transit.delimiters.SUB+t:com.cognitect.transit.delimiters.SUB+String.fromCharCode(e+com.cognitect.transit.caching.BASE_CHAR_IDX)+t},com.cognitect.transit.caching.WriteCache=function(){this.cacheSize=this.gen=this.idx=0,this.cache={}},com.cognitect.transit.caching.WriteCache.prototype.write=function(t,e){if(com.cognitect.transit.caching.isCacheable(t,e)){this.cacheSize===com.cognitect.transit.caching.MAX_CACHE_SIZE?(this.clear(),this.gen=0,this.cache={}):this.idx===com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&this.clear();var n=this.cache[t];return null==n?(this.cache[t]=[com.cognitect.transit.caching.idxToCode(this.idx),this.gen],this.idx++,t):n[1]!=this.gen?(n[1]=this.gen,n[0]=com.cognitect.transit.caching.idxToCode(this.idx),this.idx++,t):n[0]}return t},com.cognitect.transit.caching.WriteCache.prototype.clear=function(){this.idx=0,this.gen++},com.cognitect.transit.caching.writeCache=function(){return new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.caching.isCacheCode=function(t){return t.charAt(0)===com.cognitect.transit.delimiters.SUB&&" "!==t.charAt(1)},com.cognitect.transit.caching.codeToIdx=function(t){return 2===t.length?t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX:(t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX)*com.cognitect.transit.caching.CACHE_CODE_DIGITS+(t=t.charCodeAt(2)-com.cognitect.transit.caching.BASE_CHAR_IDX)},com.cognitect.transit.caching.ReadCache=function(){this.idx=0,this.cache=[]},com.cognitect.transit.caching.ReadCache.prototype.write=function(t,e){return this.idx==com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&(this.idx=0),this.cache[this.idx]=t,this.idx++,t},com.cognitect.transit.caching.ReadCache.prototype.read=function(t,e){return this.cache[com.cognitect.transit.caching.codeToIdx(t)]},com.cognitect.transit.caching.ReadCache.prototype.clear=function(){this.idx=0},com.cognitect.transit.caching.readCache=function(){return new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.util={},com.cognitect.transit.util.objectKeys=void 0!==Object.keys?function(t){return Object.keys(t)}:function(t){return goog.object.getKeys(t)},com.cognitect.transit.util.isArray=void 0!==Array.isArray?function(t){return Array.isArray(t)}:function(t){return"array"===goog.typeOf(t)},com.cognitect.transit.util.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",com.cognitect.transit.util.randInt=function(t){return Math.round(Math.random()*t)},com.cognitect.transit.util.randHex=function(){return com.cognitect.transit.util.randInt(15).toString(16)},com.cognitect.transit.util.randomUUID=function(){var t=(8|3&com.cognitect.transit.util.randInt(14)).toString(16);return com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-4"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+t+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()},com.cognitect.transit.util.btoa=function(t){if("undefined"!=typeof btoa)return btoa(t);t=String(t);for(var e,n,r=0,o=com.cognitect.transit.util.chars,i="";t.charAt(0|r)||(o="=",r%1);i+=o.charAt(63&e>>8-r%1*8)){if(255<(n=t.charCodeAt(r+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return i},com.cognitect.transit.util.atob=function(t){if("undefined"!=typeof atob)return atob(t);if(1==(t=String(t).replace(/=+$/,"")).length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,n,r=0,o=0,i="";n=t.charAt(o++);~n&&(e=r%4?64*e+n:n,r++%4)?i+=String.fromCharCode(255&e>>(-2*r&6)):0)n=com.cognitect.transit.util.chars.indexOf(n);return i},com.cognitect.transit.util.Uint8ToBase64=function(t){for(var e,n=0,r=t.length,o="";n<r;)e=t.subarray(n,Math.min(n+32768,r)),o+=String.fromCharCode.apply(null,e),n+=32768;return com.cognitect.transit.util.btoa(o)},com.cognitect.transit.util.Base64ToUint8=function(t){for(var e=(t=com.cognitect.transit.util.atob(t)).length,n=new Uint8Array(e),r=0;r<e;r++){var o=t.charCodeAt(r);n[r]=o}return n},com.cognitect.transit.eq={},com.cognitect.transit.eq.hashCodeProperty="transit$hashCode$",com.cognitect.transit.eq.hashCodeCounter=1,com.cognitect.transit.eq.equals=function(t,e){if(null==t)return null==e;if(t===e)return!0;if("object"==typeof t){if(com.cognitect.transit.util.isArray(t)){if(com.cognitect.transit.util.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!com.cognitect.transit.eq.equals(t[n],e[n]))return!1;return!0}return!1}if(t.com$cognitect$transit$equals)return t.com$cognitect$transit$equals(e);if(null!=e&&"object"==typeof e){if(e.com$cognitect$transit$equals)return e.com$cognitect$transit$equals(t);n=0;var r,o=com.cognitect.transit.util.objectKeys(e).length;for(r in t)if(t.hasOwnProperty(r)&&(n++,!e.hasOwnProperty(r)||!com.cognitect.transit.eq.equals(t[r],e[r])))return!1;return n===o}}return!1},com.cognitect.transit.eq.hashCombine=function(t,e){return t^e+2654435769+(t<<6)+(t>>2)},com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=0,com.cognitect.transit.eq.STR_CACHE_MAX=256,com.cognitect.transit.eq.hashString=function(t){var e=com.cognitect.transit.eq.stringCodeCache[t];if(null!=e)return e;for(var n=e=0;n<t.length;++n)e=31*e+t.charCodeAt(n),e%=4294967296;return com.cognitect.transit.eq.stringCodeCacheSize++,com.cognitect.transit.eq.stringCodeCacheSize>=com.cognitect.transit.eq.STR_CACHE_MAX&&(com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=1),com.cognitect.transit.eq.stringCodeCache[t]=e},com.cognitect.transit.eq.hashMapLike=function(t){var e=0;if(null!=t.forEach)t.forEach((function(t,n,r){e=(e+(com.cognitect.transit.eq.hashCode(n)^com.cognitect.transit.eq.hashCode(t)))%4503599627370496}));else for(var n=com.cognitect.transit.util.objectKeys(t),r=0;r<n.length;r++){var o=n[r],i=t[o];e=(e+(com.cognitect.transit.eq.hashCode(o)^com.cognitect.transit.eq.hashCode(i)))%4503599627370496}return e},com.cognitect.transit.eq.hashArrayLike=function(t){var e=0;if(com.cognitect.transit.util.isArray(t))for(var n=0;n<t.length;n++)e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t[n]));else t.forEach&&t.forEach((function(t,n){e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t))}));return e},com.cognitect.transit.eq.hashCode=function(t){if(null==t)return 0;switch(typeof t){case"number":return t;case"boolean":return!0===t?1:0;case"string":return com.cognitect.transit.eq.hashString(t);case"function":var e=t[com.cognitect.transit.eq.hashCodeProperty];return e||(e=com.cognitect.transit.eq.hashCodeCounter,void 0!==Object.defineProperty?Object.defineProperty(t,com.cognitect.transit.eq.hashCodeProperty,{value:e,enumerable:!1}):t[com.cognitect.transit.eq.hashCodeProperty]=e,com.cognitect.transit.eq.hashCodeCounter++),e;default:return t instanceof Date?t.valueOf():com.cognitect.transit.util.isArray(t)?com.cognitect.transit.eq.hashArrayLike(t):t.com$cognitect$transit$hashCode?t.com$cognitect$transit$hashCode():com.cognitect.transit.eq.hashMapLike(t)}},com.cognitect.transit.eq.extendToEQ=function(t,e){return t.com$cognitect$transit$hashCode=e.hashCode,t.com$cognitect$transit$equals=e.equals,t},com.cognitect.transit.types={},com.cognitect.transit.types.ITERATOR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",com.cognitect.transit.types.TaggedValue=function(t,e){this.tag=t,this.rep=e,this.hashCode=-1},com.cognitect.transit.types.TaggedValue.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},com.cognitect.transit.types.TaggedValue.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.TaggedValue.prototype.equiv=com.cognitect.transit.types.TaggedValue.prototype.equiv,com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&this.tag===t.tag&&com.cognitect.transit.eq.equals(this.rep,t.rep)},com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCombine(com.cognitect.transit.eq.hashCode(this.tag),com.cognitect.transit.eq.hashCode(this.rep))),this.hashCode},com.cognitect.transit.types.taggedValue=function(t,e){return new com.cognitect.transit.types.TaggedValue(t,e)},com.cognitect.transit.types.isTaggedValue=function(t){return t instanceof com.cognitect.transit.types.TaggedValue},com.cognitect.transit.types.nullValue=function(){return null},com.cognitect.transit.types.boolValue=function(t){return"t"===t},com.cognitect.transit.types.MAX_INT=goog.math.Long.fromString("9007199254740991"),com.cognitect.transit.types.MIN_INT=goog.math.Long.fromString("-9007199254740991"),com.cognitect.transit.types.intValue=function(t){return"number"==typeof t||t instanceof goog.math.Long||(t=goog.math.Long.fromString(t,10)).greaterThan(com.cognitect.transit.types.MAX_INT)||t.lessThan(com.cognitect.transit.types.MIN_INT)?t:t.toNumber()},goog.math.Long.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},goog.math.Long.prototype.equiv=goog.math.Long.prototype.equiv,goog.math.Long.prototype.com$cognitect$transit$equals=function(t){return t instanceof goog.math.Long&&this.equals(t)},goog.math.Long.prototype.com$cognitect$transit$hashCode=function(){return this.toInt()},com.cognitect.transit.types.isInteger=function(t){return t instanceof goog.math.Long||"number"==typeof t&&!isNaN(t)&&1/0!==t&&parseFloat(t)===parseInt(t,10)},com.cognitect.transit.types.floatValue=function(t){return parseFloat(t)},com.cognitect.transit.types.bigInteger=function(t){return com.cognitect.transit.types.taggedValue("n",t)},com.cognitect.transit.types.isBigInteger=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"n"===t.tag},com.cognitect.transit.types.bigDecimalValue=function(t){return com.cognitect.transit.types.taggedValue("f",t)},com.cognitect.transit.types.isBigDecimal=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"f"===t.tag},com.cognitect.transit.types.charValue=function(t){return t},com.cognitect.transit.types.Keyword=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Keyword.prototype.toString=function(){return":"+this._name},com.cognitect.transit.types.Keyword.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Keyword.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Keyword.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Keyword.prototype.equiv=com.cognitect.transit.types.Keyword.prototype.equiv,com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Keyword&&this._name==t._name},com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.keyword=function(t){return new com.cognitect.transit.types.Keyword(t)},com.cognitect.transit.types.isKeyword=function(t){return t instanceof com.cognitect.transit.types.Keyword},com.cognitect.transit.types.Symbol=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Symbol.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Symbol.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Symbol.prototype.toString=function(){return this._name},com.cognitect.transit.types.Symbol.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Symbol.prototype.equiv=com.cognitect.transit.types.Symbol.prototype.equiv,com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Symbol&&this._name==t._name},com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.symbol=function(t){return new com.cognitect.transit.types.Symbol(t)},com.cognitect.transit.types.isSymbol=function(t){return t instanceof com.cognitect.transit.types.Symbol},com.cognitect.transit.types.hexFor=function(t,e,n){var r="";n=n||e+1;for(var o=8*(7-e),i=goog.math.Long.fromInt(255).shiftLeft(o);e<n;e++,o-=8,i=i.shiftRightUnsigned(8)){var a=t.and(i).shiftRightUnsigned(o).toString(16);1==a.length&&(a="0"+a),r+=a}return r},com.cognitect.transit.types.UUID=function(t,e){this.high=t,this.low=e,this.hashCode=-1},com.cognitect.transit.types.UUID.prototype.getLeastSignificantBits=function(){return this.low},com.cognitect.transit.types.UUID.prototype.getMostSignificantBits=function(){return this.high},com.cognitect.transit.types.UUID.prototype.toString=function(){var t=this.high,e=this.low,n=com.cognitect.transit.types.hexFor(t,0,4)+"-";return n+=com.cognitect.transit.types.hexFor(t,4,6)+"-",n+=com.cognitect.transit.types.hexFor(t,6,8)+"-",(n+=com.cognitect.transit.types.hexFor(e,0,2)+"-")+com.cognitect.transit.types.hexFor(e,2,8)},com.cognitect.transit.types.UUID.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.UUID.prototype.equiv=com.cognitect.transit.types.UUID.prototype.equiv,com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.UUID&&this.high.equals(t.high)&&this.low.equals(t.low)},com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this.toString())),this.hashCode},com.cognitect.transit.types.UUIDfromString=function(t){var e,n;t=t.replace(/-/g,"");var r=e=0;for(n=24;8>r;r+=2,n-=8)e|=parseInt(t.substring(r,r+2),16)<<n;var o=0;for(r=8,n=24;16>r;r+=2,n-=8)o|=parseInt(t.substring(r,r+2),16)<<n;var i=goog.math.Long.fromBits(o,e);for(e=0,r=16,n=24;24>r;r+=2,n-=8)e|=parseInt(t.substring(r,r+2),16)<<n;for(o=0,n=r=24;32>r;r+=2,n-=8)o|=parseInt(t.substring(r,r+2),16)<<n;return t=goog.math.Long.fromBits(o,e),new com.cognitect.transit.types.UUID(i,t)},com.cognitect.transit.types.uuid=function(t){return com.cognitect.transit.types.UUIDfromString(t)},com.cognitect.transit.types.isUUID=function(t){return t instanceof com.cognitect.transit.types.UUID},com.cognitect.transit.types.date=function(t){return t="number"==typeof t?t:parseInt(t,10),new Date(t)},com.cognitect.transit.types.verboseDate=function(t){return new Date(t)},Date.prototype.com$cognitect$transit$equals=function(t){return t instanceof Date&&this.valueOf()===t.valueOf()},Date.prototype.com$cognitect$transit$hashCode=function(){return this.valueOf()},com.cognitect.transit.types.binary=function(t,e){return e&&!1===e.preferBuffers||void 0===goog.global.Buffer?"undefined"!=typeof Uint8Array?com.cognitect.transit.util.Base64ToUint8(t):com.cognitect.transit.types.taggedValue("b",t):new goog.global.Buffer(t,"base64")},com.cognitect.transit.types.isBinary=function(t){return void 0!==goog.global.Buffer&&t instanceof goog.global.Buffer||"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t instanceof com.cognitect.transit.types.TaggedValue&&"b"===t.tag},com.cognitect.transit.types.uri=function(t){return com.cognitect.transit.types.taggedValue("r",t)},com.cognitect.transit.types.isURI=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"r"===t.tag},com.cognitect.transit.types.KEYS=0,com.cognitect.transit.types.VALUES=1,com.cognitect.transit.types.ENTRIES=2,com.cognitect.transit.types.TransitArrayMapIterator=function(t,e){this.entries=t,this.type=e||com.cognitect.transit.types.KEYS,this.idx=0},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=function(){if(this.idx<this.entries.length){var t={value:this.type===com.cognitect.transit.types.KEYS?this.entries[this.idx]:this.type===com.cognitect.transit.types.VALUES?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};return this.idx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=com.cognitect.transit.types.TransitArrayMapIterator.prototype.next,com.cognitect.transit.types.TransitArrayMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.TransitMapIterator=function(t,e){this.map=t,this.type=e||com.cognitect.transit.types.KEYS,this.keys=this.map.getKeys(),this.idx=0,this.bucket=null,this.bucketIdx=0},com.cognitect.transit.types.TransitMapIterator.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.bucketIdx<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.bucketIdx=0);var t={value:this.type===com.cognitect.transit.types.KEYS?this.bucket[this.bucketIdx]:this.type===com.cognitect.transit.types.VALUES?this.bucket[this.bucketIdx+1]:[this.bucket[this.bucketIdx],this.bucket[this.bucketIdx+1]],done:!1};return this.idx++,this.bucketIdx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitMapIterator.prototype.next=com.cognitect.transit.types.TransitMapIterator.prototype.next,com.cognitect.transit.types.TransitMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.mapEquals=function(t,e){if(t instanceof com.cognitect.transit.types.TransitMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(var n in t.map)for(var r=t.map[n],o=0;o<r.length;o+=2)if(!com.cognitect.transit.eq.equals(r[o+1],e.get(r[o])))return!1;return!0}if(t instanceof com.cognitect.transit.types.TransitArrayMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(n=t._entries,o=0;o<n.length;o+=2)if(!com.cognitect.transit.eq.equals(n[o+1],e.get(n[o])))return!1;return!0}if(null!=e&&"object"==typeof e&&(n=(o=com.cognitect.transit.util.objectKeys(e)).length,t.size===n)){for(r=0;r<n;r++){var i=o[r];if(!t.has(i)||!com.cognitect.transit.eq.equals(e[i],t.get(i)))return!1}return!0}return!1},com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD=8,com.cognitect.transit.types.ARRAY_MAP_THRESHOLD=32,com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD=32,com.cognitect.transit.types.print=function(t){return null==t?"null":goog.isArray(t)?"["+t.toString()+"]":goog.isString(t)?'"'+t+'"':t.toString()},com.cognitect.transit.types.printMap=function(t){var e=0,n="TransitMap {";return t.forEach((function(r,o){n+=com.cognitect.transit.types.print(o)+" => "+com.cognitect.transit.types.print(r),e<t.size-1&&(n+=", "),e++})),n+"}"},com.cognitect.transit.types.printSet=function(t){var e=0,n="TransitSet {";return t.forEach((function(r){n+=com.cognitect.transit.types.print(r),e<t.size-1&&(n+=", "),e++})),n+"}"},com.cognitect.transit.types.TransitArrayMap=function(t){this._entries=t,this.backingMap=null,this.hashCode=-1,this.size=t.length/2,this.accesses=0},com.cognitect.transit.types.TransitArrayMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitArrayMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitArrayMap.prototype.convert=function(){if(this.backingMap)throw Error("Invalid operation, already converted");return!(this.size<com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD)&&(this.accesses++,this.accesses>com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=[],!0))},com.cognitect.transit.types.TransitArrayMap.prototype.clear=function(){this.hashCode=-1,this.backingMap?this.backingMap.clear():this._entries=[],this.size=0},com.cognitect.transit.types.TransitArrayMap.prototype.clear=com.cognitect.transit.types.TransitArrayMap.prototype.clear,com.cognitect.transit.types.TransitArrayMap.prototype.keys=function(){return this.backingMap?this.backingMap.keys():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitArrayMap.prototype.keys=com.cognitect.transit.types.TransitArrayMap.prototype.keys,com.cognitect.transit.types.TransitArrayMap.prototype.keySet=function(){if(this.backingMap)return this.backingMap.keySet();for(var t=[],e=0,n=0;n<this._entries.length;e++,n+=2)t[e]=this._entries[n];return t},com.cognitect.transit.types.TransitArrayMap.prototype.keySet=com.cognitect.transit.types.TransitArrayMap.prototype.keySet,com.cognitect.transit.types.TransitArrayMap.prototype.entries=function(){return this.backingMap?this.backingMap.entries():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitArrayMap.prototype.entries=com.cognitect.transit.types.TransitArrayMap.prototype.entries,com.cognitect.transit.types.TransitArrayMap.prototype.values=function(){return this.backingMap?this.backingMap.values():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitArrayMap.prototype.values=com.cognitect.transit.types.TransitArrayMap.prototype.values,com.cognitect.transit.types.TransitArrayMap.prototype.forEach=function(t){if(this.backingMap)this.backingMap.forEach(t);else for(var e=0;e<this._entries.length;e+=2)t(this._entries[e+1],this._entries[e])},com.cognitect.transit.types.TransitArrayMap.prototype.forEach=com.cognitect.transit.types.TransitArrayMap.prototype.forEach,com.cognitect.transit.types.TransitArrayMap.prototype.get=function(t,e){if(this.backingMap)return this.backingMap.get(t);if(this.convert())return this.get(t);for(var n=0;n<this._entries.length;n+=2)if(com.cognitect.transit.eq.equals(this._entries[n],t))return this._entries[n+1];return e},com.cognitect.transit.types.TransitArrayMap.prototype.get=com.cognitect.transit.types.TransitArrayMap.prototype.get,com.cognitect.transit.types.TransitArrayMap.prototype.has=function(t){if(this.backingMap)return this.backingMap.has(t);if(this.convert())return this.has(t);for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return!0;return!1},com.cognitect.transit.types.TransitArrayMap.prototype.has=com.cognitect.transit.types.TransitArrayMap.prototype.has,com.cognitect.transit.types.TransitArrayMap.prototype.set=function(t,e){if(this.hashCode=-1,this.backingMap)this.backingMap.set(t,e),this.size=this.backingMap.size;else{for(var n=0;n<this._entries.length;n+=2)if(com.cognitect.transit.eq.equals(this._entries[n],t))return void(this._entries[n+1]=e);this._entries.push(t),this._entries.push(e),this.size++,this.size>com.cognitect.transit.types.ARRAY_MAP_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=null)}},com.cognitect.transit.types.TransitArrayMap.prototype.set=com.cognitect.transit.types.TransitArrayMap.prototype.set,com.cognitect.transit.types.TransitArrayMap.prototype.delete=function(t){if(this.hashCode=-1,this.backingMap)return t=this.backingMap.delete(t),this.size=this.backingMap.size,t;for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return t=this._entries[e+1],this._entries.splice(e,2),this.size--,t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach((function(e,n){t.set(n,e)})),t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=com.cognitect.transit.types.TransitArrayMap.prototype.clone,com.cognitect.transit.types.TransitArrayMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$hashCode=function(){return this.backingMap?this.backingMap.com$cognitect$transit$hashCode():(-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode)},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$equals=function(t){return this.backingMap?com.cognitect.transit.types.mapEquals(this.backingMap,t):com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.TransitMap=function(t,e,n){this.map=e||{},this._keys=t||[],this.size=n||0,this.hashCode=-1},com.cognitect.transit.types.TransitMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitMap.prototype.clear=function(){this.hashCode=-1,this.map={},this._keys=[],this.size=0},com.cognitect.transit.types.TransitMap.prototype.clear=com.cognitect.transit.types.TransitMap.prototype.clear,com.cognitect.transit.types.TransitMap.prototype.getKeys=function(){return null!=this._keys?this._keys:com.cognitect.transit.util.objectKeys(this.map)},com.cognitect.transit.types.TransitMap.prototype.delete=function(t){this.hashCode=-1,this._keys=null;for(var e=com.cognitect.transit.eq.hashCode(t),n=this.map[e],r=0;r<n.length;r+=2)if(com.cognitect.transit.eq.equals(t,n[r]))return t=n[r+1],n.splice(r,2),0===n.length&&delete this.map[e],this.size--,t},com.cognitect.transit.types.TransitMap.prototype.entries=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitMap.prototype.entries=com.cognitect.transit.types.TransitMap.prototype.entries,com.cognitect.transit.types.TransitMap.prototype.forEach=function(t){for(var e=this.getKeys(),n=0;n<e.length;n++)for(var r=this.map[e[n]],o=0;o<r.length;o+=2)t(r[o+1],r[o],this)},com.cognitect.transit.types.TransitMap.prototype.forEach=com.cognitect.transit.types.TransitMap.prototype.forEach,com.cognitect.transit.types.TransitMap.prototype.get=function(t,e){var n=com.cognitect.transit.eq.hashCode(t);if(null==(n=this.map[n]))return e;for(var r=0;r<n.length;r+=2)if(com.cognitect.transit.eq.equals(t,n[r]))return n[r+1]},com.cognitect.transit.types.TransitMap.prototype.get=com.cognitect.transit.types.TransitMap.prototype.get,com.cognitect.transit.types.TransitMap.prototype.has=function(t){var e=com.cognitect.transit.eq.hashCode(t);if(null!=(e=this.map[e]))for(var n=0;n<e.length;n+=2)if(com.cognitect.transit.eq.equals(t,e[n]))return!0;return!1},com.cognitect.transit.types.TransitMap.prototype.has=com.cognitect.transit.types.TransitMap.prototype.has,com.cognitect.transit.types.TransitMap.prototype.keys=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitMap.prototype.keys=com.cognitect.transit.types.TransitMap.prototype.keys,com.cognitect.transit.types.TransitMap.prototype.keySet=function(){for(var t=this.getKeys(),e=[],n=0;n<t.length;n++)for(var r=this.map[t[n]],o=0;o<r.length;o+=2)e.push(r[o]);return e},com.cognitect.transit.types.TransitMap.prototype.keySet=com.cognitect.transit.types.TransitMap.prototype.keySet,com.cognitect.transit.types.TransitMap.prototype.set=function(t,e){this.hashCode=-1;var n=com.cognitect.transit.eq.hashCode(t),r=this.map[n];if(null==r)this._keys&&this._keys.push(n),this.map[n]=[t,e],this.size++;else{n=!0;for(var o=0;o<r.length;o+=2)if(com.cognitect.transit.eq.equals(e,r[o])){n=!1,r[o]=e;break}n&&(r.push(t),r.push(e),this.size++)}},com.cognitect.transit.types.TransitMap.prototype.set=com.cognitect.transit.types.TransitMap.prototype.set,com.cognitect.transit.types.TransitMap.prototype.values=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitMap.prototype.values=com.cognitect.transit.types.TransitMap.prototype.values,com.cognitect.transit.types.TransitMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach((function(e,n){t.set(n,e)})),t},com.cognitect.transit.types.TransitMap.prototype.clone=com.cognitect.transit.types.TransitMap.prototype.clone,com.cognitect.transit.types.TransitMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$equals=function(t){return com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.map=function(t,e,n){if(t=t||[],e=!1!==e||e,(!0!==n||!n)&&t.length<=2*com.cognitect.transit.types.ARRAY_MAP_THRESHOLD){if(e){var r=t;for(t=[],e=0;e<r.length;e+=2){var o=!1;for(n=0;n<t.length;n+=2)if(com.cognitect.transit.eq.equals(t[n],r[e])){t[n+1]=r[e+1],o=!0;break}o||(t.push(r[e]),t.push(r[e+1]))}}return new com.cognitect.transit.types.TransitArrayMap(t)}r={},o=[];var i=0;for(e=0;e<t.length;e+=2){var a=r[n=com.cognitect.transit.eq.hashCode(t[e])];if(null==a)o.push(n),r[n]=[t[e],t[e+1]],i++;else{var c=!0;for(n=0;n<a.length;n+=2)if(com.cognitect.transit.eq.equals(a[n],t[e])){a[n+1]=t[e+1],c=!1;break}c&&(a.push(t[e]),a.push(t[e+1]),i++)}}return new com.cognitect.transit.types.TransitMap(o,r,i)},com.cognitect.transit.types.isArrayMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap},com.cognitect.transit.types.isMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap||t instanceof com.cognitect.transit.types.TransitMap},com.cognitect.transit.types.TransitSet=function(t){this.map=t,this.size=t.size},com.cognitect.transit.types.TransitSet.prototype.toString=function(){return com.cognitect.transit.types.printSet(this)},com.cognitect.transit.types.TransitSet.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitSet.prototype.add=function(t){this.map.set(t,t),this.size=this.map.size},com.cognitect.transit.types.TransitSet.prototype.add=com.cognitect.transit.types.TransitSet.prototype.add,com.cognitect.transit.types.TransitSet.prototype.clear=function(){this.map=new com.cognitect.transit.types.TransitMap,this.size=0},com.cognitect.transit.types.TransitSet.prototype.clear=com.cognitect.transit.types.TransitSet.prototype.clear,com.cognitect.transit.types.TransitSet.prototype.delete=function(t){return t=this.map.delete(t),this.size=this.map.size,t},com.cognitect.transit.types.TransitSet.prototype.entries=function(){return this.map.entries()},com.cognitect.transit.types.TransitSet.prototype.entries=com.cognitect.transit.types.TransitSet.prototype.entries,com.cognitect.transit.types.TransitSet.prototype.forEach=function(t,e){var n=this;this.map.forEach((function(e,r,o){t(r,n)}))},com.cognitect.transit.types.TransitSet.prototype.forEach=com.cognitect.transit.types.TransitSet.prototype.forEach,com.cognitect.transit.types.TransitSet.prototype.has=function(t){return this.map.has(t)},com.cognitect.transit.types.TransitSet.prototype.has=com.cognitect.transit.types.TransitSet.prototype.has,com.cognitect.transit.types.TransitSet.prototype.keys=function(){return this.map.keys()},com.cognitect.transit.types.TransitSet.prototype.keys=com.cognitect.transit.types.TransitSet.prototype.keys,com.cognitect.transit.types.TransitSet.prototype.keySet=function(){return this.map.keySet()},com.cognitect.transit.types.TransitSet.prototype.keySet=com.cognitect.transit.types.TransitSet.prototype.keySet,com.cognitect.transit.types.TransitSet.prototype.values=function(){return this.map.values()},com.cognitect.transit.types.TransitSet.prototype.values=com.cognitect.transit.types.TransitSet.prototype.values,com.cognitect.transit.types.TransitSet.prototype.clone=function(){var t=com.cognitect.transit.types.set();return this.forEach((function(e){t.add(e)})),t},com.cognitect.transit.types.TransitSet.prototype.clone=com.cognitect.transit.types.TransitSet.prototype.clone,com.cognitect.transit.types.TransitSet.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.values()},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TransitSet&&(this.size===t.size?com.cognitect.transit.eq.equals(this.map,t.map):void 0)},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$hashCode=function(t){return com.cognitect.transit.eq.hashCode(this.map)},com.cognitect.transit.types.set=function(t){t=t||[];for(var e={},n=[],r=0,o=0;o<t.length;o++){var i=e[a=com.cognitect.transit.eq.hashCode(t[o])];if(null==i)n.push(a),e[a]=[t[o],t[o]],r++;else{for(var a=!0,c=0;c<i.length;c+=2)if(com.cognitect.transit.eq.equals(i[c],t[o])){a=!1;break}a&&(i.push(t[o]),i.push(t[o]),r++)}}return new com.cognitect.transit.types.TransitSet(new com.cognitect.transit.types.TransitMap(n,e,r))},com.cognitect.transit.types.isSet=function(t){return t instanceof com.cognitect.transit.types.TransitSet},com.cognitect.transit.types.quoted=function(t){return com.cognitect.transit.types.taggedValue("'",t)},com.cognitect.transit.types.isQuoted=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"'"===t.tag},com.cognitect.transit.types.list=function(t){return com.cognitect.transit.types.taggedValue("list",t)},com.cognitect.transit.types.isList=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"list"===t.tag},com.cognitect.transit.types.link=function(t){return com.cognitect.transit.types.taggedValue("link",t)},com.cognitect.transit.types.isLink=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"link"===t.tag},com.cognitect.transit.types.specialDouble=function(t){switch(t){case"-INF":return-1/0;case"INF":return 1/0;case"NaN":return NaN;default:throw Error("Invalid special double value "+t)}},com.cognitect.transit.handlers={},com.cognitect.transit.handlers.ctorGuid=0,com.cognitect.transit.handlers.ctorGuidProperty="transit$guid$"+com.cognitect.transit.util.randomUUID(),com.cognitect.transit.handlers.typeTag=function(t){if(null==t)return"null";if(t===String)return"string";if(t===Boolean)return"boolean";if(t===Number)return"number";if(t===Array)return"array";if(t===Object)return"map";var e=t[com.cognitect.transit.handlers.ctorGuidProperty];return null==e&&(void 0!==Object.defineProperty?(e=++com.cognitect.transit.handlers.ctorGuid,Object.defineProperty(t,com.cognitect.transit.handlers.ctorGuidProperty,{value:e,enumerable:!1})):t[com.cognitect.transit.handlers.ctorGuidProperty]=e=++com.cognitect.transit.handlers.ctorGuid),e},com.cognitect.transit.handlers.constructor=function(t){return null==t?null:t.constructor},com.cognitect.transit.handlers.padZeros=function(t,e){for(var n=t.toString(),r=n.length;r<e;r++)n="0"+n;return n},com.cognitect.transit.handlers.stringableKeys=function(t){t=com.cognitect.transit.util.objectKeys(t);for(var e=0;e<t.length;e++);return!0},com.cognitect.transit.handlers.NilHandler=function(){},com.cognitect.transit.handlers.NilHandler.prototype.tag=function(t){return"_"},com.cognitect.transit.handlers.NilHandler.prototype.rep=function(t){return null},com.cognitect.transit.handlers.NilHandler.prototype.stringRep=function(t){return"null"},com.cognitect.transit.handlers.StringHandler=function(){},com.cognitect.transit.handlers.StringHandler.prototype.tag=function(t){return"s"},com.cognitect.transit.handlers.StringHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.StringHandler.prototype.stringRep=function(t){return t},com.cognitect.transit.handlers.NumberHandler=function(){},com.cognitect.transit.handlers.NumberHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.NumberHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.NumberHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler=function(){},com.cognitect.transit.handlers.IntegerHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.IntegerHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.BooleanHandler=function(){},com.cognitect.transit.handlers.BooleanHandler.prototype.tag=function(t){return"?"},com.cognitect.transit.handlers.BooleanHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.BooleanHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.ArrayHandler=function(){},com.cognitect.transit.handlers.ArrayHandler.prototype.tag=function(t){return"array"},com.cognitect.transit.handlers.ArrayHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.ArrayHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.MapHandler=function(){},com.cognitect.transit.handlers.MapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.MapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.MapHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.VerboseDateHandler=function(){},com.cognitect.transit.handlers.VerboseDateHandler.prototype.tag=function(t){return"t"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.rep=function(t){return t.getUTCFullYear()+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCMonth()+1,2)+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCDate(),2)+"T"+com.cognitect.transit.handlers.padZeros(t.getUTCHours(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCMinutes(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCSeconds(),2)+"."+com.cognitect.transit.handlers.padZeros(t.getUTCMilliseconds(),3)+"Z"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.DateHandler=function(){},com.cognitect.transit.handlers.DateHandler.prototype.tag=function(t){return"m"},com.cognitect.transit.handlers.DateHandler.prototype.rep=function(t){return t.valueOf()},com.cognitect.transit.handlers.DateHandler.prototype.stringRep=function(t){return t.valueOf().toString()},com.cognitect.transit.handlers.DateHandler.prototype.getVerboseHandler=function(t){return new com.cognitect.transit.handlers.VerboseDateHandler},com.cognitect.transit.handlers.UUIDHandler=function(){},com.cognitect.transit.handlers.UUIDHandler.prototype.tag=function(t){return"u"},com.cognitect.transit.handlers.UUIDHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.UUIDHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.KeywordHandler=function(){},com.cognitect.transit.handlers.KeywordHandler.prototype.tag=function(t){return":"},com.cognitect.transit.handlers.KeywordHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.KeywordHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.SymbolHandler=function(){},com.cognitect.transit.handlers.SymbolHandler.prototype.tag=function(t){return"$"},com.cognitect.transit.handlers.SymbolHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.SymbolHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.TaggedHandler=function(){},com.cognitect.transit.handlers.TaggedHandler.prototype.tag=function(t){return t.tag},com.cognitect.transit.handlers.TaggedHandler.prototype.rep=function(t){return t.rep},com.cognitect.transit.handlers.TaggedHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitSetHandler=function(){},com.cognitect.transit.handlers.TransitSetHandler.prototype.tag=function(t){return"set"},com.cognitect.transit.handlers.TransitSetHandler.prototype.rep=function(t){var e=[];return t.forEach((function(t,n){e.push(t)})),com.cognitect.transit.types.taggedValue("array",e)},com.cognitect.transit.handlers.TransitSetHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitArrayMapHandler=function(){},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitMapHandler=function(){},com.cognitect.transit.handlers.TransitMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.BufferHandler=function(){},com.cognitect.transit.handlers.BufferHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.BufferHandler.prototype.rep=function(t){return t.toString("base64")},com.cognitect.transit.handlers.BufferHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.Uint8ArrayHandler=function(){},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.rep=function(t){return com.cognitect.transit.util.Uint8ToBase64(t)},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.defaultHandlers=function(t){return t.set(null,new com.cognitect.transit.handlers.NilHandler),t.set(String,new com.cognitect.transit.handlers.StringHandler),t.set(Number,new com.cognitect.transit.handlers.NumberHandler),t.set(goog.math.Long,new com.cognitect.transit.handlers.IntegerHandler),t.set(Boolean,new com.cognitect.transit.handlers.BooleanHandler),t.set(Array,new com.cognitect.transit.handlers.ArrayHandler),t.set(Object,new com.cognitect.transit.handlers.MapHandler),t.set(Date,new com.cognitect.transit.handlers.DateHandler),t.set(com.cognitect.transit.types.UUID,new com.cognitect.transit.handlers.UUIDHandler),t.set(com.cognitect.transit.types.Keyword,new com.cognitect.transit.handlers.KeywordHandler),t.set(com.cognitect.transit.types.Symbol,new com.cognitect.transit.handlers.SymbolHandler),t.set(com.cognitect.transit.types.TaggedValue,new com.cognitect.transit.handlers.TaggedHandler),t.set(com.cognitect.transit.types.TransitSet,new com.cognitect.transit.handlers.TransitSetHandler),t.set(com.cognitect.transit.types.TransitArrayMap,new com.cognitect.transit.handlers.TransitArrayMapHandler),t.set(com.cognitect.transit.types.TransitMap,new com.cognitect.transit.handlers.TransitMapHandler),void 0!==goog.global.Buffer&&t.set(goog.global.Buffer,new com.cognitect.transit.handlers.BufferHandler),"undefined"!=typeof Uint8Array&&t.set(Uint8Array,new com.cognitect.transit.handlers.Uint8ArrayHandler),t},com.cognitect.transit.handlers.Handlers=function(){this.handlers={},com.cognitect.transit.handlers.defaultHandlers(this)},com.cognitect.transit.handlers.Handlers.prototype.get=function(t){return null!=(t="string"==typeof t?this.handlers[t]:this.handlers[com.cognitect.transit.handlers.typeTag(t)])?t:this.handlers.default},com.cognitect.transit.handlers.Handlers.prototype.get=com.cognitect.transit.handlers.Handlers.prototype.get,com.cognitect.transit.handlers.validTag=function(t){switch(t){case"null":case"string":case"boolean":case"number":case"array":case"map":return!1}return!0},com.cognitect.transit.handlers.Handlers.prototype.set=function(t,e){"string"==typeof t&&com.cognitect.transit.handlers.validTag(t)?this.handlers[t]=e:this.handlers[com.cognitect.transit.handlers.typeTag(t)]=e},com.cognitect.transit.impl={},com.cognitect.transit.impl.decoder={},com.cognitect.transit.impl.decoder.Tag=function(t){this.str=t},com.cognitect.transit.impl.decoder.tag=function(t){return new com.cognitect.transit.impl.decoder.Tag(t)},com.cognitect.transit.impl.decoder.isTag=function(t){return t&&t instanceof com.cognitect.transit.impl.decoder.Tag},com.cognitect.transit.impl.decoder.isGroundHandler=function(t){switch(t){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":return!0}return!1},com.cognitect.transit.impl.decoder.Decoder=function(t){for(var e in this.options=t||{},this.handlers={},this.defaults.handlers)this.handlers[e]=this.defaults.handlers[e];for(e in this.options.handlers){if(com.cognitect.transit.impl.decoder.isGroundHandler(e))throw Error('Cannot override handler for ground type "'+e+'"');this.handlers[e]=this.options.handlers[e]}this.preferStrings=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.preferStrings,this.preferBuffers=null!=this.options.preferBuffers?this.options.preferBuffers:this.defaults.preferBuffers,this.defaultHandler=this.options.defaultHandler||this.defaults.defaultHandler,this.mapBuilder=this.options.mapBuilder,this.arrayBuilder=this.options.arrayBuilder},com.cognitect.transit.impl.decoder.Decoder.prototype.defaults={handlers:{_:function(t,e){return com.cognitect.transit.types.nullValue()},"?":function(t,e){return com.cognitect.transit.types.boolValue(t)},b:function(t,e){return com.cognitect.transit.types.binary(t,e)},i:function(t,e){return com.cognitect.transit.types.intValue(t)},n:function(t,e){return com.cognitect.transit.types.bigInteger(t)},d:function(t,e){return com.cognitect.transit.types.floatValue(t)},f:function(t,e){return com.cognitect.transit.types.bigDecimalValue(t)},c:function(t,e){return com.cognitect.transit.types.charValue(t)},":":function(t,e){return com.cognitect.transit.types.keyword(t)},$:function(t,e){return com.cognitect.transit.types.symbol(t)},r:function(t,e){return com.cognitect.transit.types.uri(t)},z:function(t,e){return com.cognitect.transit.types.specialDouble(t)},"'":function(t,e){return t},m:function(t,e){return com.cognitect.transit.types.date(t)},t:function(t,e){return com.cognitect.transit.types.verboseDate(t)},u:function(t,e){return com.cognitect.transit.types.uuid(t)},set:function(t,e){return com.cognitect.transit.types.set(t)},list:function(t,e){return com.cognitect.transit.types.list(t)},link:function(t,e){return com.cognitect.transit.types.link(t)},cmap:function(t,e){return com.cognitect.transit.types.map(t,!1)}},defaultHandler:function(t,e){return com.cognitect.transit.types.taggedValue(t,e)},preferStrings:!0,preferBuffers:!0},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=function(t,e,n,r){if(null==t)return null;switch(typeof t){case"string":return this.decodeString(t,e,n,r);case"object":return com.cognitect.transit.util.isArray(t)?"^ "===t[0]?this.decodeArrayHash(t,e,n,r):this.decodeArray(t,e,n,r):this.decodeHash(t,e,n,r)}return t},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=com.cognitect.transit.impl.decoder.Decoder.prototype.decode,com.cognitect.transit.impl.decoder.Decoder.prototype.decodeString=function(t,e,n,r){return com.cognitect.transit.caching.isCacheable(t,n)?(t=this.parseString(t,e,!1),e&&e.write(t,n),t):com.cognitect.transit.caching.isCacheCode(t)?e.read(t,n):this.parseString(t,e,n)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeHash=function(t,e,n,r){var o=(n=com.cognitect.transit.util.objectKeys(t))[0];if(r=1==n.length?this.decode(o,e,!1,!1):null,com.cognitect.transit.impl.decoder.isTag(r))return t=t[o],null!=(n=this.handlers[r.str])?n(this.decode(t,e,!1,!0),this):com.cognitect.transit.types.taggedValue(r.str,this.decode(t,e,!1,!1));if(this.mapBuilder){if(n.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD&&this.mapBuilder.fromArray){var i=[];for(o=0;o<n.length;o++)r=n[o],i.push(this.decode(r,e,!0,!1)),i.push(this.decode(t[r],e,!1,!1));return this.mapBuilder.fromArray(i,t)}for(i=this.mapBuilder.init(t),o=0;o<n.length;o++)r=n[o],i=this.mapBuilder.add(i,this.decode(r,e,!0,!1),this.decode(t[r],e,!1,!1),t);return this.mapBuilder.finalize(i,t)}for(i=[],o=0;o<n.length;o++)r=n[o],i.push(this.decode(r,e,!0,!1)),i.push(this.decode(t[r],e,!1,!1));return com.cognitect.transit.types.map(i,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArrayHash=function(t,e,n,r){if(this.mapBuilder){if(t.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD+1&&this.mapBuilder.fromArray){for(r=[],n=1;n<t.length;n+=2)r.push(this.decode(t[n],e,!0,!1)),r.push(this.decode(t[n+1],e,!1,!1));return this.mapBuilder.fromArray(r,t)}for(r=this.mapBuilder.init(t),n=1;n<t.length;n+=2)r=this.mapBuilder.add(r,this.decode(t[n],e,!0,!1),this.decode(t[n+1],e,!1,!1),t);return this.mapBuilder.finalize(r,t)}for(r=[],n=1;n<t.length;n+=2)r.push(this.decode(t[n],e,!0,!1)),r.push(this.decode(t[n+1],e,!1,!1));return com.cognitect.transit.types.map(r,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArray=function(t,e,n,r){if(r){var o=[];for(r=0;r<t.length;r++)o.push(this.decode(t[r],e,n,!1));return o}if(o=e&&e.idx,2===t.length&&"string"==typeof t[0]&&(r=this.decode(t[0],e,!1,!1),com.cognitect.transit.impl.decoder.isTag(r)))return o=t[1],null!=(t=this.handlers[r.str])?o=t(this.decode(o,e,n,!0),this):com.cognitect.transit.types.taggedValue(r.str,this.decode(o,e,n,!1));if(e&&o!=e.idx&&(e.idx=o),this.arrayBuilder){if(32>=t.length&&this.arrayBuilder.fromArray){for(o=[],r=0;r<t.length;r++)o.push(this.decode(t[r],e,n,!1));return this.arrayBuilder.fromArray(o,t)}for(o=this.arrayBuilder.init(t),r=0;r<t.length;r++)o=this.arrayBuilder.add(o,this.decode(t[r],e,n,!1),t);return this.arrayBuilder.finalize(o,t)}for(o=[],r=0;r<t.length;r++)o.push(this.decode(t[r],e,n,!1));return o},com.cognitect.transit.impl.decoder.Decoder.prototype.parseString=function(t,e,n){return t.charAt(0)===com.cognitect.transit.delimiters.ESC?(e=t.charAt(1))===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?t.substring(1):e===com.cognitect.transit.delimiters.TAG?com.cognitect.transit.impl.decoder.tag(t.substring(2)):null==(n=this.handlers[e])?this.defaultHandler(e,t.substring(2)):n(t.substring(2),this):t},com.cognitect.transit.impl.decoder.decoder=function(t){return new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader={},com.cognitect.transit.impl.reader.JSONUnmarshaller=function(t){this.decoder=new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader.JSONUnmarshaller.prototype.unmarshal=function(t,e){return this.decoder.decode(JSON.parse(t),e)},com.cognitect.transit.impl.reader.Reader=function(t,e){this.unmarshaller=t,this.options=e||{},this.cache=this.options.cache?this.options.cache:new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.impl.reader.Reader.prototype.read=function(t){return t=this.unmarshaller.unmarshal(t,this.cache),this.cache.clear(),t},com.cognitect.transit.impl.reader.Reader.prototype.read=com.cognitect.transit.impl.reader.Reader.prototype.read,com.cognitect.transit.impl.writer={},com.cognitect.transit.impl.writer.escape=function(t){if(0<t.length){var e=t.charAt(0);return e===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?com.cognitect.transit.delimiters.ESC+t:t}return t},com.cognitect.transit.impl.writer.JSONMarshaller=function(t){if(this.opts=t||{},this.preferStrings=null==this.opts.preferStrings||this.opts.preferStrings,this.objectBuilder=this.opts.objectBuilder||null,this.transform=this.opts.transform||null,this.handlers=new com.cognitect.transit.handlers.Handlers,t=this.opts.handlers){if(com.cognitect.transit.util.isArray(t)||!t.forEach)throw Error('transit writer "handlers" option must be a map');var e=this;t.forEach((function(t,n){if(void 0===n)throw Error("Cannot create handler for JavaScript undefined");e.handlers.set(n,t)}))}this.handlerForForeign=this.opts.handlerForForeign,this.unpack=this.opts.unpack||function(t){return!(!com.cognitect.transit.types.isArrayMap(t)||null!==t.backingMap)&&t._entries},this.verbose=this.opts&&this.opts.verbose||!1},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.handler=function(t){var e=this.handlers.get(com.cognitect.transit.handlers.constructor(t));return null!=e?e:(t=t&&t.transitTag)?this.handlers.get(t):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.registerHandler=function(t,e){this.handlers.set(t,e)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitNil=function(t,e){return t?this.emitString(com.cognitect.transit.delimiters.ESC,"_","",t,e):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitString=function(t,e,n,r,o){return t=t+e+n,o?o.write(t,r):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBoolean=function(t,e,n){return e?this.emitString(com.cognitect.transit.delimiters.ESC,"?",t.toString()[0],e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitInteger=function(t,e,n){return 1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","INF",e,n):-1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","-INF",e,n):isNaN(t)?this.emitString(com.cognitect.transit.delimiters.ESC,"z","NaN",e,n):e||"string"==typeof t||t instanceof goog.math.Long?this.emitString(com.cognitect.transit.delimiters.ESC,"i",t.toString(),e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitDouble=function(t,e,n){return e?this.emitString(t.ESC,"d",t,e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBinary=function(t,e,n){return this.emitString(com.cognitect.transit.delimiters.ESC,"b",t,e,n)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitQuoted=function(t,e,n){return t.verbose?((t={})[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,n)]=com.cognitect.transit.impl.writer.marshal(this,e,!1,n),t):[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,n),com.cognitect.transit.impl.writer.marshal(this,e,!1,n)]},com.cognitect.transit.impl.writer.emitObjects=function(t,e,n){var r=[];if(com.cognitect.transit.util.isArray(e))for(var o=0;o<e.length;o++)r.push(com.cognitect.transit.impl.writer.marshal(t,e[o],!1,n));else e.forEach((function(e,o){r.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,n))}));return r},com.cognitect.transit.impl.writer.emitArray=function(t,e,n,r){return com.cognitect.transit.impl.writer.emitObjects(t,e,r)},com.cognitect.transit.impl.writer.isStringableKey=function(t,e){if("string"!=typeof e){var n=t.handler(e);return n&&1===n.tag(e).length}return!0},com.cognitect.transit.impl.writer.stringableKeys=function(t,e){var n=t.unpack(e),r=!0;if(n){for(var o=0;o<n.length&&(r=com.cognitect.transit.impl.writer.isStringableKey(t,n[o]));o+=2);return r}if(e.keys&&(o=null,(n=e.keys()).next)){for(o=n.next();!o.done&&(r=com.cognitect.transit.impl.writer.isStringableKey(t,o.value));)o=n.next();return r}if(e.forEach)return e.forEach((function(e,n){r=r&&com.cognitect.transit.impl.writer.isStringableKey(t,n)})),r;throw Error("Cannot walk keys of object type "+com.cognitect.transit.handlers.constructor(e).name)},com.cognitect.transit.impl.writer.isForeignObject=function(t){if(t.constructor.transit$isObject)return!0;var e="Object"==(e=(e=(e=t.constructor.toString()).substr(9)).substr(0,e.indexOf("(")));return void 0!==Object.defineProperty?Object.defineProperty(t.constructor,"transit$isObject",{value:e,enumerable:!1}):t.constructor.transit$isObject=e,e},com.cognitect.transit.impl.writer.emitMap=function(t,e,n,r){var o=null,i=null,a=null;if(o=null,n=0,e.constructor===Object||null!=e.forEach||t.handlerForForeign&&com.cognitect.transit.impl.writer.isForeignObject(e)){if(t.verbose){if(null!=e.forEach)if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){var c={};e.forEach((function(e,n){c[com.cognitect.transit.impl.writer.marshal(t,n,!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e,!1,r)}))}else{if(o=t.unpack(e),i=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,r),o)for(;n<o.length;n+=2)i.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!1,!1)),i.push(com.cognitect.transit.impl.writer.marshal(t,o[n+1],!1,r));else e.forEach((function(e,n){i.push(com.cognitect.transit.impl.writer.marshal(t,n,!1,!1)),i.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))}));(c={})[a]=i}else for(o=com.cognitect.transit.util.objectKeys(e),c={};n<o.length;n++)c[com.cognitect.transit.impl.writer.marshal(t,o[n],!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e[o[n]],!1,r);return c}if(null!=e.forEach){if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){if(o=t.unpack(e),c=["^ "],o)for(;n<o.length;n+=2)c.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!0,r)),c.push(com.cognitect.transit.impl.writer.marshal(t,o[n+1],!1,r));else e.forEach((function(e,n){c.push(com.cognitect.transit.impl.writer.marshal(t,n,!0,r)),c.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))}));return c}if(o=t.unpack(e),i=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,r),o)for(;n<o.length;n+=2)i.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!1,r)),i.push(com.cognitect.transit.impl.writer.marshal(t,o[n+1],!1,r));else e.forEach((function(e,n){i.push(com.cognitect.transit.impl.writer.marshal(t,n,!1,r)),i.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))}));return[a,i]}for(c=["^ "],o=com.cognitect.transit.util.objectKeys(e);n<o.length;n++)c.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!0,r)),c.push(com.cognitect.transit.impl.writer.marshal(t,e[o[n]],!1,r));return c}if(null!=t.objectBuilder)return t.objectBuilder(e,(function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!0,r)}),(function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!1,r)}));throw n=com.cognitect.transit.handlers.constructor(e).name,(o=Error("Cannot write "+n)).data={obj:e,type:n},o},com.cognitect.transit.impl.writer.emitTaggedMap=function(t,e,n,r,o){return t.verbose?((r={})[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,o)]=com.cognitect.transit.impl.writer.marshal(t,n,!1,o),r):[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,o),com.cognitect.transit.impl.writer.marshal(t,n,!1,o)]},com.cognitect.transit.impl.writer.emitEncoded=function(t,e,n,r,o,i,a){if(1===n.length){if("string"==typeof r)return t.emitString(com.cognitect.transit.delimiters.ESC,n,r,i,a);if(i||t.preferStrings){if((r=t.verbose&&e.getVerboseHandler())?(n=r.tag(o),r=r.stringRep(o,r)):r=e.stringRep(o,e),null!==r)return t.emitString(com.cognitect.transit.delimiters.ESC,n,r,i,a);throw(t=Error('Tag "'+n+'" cannot be encoded as string')).data={tag:n,rep:r,obj:o},t}}return com.cognitect.transit.impl.writer.emitTaggedMap(t,n,r,i,a)},com.cognitect.transit.impl.writer.marshal=function(t,e,n,r){null!==t.transform&&(e=t.transform(e));var o=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null),i=o?o.tag(e):null,a=o?o.rep(e):null;if(null==o||null==i)throw t=com.cognitect.transit.handlers.constructor(e).name,(n=Error("Cannot write "+t)).data={obj:e,type:t},n;switch(i){case"_":return t.emitNil(n,r);case"s":return t.emitString("","",com.cognitect.transit.impl.writer.escape(a),n,r);case"?":return t.emitBoolean(a,n,r);case"i":return t.emitInteger(a,n,r);case"d":return t.emitDouble(a,n,r);case"b":return t.emitBinary(a,n,r);case"'":return t.emitQuoted(t,a,r);case"array":return com.cognitect.transit.impl.writer.emitArray(t,a,n,r);case"map":return com.cognitect.transit.impl.writer.emitMap(t,a,n,r);default:return com.cognitect.transit.impl.writer.emitEncoded(t,o,i,a,e,n,r)}},com.cognitect.transit.impl.writer.maybeQuoted=function(t,e){if(null!=(n=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null)))return 1===n.tag(e).length?com.cognitect.transit.types.quoted(e):e;var n=com.cognitect.transit.handlers.constructor(e).name,r=Error("Cannot write "+n);throw r.data={obj:e,type:n},r},com.cognitect.transit.impl.writer.marshalTop=function(t,e,n,r){return JSON.stringify(com.cognitect.transit.impl.writer.marshal(t,com.cognitect.transit.impl.writer.maybeQuoted(t,e),n,r))},com.cognitect.transit.impl.writer.Writer=function(t,e){this._marshaller=t,this.options=e||{},this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=function(){return this._marshaller},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=com.cognitect.transit.impl.writer.Writer.prototype.marshaller,com.cognitect.transit.impl.writer.Writer.prototype.write=function(t,e){var n=e||{},r=n.asMapKey||!1,o=!this._marshaller.verbose&&this.cache;return n=!1===n.marshalTop?com.cognitect.transit.impl.writer.marshal(this._marshaller,t,r,o):com.cognitect.transit.impl.writer.marshalTop(this._marshaller,t,r,o),null!=this.cache&&this.cache.clear(),n},com.cognitect.transit.impl.writer.Writer.prototype.write=com.cognitect.transit.impl.writer.Writer.prototype.write,com.cognitect.transit.impl.writer.Writer.prototype.register=function(t,e){this._marshaller.registerHandler(t,e)},com.cognitect.transit.impl.writer.Writer.prototype.register=com.cognitect.transit.impl.writer.Writer.prototype.register;var TRANSIT_DEV=!0,TRANSIT_NODE_TARGET=!0,TRANSIT_BROWSER_TARGET=!1,TRANSIT_BROWSER_AMD_TARGET=!1;com.cognitect.transit.reader=function(t,e){if("json"===t||"json-verbose"===t||null==t){var n=new com.cognitect.transit.impl.reader.JSONUnmarshaller(e);return new com.cognitect.transit.impl.reader.Reader(n,e)}throw Error("Cannot create reader of type "+t)},com.cognitect.transit.writer=function(t,e){if("json"===t||"json-verbose"===t||null==t){"json-verbose"===t&&(null==e&&(e={}),e.verbose=!0);var n=new com.cognitect.transit.impl.writer.JSONMarshaller(e);return new com.cognitect.transit.impl.writer.Writer(n,e)}throw(n=Error('Type must be "json"')).data={type:t},n},com.cognitect.transit.makeWriteHandler=function(t){var e=function(){};return e.prototype.tag=t.tag,e.prototype.rep=t.rep,e.prototype.stringRep=t.stringRep,e.prototype.getVerboseHandler=t.getVerboseHandler,new e},com.cognitect.transit.makeBuilder=function(t){var e=function(){};return e.prototype.init=t.init,e.prototype.add=t.add,e.prototype.finalize=t.finalize,e.prototype.fromArray=t.fromArray,new e},com.cognitect.transit.date=com.cognitect.transit.types.date,com.cognitect.transit.integer=com.cognitect.transit.types.intValue,com.cognitect.transit.isInteger=com.cognitect.transit.types.isInteger,com.cognitect.transit.uuid=com.cognitect.transit.types.uuid,com.cognitect.transit.isUUID=com.cognitect.transit.types.isUUID,com.cognitect.transit.bigInt=com.cognitect.transit.types.bigInteger,com.cognitect.transit.isBigInt=com.cognitect.transit.types.isBigInteger,com.cognitect.transit.bigDec=com.cognitect.transit.types.bigDecimalValue,com.cognitect.transit.isBigDec=com.cognitect.transit.types.isBigDecimal,com.cognitect.transit.keyword=com.cognitect.transit.types.keyword,com.cognitect.transit.isKeyword=com.cognitect.transit.types.isKeyword,com.cognitect.transit.symbol=com.cognitect.transit.types.symbol,com.cognitect.transit.isSymbol=com.cognitect.transit.types.isSymbol,com.cognitect.transit.binary=com.cognitect.transit.types.binary,com.cognitect.transit.isBinary=com.cognitect.transit.types.isBinary,com.cognitect.transit.uri=com.cognitect.transit.types.uri,com.cognitect.transit.isURI=com.cognitect.transit.types.isURI,com.cognitect.transit.map=com.cognitect.transit.types.map,com.cognitect.transit.isMap=com.cognitect.transit.types.isMap,com.cognitect.transit.set=com.cognitect.transit.types.set,com.cognitect.transit.isSet=com.cognitect.transit.types.isSet,com.cognitect.transit.list=com.cognitect.transit.types.list,com.cognitect.transit.isList=com.cognitect.transit.types.isList,com.cognitect.transit.quoted=com.cognitect.transit.types.quoted,com.cognitect.transit.isQuoted=com.cognitect.transit.types.isQuoted,com.cognitect.transit.tagged=com.cognitect.transit.types.taggedValue,com.cognitect.transit.isTaggedValue=com.cognitect.transit.types.isTaggedValue,com.cognitect.transit.link=com.cognitect.transit.types.link,com.cognitect.transit.isLink=com.cognitect.transit.types.isLink,com.cognitect.transit.hash=com.cognitect.transit.eq.hashCode,com.cognitect.transit.hashMapLike=com.cognitect.transit.eq.hashMapLike,com.cognitect.transit.hashArrayLike=com.cognitect.transit.eq.hashArrayLike,com.cognitect.transit.equals=com.cognitect.transit.eq.equals,com.cognitect.transit.extendToEQ=com.cognitect.transit.eq.extendToEQ,com.cognitect.transit.mapToObject=function(t){var e={};return t.forEach((function(t,n){if("string"!=typeof n)throw Error("Cannot convert map with non-string keys");e[n]=t})),e},com.cognitect.transit.objectToMap=function(t){var e,n=com.cognitect.transit.map();for(e in t)t.hasOwnProperty(e)&&n.set(e,t[e]);return n},com.cognitect.transit.decoder=com.cognitect.transit.impl.decoder.decoder,com.cognitect.transit.readCache=com.cognitect.transit.caching.readCache,com.cognitect.transit.writeCache=com.cognitect.transit.caching.writeCache,com.cognitect.transit.UUIDfromString=com.cognitect.transit.types.UUIDfromString,com.cognitect.transit.randomUUID=com.cognitect.transit.util.randomUUID,com.cognitect.transit.stringableKeys=com.cognitect.transit.impl.writer.stringableKeys,TRANSIT_BROWSER_TARGET&&(goog.exportSymbol("transit.reader",com.cognitect.transit.reader),goog.exportSymbol("transit.writer",com.cognitect.transit.writer),goog.exportSymbol("transit.makeBuilder",com.cognitect.transit.makeBuilder),goog.exportSymbol("transit.makeWriteHandler",com.cognitect.transit.makeWriteHandler),goog.exportSymbol("transit.date",com.cognitect.transit.types.date),goog.exportSymbol("transit.integer",com.cognitect.transit.types.intValue),goog.exportSymbol("transit.isInteger",com.cognitect.transit.types.isInteger),goog.exportSymbol("transit.uuid",com.cognitect.transit.types.uuid),goog.exportSymbol("transit.isUUID",com.cognitect.transit.types.isUUID),goog.exportSymbol("transit.bigInt",com.cognitect.transit.types.bigInteger),goog.exportSymbol("transit.isBigInt",com.cognitect.transit.types.isBigInteger),goog.exportSymbol("transit.bigDec",com.cognitect.transit.types.bigDecimalValue),goog.exportSymbol("transit.isBigDec",com.cognitect.transit.types.isBigDecimal),goog.exportSymbol("transit.keyword",com.cognitect.transit.types.keyword),goog.exportSymbol("transit.isKeyword",com.cognitect.transit.types.isKeyword),goog.exportSymbol("transit.symbol",com.cognitect.transit.types.symbol),goog.exportSymbol("transit.isSymbol",com.cognitect.transit.types.isSymbol),goog.exportSymbol("transit.binary",com.cognitect.transit.types.binary),goog.exportSymbol("transit.isBinary",com.cognitect.transit.types.isBinary),goog.exportSymbol("transit.uri",com.cognitect.transit.types.uri),goog.exportSymbol("transit.isURI",com.cognitect.transit.types.isURI),goog.exportSymbol("transit.map",com.cognitect.transit.types.map),goog.exportSymbol("transit.isMap",com.cognitect.transit.types.isMap),goog.exportSymbol("transit.set",com.cognitect.transit.types.set),goog.exportSymbol("transit.isSet",com.cognitect.transit.types.isSet),goog.exportSymbol("transit.list",com.cognitect.transit.types.list),goog.exportSymbol("transit.isList",com.cognitect.transit.types.isList),goog.exportSymbol("transit.quoted",com.cognitect.transit.types.quoted),goog.exportSymbol("transit.isQuoted",com.cognitect.transit.types.isQuoted),goog.exportSymbol("transit.tagged",com.cognitect.transit.types.taggedValue),goog.exportSymbol("transit.isTaggedValue",com.cognitect.transit.types.isTaggedValue),goog.exportSymbol("transit.link",com.cognitect.transit.types.link),goog.exportSymbol("transit.isLink",com.cognitect.transit.types.isLink),goog.exportSymbol("transit.hash",com.cognitect.transit.eq.hashCode),goog.exportSymbol("transit.hashMapLike",com.cognitect.transit.eq.hashMapLike),goog.exportSymbol("transit.hashArrayLike",com.cognitect.transit.eq.hashArrayLike),goog.exportSymbol("transit.equals",com.cognitect.transit.eq.equals),goog.exportSymbol("transit.extendToEQ",com.cognitect.transit.eq.extendToEQ),goog.exportSymbol("transit.mapToObject",com.cognitect.transit.mapToObject),goog.exportSymbol("transit.objectToMap",com.cognitect.transit.objectToMap),goog.exportSymbol("transit.decoder",com.cognitect.transit.impl.decoder.decoder),goog.exportSymbol("transit.UUIDfromString",com.cognitect.transit.types.UUIDfromString),goog.exportSymbol("transit.randomUUID",com.cognitect.transit.util.randomUUID),goog.exportSymbol("transit.stringableKeys",com.cognitect.transit.impl.writer.stringableKeys),goog.exportSymbol("transit.readCache",com.cognitect.transit.caching.readCache),goog.exportSymbol("transit.writeCache",com.cognitect.transit.caching.writeCache)),TRANSIT_NODE_TARGET&&(module.exports={reader:com.cognitect.transit.reader,writer:com.cognitect.transit.writer,makeBuilder:com.cognitect.transit.makeBuilder,makeWriteHandler:com.cognitect.transit.makeWriteHandler,date:com.cognitect.transit.types.date,integer:com.cognitect.transit.types.intValue,isInteger:com.cognitect.transit.types.isInteger,uuid:com.cognitect.transit.types.uuid,isUUID:com.cognitect.transit.types.isUUID,bigInt:com.cognitect.transit.types.bigInteger,isBigInt:com.cognitect.transit.types.isBigInteger,bigDec:com.cognitect.transit.types.bigDecimalValue,isBigDec:com.cognitect.transit.types.isBigDecimal,keyword:com.cognitect.transit.types.keyword,isKeyword:com.cognitect.transit.types.isKeyword,symbol:com.cognitect.transit.types.symbol,isSymbol:com.cognitect.transit.types.isSymbol,binary:com.cognitect.transit.types.binary,isBinary:com.cognitect.transit.types.isBinary,uri:com.cognitect.transit.types.uri,isURI:com.cognitect.transit.types.isURI,map:com.cognitect.transit.types.map,isMap:com.cognitect.transit.types.isMap,set:com.cognitect.transit.types.set,isSet:com.cognitect.transit.types.isSet,list:com.cognitect.transit.types.list,isList:com.cognitect.transit.types.isList,quoted:com.cognitect.transit.types.quoted,isQuoted:com.cognitect.transit.types.isQuoted,tagged:com.cognitect.transit.types.taggedValue,isTaggedValue:com.cognitect.transit.types.isTaggedValue,link:com.cognitect.transit.types.link,isLink:com.cognitect.transit.types.isLink,hash:com.cognitect.transit.eq.hashCode,hashArrayLike:com.cognitect.transit.eq.hashArrayLike,hashMapLike:com.cognitect.transit.eq.hashMapLike,equals:com.cognitect.transit.eq.equals,extendToEQ:com.cognitect.transit.eq.extendToEQ,mapToObject:com.cognitect.transit.mapToObject,objectToMap:com.cognitect.transit.objectToMap,decoder:com.cognitect.transit.impl.decoder.decoder,UUIDfromString:com.cognitect.transit.types.UUIDfromString,randomUUID:com.cognitect.transit.util.randomUUID,stringableKeys:com.cognitect.transit.impl.writer.stringableKeys,readCache:com.cognitect.transit.caching.readCache,writeCache:com.cognitect.transit.caching.writeCache})}).call(this,__webpack_require__(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/uuid/lib/bytesToUuid.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!
  \**********************************************/
/*! no static exports found */function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},"./node_modules/uuid/lib/rng-browser.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/rng-browser.js ***!
  \**********************************************/
/*! no static exports found */function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},"./node_modules/uuid/v4.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v4.js ***!
  \*********************************/
/*! no static exports found */function(t,e,n){var r=n(/*! ./lib/rng */"./node_modules/uuid/lib/rng-browser.js"),o=n(/*! ./lib/bytesToUuid */"./node_modules/uuid/lib/bytesToUuid.js");t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var c=0;c<16;++c)e[i+c]=a[c];return e||o(a)}},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"./src/automerge.js":
/*!**************************!*\
  !*** ./src/automerge.js ***!
  \**************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(/*! transit-immutable-js */"./node_modules/transit-immutable-js/index.js"),i=n(/*! ./uuid */"./src/uuid.js"),a=n(/*! ../frontend */"./frontend/index.js"),c=n(/*! ../backend */"./backend/index.js"),s=n(/*! ./common */"./src/common.js").isObject;function u(t,e){var n=l(t),o=c.applyChanges(c.init(),e),i=r(o,2),s=i[0],u=(i[1],c.getPatch(s));return u.state=s,a.applyPatch(n,u)}function l(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!s(t))throw new TypeError("Unsupported options for init(): "+t);return a.init(Object.assign({backend:c},t))}function f(t,e,n){var o=a.change(t,e,n),i=r(o,2),c=i[0];return i[1],c}function g(t,e){var n=a.getBackendState(t),r=a.getBackendState(e);return c.getChanges(n,r)}t.exports={init:l,from:function(t,e){return f(l(e),{message:"Initialization",undoable:!1},(function(e){return Object.assign(e,t)}))},change:f,emptyChange:function(t,e){var n=a.emptyChange(t,e),o=r(n,2),i=o[0];return o[1],i},undo:function(t,e){var n=a.undo(t,e),o=r(n,2),i=o[0];return o[1],i},redo:function(t,e){var n=a.redo(t,e),o=r(n,2),i=o[0];return o[1],i},load:function(t,e){return u(e,o.fromJSON(t))},save:function(t){var e=a.getBackendState(t);return o.toJSON(e.getIn(["opSet","history"]).concat(e.getIn(["opSet","queue"])))},merge:function(t,e){if(a.getActorId(t)===a.getActorId(e))throw new RangeError("Cannot merge an actor with itself");var n=a.getBackendState(t),o=a.getBackendState(e),i=c.merge(n,o),s=r(i,2),u=s[0],l=s[1];return 0===l.diffs.length?t:(l.state=u,a.applyPatch(t,l))},diff:function(t,e){var n=a.getBackendState(t),o=a.getBackendState(e),i=c.getChanges(n,o),s=c.applyChanges(n,i),u=r(s,2);return u[0],u[1].diffs},getChanges:g,getAllChanges:function(t){return g(l(),t)},applyChanges:function(t,e){var n=a.getBackendState(t),o=c.applyChanges(n,e),i=r(o,2),s=i[0],u=i[1];return u.state=s,a.applyPatch(t,u)},getMissingDeps:function(t){return c.getMissingDeps(a.getBackendState(t))},equals:function t(e,n){if(!s(e)||!s(n))return e===n;var r=Object.keys(e).sort(),o=Object.keys(n).sort();if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++){if(r[i]!==o[i])return!1;if(!t(e[r[i]],n[o[i]]))return!1}return!0},getHistory:function(t){var e=a.getBackendState(t),n=a.getActorId(t),r=e.getIn(["opSet","history"]);return r.map((function(t,e){return{get change(){return t.toJS()},get snapshot(){return u(n,r.slice(0,e+1))}}})).toArray()},uuid:i,Frontend:a,Backend:c,DocSet:n(/*! ./doc_set */"./src/doc_set.js"),WatchableDoc:n(/*! ./watchable_doc */"./src/watchable_doc.js"),Connection:n(/*! ./connection */"./src/connection.js")};for(var p=["canUndo","canRedo","getObjectId","getObjectById","getActorId","setActorId","getConflicts","Text","Table","Counter"],d=0;d<p.length;d++){var h=p[d];t.exports[h]=a[h]}},"./src/common.js":
/*!***********************!*\
  !*** ./src/common.js ***!
  \***********************/
/*! no static exports found */function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t}t.exports={ROOT_ID:"00000000-0000-0000-0000-000000000000",isObject:o,copyObject:function(t){if(!o(t))return{};var e={},n=!0,r=!1,i=void 0;try{for(var a,c=Object.keys(t)[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var s=a.value;e[s]=t[s]}}catch(t){r=!0,i=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}return e},lessOrEqual:function(t,e){return t.keySeq().concat(e.keySeq()).reduce((function(n,r){return n&&t.get(r,0)<=e.get(r,0)}),!0)},parseElemId:function(t){var e=/^(.*):(\d+)$/.exec(t||"");if(!e)throw new RangeError("Not a valid elemId: "+t);return{counter:parseInt(e[2]),actorId:e[1]}}}},"./src/connection.js":
/*!***************************!*\
  !*** ./src/connection.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),i=o.Map,a=o.fromJS,c=n(/*! ./common */"./src/common.js").lessOrEqual,s=n(/*! ../frontend */"./frontend/index.js"),u=n(/*! ../backend */"./backend/index.js");function l(t,e,n){return n=t.get(e,i()).mergeWith((function(t,e){return Math.max(t,e)}),n),t.set(e,n)}var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._docSet=e,this._sendMsg=n,this._theirClock=i(),this._ourClock=i(),this._docChangedHandler=this.docChanged.bind(this)}return r(t,[{key:"open",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this._docSet.docIds[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;this.docChanged(i,this._docSet.getDoc(i))}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}this._docSet.registerHandler(this._docChangedHandler)}},{key:"close",value:function(){this._docSet.unregisterHandler(this._docChangedHandler)}},{key:"sendMsg",value:function(t,e,n){var r={docId:t,clock:e.toJS()};this._ourClock=l(this._ourClock,t,e),n&&(r.changes=n),this._sendMsg(r)}},{key:"maybeSendChanges",value:function(t){var e=this._docSet.getDoc(t),n=s.getBackendState(e),r=n.getIn(["opSet","clock"]);if(this._theirClock.has(t)){var o=u.getMissingChanges(n,this._theirClock.get(t));if(o.length>0)return this._theirClock=l(this._theirClock,t,r),void this.sendMsg(t,r,o)}r.equals(this._ourClock.get(t,i()))||this.sendMsg(t,r)}},{key:"docChanged",value:function(t,e){var n=s.getBackendState(e).getIn(["opSet","clock"]);if(!n)throw new TypeError("This object cannot be used for network sync. Are you trying to sync a snapshot from the history?");if(!c(this._ourClock.get(t,i()),n))throw new RangeError("Cannot pass an old state object to a connection");this.maybeSendChanges(t)}},{key:"receiveMsg",value:function(t){return t.clock&&(this._theirClock=l(this._theirClock,t.docId,a(t.clock))),t.changes?this._docSet.applyChanges(t.docId,a(t.changes)):(this._docSet.getDoc(t.docId)?this.maybeSendChanges(t.docId):this._ourClock.has(t.docId)||this.sendMsg(t.docId,i()),this._docSet.getDoc(t.docId))}}]),t}();t.exports=f},"./src/doc_set.js":
/*!************************!*\
  !*** ./src/doc_set.js ***!
  \************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),a=i.Map,c=i.Set,s=(n(/*! ./uuid */"./src/uuid.js"),n(/*! ../frontend */"./frontend/index.js")),u=n(/*! ../backend */"./backend/index.js"),l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.docs=a(),this.handlers=c()}return o(t,[{key:"getDoc",value:function(t){return this.docs.get(t)}},{key:"removeDoc",value:function(t){this.docs=this.docs.delete(t)}},{key:"setDoc",value:function(t,e){this.docs=this.docs.set(t,e),this.handlers.forEach((function(n){return n(t,e)}))}},{key:"applyChanges",value:function(t,e){var n=this.docs.get(t)||s.init({backend:u}),o=s.getBackendState(n),i=u.applyChanges(o,e),a=r(i,2),c=a[0],l=a[1];return l.state=c,n=s.applyPatch(n,l),this.setDoc(t,n),n}},{key:"registerHandler",value:function(t){this.handlers=this.handlers.add(t)}},{key:"unregisterHandler",value:function(t){this.handlers=this.handlers.remove(t)}},{key:"docIds",get:function(){return this.docs.keys()}}]),t}();t.exports=l},"./src/uuid.js":
/*!*********************!*\
  !*** ./src/uuid.js ***!
  \*********************/
/*! no static exports found */function(t,e,n){"use strict";var r=n(/*! uuid/v4 */"./node_modules/uuid/v4.js"),o=r;function i(){return o()}i.setFactory=function(t){return o=t},i.reset=function(){return o=r},t.exports=i},"./src/watchable_doc.js":
/*!******************************!*\
  !*** ./src/watchable_doc.js ***!
  \******************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js").Set,a=n(/*! ../frontend */"./frontend/index.js"),c=n(/*! ../backend */"./backend/index.js"),s=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("doc argument is required");this.doc=e,this.handlers=i()}return o(t,[{key:"get",value:function(){return this.doc}},{key:"set",value:function(t){this.doc=t,this.handlers.forEach((function(e){return e(t)}))}},{key:"applyChanges",value:function(t){var e=a.getBackendState(this.doc),n=c.applyChanges(e,t),o=r(n,2),i=o[0],s=o[1];s.state=i;var u=a.applyPatch(this.doc,s);return this.set(u),u}},{key:"registerHandler",value:function(t){this.handlers=this.handlers.add(t)}},{key:"unregisterHandler",value:function(t){this.handlers=this.handlers.remove(t)}}]),t}();t.exports=s}})},module.exports=factory()},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([o]).join("\n")}var a,c,s;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},function(t,e,n){"use strict";n.r(e),n.d(e,"bake",(function(){return c})),n.d(e,"circle",(function(){return u})),n.d(e,"circleCall",(function(){return l})),n.d(e,"rectangle",(function(){return f})),n.d(e,"rectangleCall",(function(){return g}));var r=n(0),o=n(4);function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){switch(t.primType){case"polyline":return s(r.state.scene.editItems.find((function(e){return e.id===t.prim})),t);case"polygon":return function(t,e){var n=o.getFragStub(t.type,!1),r=e.uniforms.u_eTex;return n=function(t,e,n){var r=e.indexOf("//$INSERT FUNCTION$------");r+="//$INSERT FUNCTION$------".length;var o=e.slice(0,r),a=e.slice(r),c="//$START-"+t.id,s=e.indexOf(c);if(s>=0){o=e.slice(0,s);var u="//$END-"+t.id,l=e.indexOf(u);l+=u.length,a=e.slice(l)}var f="\n";f+="//$START-"+t.id+"\n";var g=0,p=0,d=1/(n.dataSize*n.dataSize)*.5,h=n.dataSize;f+="vec4 "+t.id+"(vec2 uv, vec2 p) {",f+="\n\tvec2 tUv = uv - p;\n";var m,y=0,v=i(t.pts);try{for(v.s();!(m=v.n()).done;){m.value;0!=y?(g=y%h/h+d,p=Math.floor(y/h)/h+d,f+="\n\tindex = vec2("+g+","+p+");\n",f+="\tpos = texture(u_eTex, index).xy;\n",f+="\te = oldPos - pos;\n",f+="\tw = tUv - pos;\n",f+="\tb = w - e*clamp( dot(w,e)/dot(e,e), 0.0, 1.0 );\n",f+="\td = min(d, dot(b,b));\n",f+="\tcond = bvec3( tUv.y>=pos.y, tUv.y<oldPos.y, e.x*w.y>e.y*w.x );\n",f+="\tif(all(cond) || all(not(cond))) s*=-1.0;\n",f+="\toldPos = pos;\n",y++):(g=y%h/h+d,p=Math.floor(y/h)/h+d,f+="\n\tvec2 pos = vec2(0.0);",f+="\n\tfloat accumD = 100.0;",f+="\n\tvec2 index = vec2("+g+","+p+");\n",f+="\tvec2 first = texture(u_eTex, index).xy;\n",g=n.cTexel%h/h+d,p=Math.floor(n.cTexel/h)/h+d,f+="\n\tindex = vec2("+g+","+p+");\n",f+="\tvec2 last = texture(u_eTex, index).xy;\n",f+="\tfloat d = dot(tUv - first, tUv - first);\n",f+="\tfloat s = 1.0;\n",f+="\tvec2 oldPos = first;\n",f+="\tvec2 e = last - first;\n",f+="\tvec2 w = tUv - first;\n",f+="\tvec2 b = w - e*clamp( dot(w,e)/dot(e,e), 0.0, 1.0 );\n",f+="\td = min(d, dot(b,b));\n",f+="\tbvec3 cond = bvec3( tUv.y>=first.y, tUv.y<last.y, e.x*w.y>e.y*w.x );\n",f+="\tif(all(cond) || all(not(cond))) s*=-1.0;\n",y++)}}catch(t){v.e(t)}finally{v.f()}return f+="\td = s*sqrt(d);\n",f+="\treturn vec4(d);\n",f+="\n}\n",f+="//$END-"+t.id+"\n",(o+=f)+a}(t,n,r),n=function(t,e){var n=e.indexOf("//$INSERT CALL$------");n+="//$INSERT CALL$------".length;var r=e.slice(0,n),o=e.slice(n),i="\n";return i+="\t colDist = "+t.id+" (uv, vec2(0.0,0.0));\n",(r+=i)+o}(t,n)}(r.state.scene.editItems.find((function(e){return e.id===t.prim})),t);case"circle":return u(r.state.scene.editItems.find((function(e){return e.id===t.prim})),t);case"rectangle":return f(r.state.scene.editItems.find((function(e){return e.id===t.prim})),t);default:return s(r.state.scene.editItems.find((function(e){return e.id===t.prim})),t)}}function s(t,e){var n=o.getFragStub(t.type,!1);return n=function(t,e){var n=e.indexOf("//$INSERT CALL$------");n+="//$INSERT CALL$------".length;var r=e.slice(0,n),o=e.slice(n),i="\n";return i+="\t colDist = "+t.id+"(uv, vec2(0.0,0.0));\n",(r+=i)+o}(t,n=function(t,e,n){var r=e.indexOf("//$INSERT FUNCTION$------");r+="//$INSERT FUNCTION$------".length;var o=e.slice(0,r),a=e.slice(r),c="//$START-"+t.id,s=e.indexOf(c);if(s>=0){o=e.slice(0,s);var u="//$END-"+t.id,l=e.indexOf(u);l+=u.length,a=e.slice(l)}var f="\n";f+="//$START-"+t.id+"\n",f+="vec4 "+t.id+"(vec2 uv, vec2 p) {",f+="\n\tvec2 tUv = uv - p;";var g,p=0,d=0,h=1/(n.dataSize*n.dataSize)*.5,m=n.dataSize,y=0,v=i(t.pts);try{for(v.s();!(g=v.n()).done;){g.value;0!=y?(p=y%m/m+h,d=Math.floor(y/m)/m+h,f+="\n\tindex = vec2("+p+","+d+");",f+="\n\tpos = texture(u_eTex, index).xy;",f+="\n\td = drawLine(tUv, oldPos, pos, u_weight, 0.0);",f+="\n\taccumD = min(accumD, d);",f+="\n\toldPos = pos;",y++):(p=y%m/m+h,d=Math.floor(y/m)/m+h,f+="\n\tvec3 finalColor = vec3(1.0);",f+="\n\tvec2 pos = vec2(0.0);",f+="\n\tfloat d = 0.0;",f+="\n\tfloat accumD = 100.0;",f+="\n\tvec2 index = vec2("+p+","+d+");",f+="\n\tvec2 oldPos = texture(u_eTex, index).xy;",y++)}}catch(t){v.e(t)}finally{v.f()}return f+="\n\taccumD = line(accumD, u_weight);\n",f+="\n\tfinalColor = mix(finalColor, u_stroke, accumD);",f+="\n\treturn vec4(finalColor, accumD);",f+="\n}\n",f+="//$END-"+t.id+"\n",(o+=f)+a}(t,n,e.uniforms.u_eTex))}function u(t,e){return l(t,e)}function l(t,e){var n=o.getFragStub(t.type,!1),r=e.uniforms.u_eTex,i=e.uniforms.u_eTex.dataSize,a=1/(r.dataSize*r.dataSize)*.5,c=n.indexOf("//$INSERT CALL$------");c+="//$INSERT CALL$------".length;var s=n.slice(0,c),u=n.slice(c),l="\n",f=0%i/i+a,g=Math.floor(0/i)/i+a;return l+="\tvec2 pos = vec2("+f+", "+g+");\n",l+="\tvec2 rad = vec2("+(f=1%i/i+a)+", "+(g=Math.floor(1/i)/i+a)+");\n",l+="\tfloat radius = distance(texture(u_eTex, pos).xy, texture(u_eTex, rad).xy);\n",l+="\tfloat d = sdCircle(uv, texture(u_eTex, pos).xy, radius);\n",l+="\tfloat stroke = line(d, u_weight);\n",l+="\tvec4 strokeCol = mix(vec4(vec3(1.),0.), vec4(u_stroke,stroke) , stroke);\n",l+="\tfloat fill = fillMask(d);",l+="\tvec4 fillCol = mix(vec4(vec3(1.),0.), vec4(u_fill, u_opacity), fill);\n",l+="\td = min(stroke, fill);\n",l+="\tif ( d > 1.) discard;\n",(s+=l+="\toutColor = vec4(vec3(fillCol.rgb * strokeCol.rgb), fillCol.a + strokeCol.a);\n")+u}function f(t,e){return g(t,e)}function g(t,e){var n=o.getFragStub(t.type,!1),r=e.uniforms.u_eTex,i=e.uniforms.u_eTex.dataSize,a=1/(r.dataSize*r.dataSize)*.5,c=n.indexOf("//$INSERT CALL$------");c+="//$INSERT CALL$------".length;var s=n.slice(0,c),u=n.slice(c),l="\n",f=0%i/i+a,g=Math.floor(0/i)/i+a,p=f+", "+g;l+="\tvec2 rect1 = texture(u_eTex, vec2("+p+")).xy;\n",l+="\tvec2 rect2 = texture(u_eTex, vec2("+(p=(f=1%i/i+a)+", "+(g=Math.floor(1/i)/i+a))+")).xy;\n",l+="\tvec2 center = 0.5 * (rect2 - rect1) + rect1;\n",l+="\tvec2 rPt = abs(rect2 - center);\n",l+="\tfloat d = sdBox(uv, center, rPt, u_radius);\n",l+="\tfloat stroke = line(d, u_weight);\n",l+="\tvec4 strokeCol = mix(vec4(vec3(1.),0.), vec4(u_stroke,stroke) , stroke);\n",l+="\tfloat fill = fillMask(d);",l+="\tvec4 fillCol = mix(vec4(vec3(1.),0.), vec4(u_fill, u_opacity), fill);\n",l+="\td = min(stroke, fill);\n",l+="\tif ( d > 1.) discard;\n";var d=(s+=l+="\toutColor = vec4(vec3(fillCol.rgb * strokeCol.rgb), fillCol.a + strokeCol.a);\n")+u;return console.log(l),d}},function(t,e,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function c(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],u=n[s]||0,l="".concat(s," ").concat(u);n[s]=u+1;var f=c(l),g={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(a[f].references++,a[f].updater(g)):a.push({identifier:l,updater:m(g,e),references:1}),r.push(l)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,f=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function g(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function p(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var d=null,h=0;function m(t,e){var n,r,o;if(e.singleton){var i=h++;n=d||(d=u(e)),r=g.bind(null,n,i,!1),o=g.bind(null,n,i,!0)}else n=u(e),r=p.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=c(n[r]);a[o].references--}for(var i=s(t,e),u=0;u<n.length;u++){var l=c(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=i}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"GhostUI",(function(){return d}));var r=n(7),o=n(0),i=n(2),a=n(4),c=n(5),s=n(1);function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}var d=function(){function t(){function e(){var t=new Uint32Array([287454020]),e=new Uint8Array(t.buffer);return 68===e[0]?"Little Endian":17===e[0]?"Big Endian":"Maybe mixed-endian?"}switch(f(this,t),this.endD=!1,e()){case"Little Endian":this.endD=!0;break;case"Big Endian":this.endD=!1;break;case"Maybe mixed-endian?":default:this.endD=!0}console.log(e());var n={currEditItem:"PolyLine",strokeColor:"#0063ae",filter:"None",weight:.003,stroke:s.k.create(0,0,0),fill:s.k.create(0,.384,.682),fillToggle:!1,radius:.125,grid:!0,points:!1},r=new j("Return Home","view","h",{act:i.uiTargetHome(!0)},!0,{}),o=new j("Screenshot","export","l",{act:i.statusRaster(!0)},!0,{}),a=new j("Snap Point","snap","p",{act:i.cursorSnapPt()},!1,{}),c=new j("Snap Ref","snap","s",{act:i.cursorSnapRef()},!1,{}),u=[new j("Snap Global","snap","Shift",{act:i.cursorSnapGlobal()},!1,{}),c,new j("Snap Grid","snap","g",{act:i.cursorSnapGrid()},!1,{}),a,new j("End Draw","edit","Enter",{clck:E,update:A},!0,{exit:!1}),new j("Esc Draw","edit","Escape",{clck:k,update:O},!0,{exit:!1})];u=[r,o].concat(u);var l=[r,o],g=new T("draw",u,b,_,w,{mv:x,up:S},n);new T("select",l,h,m,y,{mv:v});return this.modeStack=new I(g,5),this.modeStack.curr().enter(),document.querySelector("#canvasContainer").addEventListener("mouseup",this.mouseUp.bind(this)),document.querySelector("#canvasContainer").addEventListener("mousemove",this.mouseMove.bind(this)),this.cntlPressed=!1,this.zPressed=!1,window.addEventListener("keyup",this.keyUp.bind(this)),window.addEventListener("keydown",this.keyDown.bind(this)),this}return p(t,[{key:"saveDataTUint8",value:function(t,e,n,r){var o=document.createElement("canvas");o.width=n,o.height=r;var i=o.getContext("2d"),a=i.createImageData(n,r);a.data.set(t),i.putImageData(a,0,0);var c=new Image;c.src=o.toDataURL();var s=document.getElementById("downloadAnchorElem");s.setAttribute("href",c.src),s.setAttribute("download",e),s.click()}},{key:"update",value:function(){var t=this.modeStack.curr();if(t.update&&(0==t.toggle&&(t=this.modeStack.undo()).enter(),o.state.ui.targeting&&(s.k.distanceSq(o.state.ui.target,o.dPt)>1e-5?s.k.lerp(o.dPt,o.state.ui.target,.1,o.dPt):o.store.dispatch(i.uiTargetHome(!1))),"exit"==t.update())){var e=[pauseShader,hideGrid,screenshot],n=new T("select",e,h,m,y,{mv:v});this.modeStack.push(n),this.modeStack.curr().enter()}}},{key:"mouseUp",value:function(t){var e=this.modeStack.curr();if(e.up)e.up(t)}},{key:"mouseMove",value:function(t){var e=o.resolution,n=o.gl.canvas.getBoundingClientRect(),r={x:t.clientX-n.left,y:t.clientY-n.top};r.x=r.x/e.x*(e.x/e.y)-o.dPt[0],r.y=r.y/e.y-o.dPt[1],r.x=r.x*(o.dPt[2]/64),r.y=r.y*(o.dPt[2]/64),o.store.dispatch(i.cursorSet({x:r.x,y:r.y}));var a=this.modeStack.curr();if(a.mv)a.mv(t)}},{key:"keyUp",value:function(t){var e=t.key;"z"==e?this.zPressed=!1:("Meta"==e||"Control"==e)&&(this.cntlPressed=!1);var n,r=u(this.modeStack.curr().modifiers);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.keyCut==e)o.clck()}}catch(t){r.e(t)}finally{r.f()}}},{key:"keyDown",value:function(t){var e=t.key;"z"==e?this.zPressed=!0:("Meta"==e||"Control"==e)&&(this.cntlPressed=!0),this.zPressed&&this.cntlPressed&&(this.zPressed=!1,console.log("Control Z!"))}}]),t}();function h(){r.pushModeHint(this.name,"Select Mode!"),r.modButtonStack()}function m(){console.log(this)}function y(){}function v(){}function b(){r.pushModeHint(this.name,"Begin Drawing!"),this.initUIModeButtons(),this.modifiers.find((function(t){return"Snap Point"==t.name})).clck()}function _(){r.snackHint("End Drawing!")}function w(){if(null!=this.options.currEditItem){var t=document.getElementById("primitive-select");if(o.state.scene.editItems[o.state.scene.editItem].type!=t.value){var e,n,r=o.state.scene.editItems[o.state.scene.editItem];if(r&&r.pts.length>1){Object(a.bakeLayer)(o.layers[o.layers.length-1]);var s=o.state.scene.editItems[o.state.scene.editItem];o.store.dispatch(i.scenePushEditItem(s.type))}else o.layers.pop(),o.store.dispatch(i.sceneNewEditItem(t.value));e=o.state.scene.editItems[o.state.scene.editItem],n=Object(a.createEditLayer)(e),o.layers.push(n)}t=document.getElementById("strokeColor-select");var l=c(t.value).hex();c(o.state.ui.properties.stroke).hex()!=l&&o.store.dispatch(i.drawStroke(c(l).hex())),t=document.getElementById("fillColor-select"),l=c(t.value).hex(),c(o.state.ui.properties.stroke).hex()!=l&&o.store.dispatch(i.drawFill(c(l).hex())),t=document.getElementById("strokeWeight-range"),o.state.ui.properties.weight!=t.value/1e4&&o.store.dispatch(i.drawWeight(t.value/1e4)),t=document.getElementById("opacity-range"),o.state.ui.properties.radius!=t.value/100&&o.store.dispatch(i.drawOpacity(t.value/100)),t=document.getElementById("radius-range"),o.state.ui.properties.radius!=t.value/250&&(o.store.dispatch(i.drawRadius(t.value/250)),o.store.dispatch(i.sceneEditProps()));var f,g=u(this.modifiers);try{for(g.s();!(f=g.n()).done;){var p=f.value;if(p.update){p.update();if(p.options.exit&&1==p.options.exit)return this.exit(),"exit"}}}catch(t){g.e(t)}finally{g.f()}}else this.exit()}function x(t){var e,n=u(this.modifiers);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.mv&&r.toggle&&!r.update)r.mv(t,this.options)}}catch(t){n.e(t)}finally{n.f()}}function S(t){var e,n=u(this.modifiers);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.up)r.up(t)}}catch(t){n.e(t)}finally{n.f()}var c=o.layers[o.layers.length-1],s=c.uniforms.u_eTex.addPoint(o.mPt,o.state.scene.editItems[o.state.scene.editItem].id);o.store.dispatch(i.sceneAddPt(s));var l=o.state.scene.editItems[o.state.scene.editItem];if(("circle"==l.type||"rectangle"==l.type)&&2==l.pts.length){Object(a.bakeLayer)(c),o.store.dispatch(i.scenePushEditItem(l.type));var f=o.state.scene.editItems[o.state.scene.editItem],g=Object(a.createEditLayer)(f);o.layers.push(g)}}function E(){this.toggle=!this.toggle,r.pulseActive(this)}function k(){this.toggle=!this.toggle,r.pulseActive(this)}function A(){if(!this.toggle)return null;if(!(o.state.scene.editItems[o.state.scene.editItem].pts.length<1)){var t=o.layers[o.layers.length-1];Object(a.bakeLayer)(t);var e=o.state.scene.editItems[o.state.scene.editItem];o.store.dispatch(i.scenePushEditItem(e.type));var n=Object(a.createEditLayer)(o.state.scene.editItems[o.state.scene.editItem]);o.layers.push(n),this.toggle=!this.toggle}}function O(){if(!this.toggle)return null;var t,e=o.layers.pop(),n=u(e.uniforms.u_eTex.pts);try{for(n.s();!(t=n.n()).done;){var r=t.value;o.store.dispatch(i.sceneRmvPt(r))}}catch(t){n.e(t)}finally{n.f()}o.store.dispatch(i.sceneRmvItem(e.prim)),o.store.dispatch(i.sceneNewEditItem(e.primType)),o.layers.push(Object(a.createEditLayer)(o.state.scene.editItems[o.state.scene.editItem])),this.toggle=!this.toggle}var I=function(){function t(e,n){f(this,t),this.MAX=n||10,this.index=0,this.stack=[],this.stack[0]=e,this.firstIndex=0;for(var r=1;r<this.MAX;r++)this.stack.push(null)}return p(t,[{key:"curr",value:function(){return this.stack[this.index]}},{key:"modCurr",value:function(t){this.stack[this.index]=t}},{key:"push",value:function(t){var e;e=t.clone?t.clone():t,this.incrementIndex(),this.stack[this.index]=e}},{key:"undo",value:function(){return this.index==this.firstIndex||this.decrementIndex(),this.curr()}},{key:"redo",value:function(){return this.incrementIndex(),this.curr()}},{key:"incrementIndex",value:function(){this.index++,this.index=this.index%this.MAX,this.index==this.firstIndex&&(this.firstIndex++,this.firstIndex=this.firstIndex%this.MAX)}},{key:"decrementIndex",value:function(){this.index-=1,this.index<0&&(this.index=9)}}]),t}(),T=function(){function t(e,n,r,o,i,a,c){f(this,t),this.name=e,this.modifiers=n,this.enter=r.bind(this),this.exit=o.bind(this),this.update=i.bind(this),this.toggle=!0,a.mv&&(this.mv=a.mv),a.up&&(this.up=a.up),a.dwn&&(this.dwn=a.dwn),a.scrll&&(this.scrll=a.scrll),this.options=c||{factor:1}}return p(t,[{key:"initUIModeButtons",value:function(){var t,e=[],n=u(this.modifiers);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.includes(o.tag)||(e.push(o.tag),r.addButtonHeading(o));var i=o.addButton();o.button=i}}catch(t){n.e(t)}finally{n.f()}}}]),t}(),j=function(){function t(e,n,r,o,i,a,c){if(f(this,t),this.name=e,this.tag=n,this.keyCut=r,this.toggle=!1,o.update&&(this.update=o.update),o.act&&(this.act=o.act,this.clck=this.dispatch),o.clck&&(this.clck=o.clck.bind(this)),o.mv&&(this.mv=o.mv.bind(this)),o.up&&(this.up=o.up.bind(this)),o.dwn&&(this.dwn=o.dwn.bind(this)),o.scrll&&(this.scrll=o.scrll.bind(this)),this.pulse="boolean"==typeof i&&i,this.options=a||{},this.elem=c||"",""!=this.elem){this.innerHTML=this.elem.innerHTML;var s=window.getComputedStyle(elem);this.top=s.getPropertyValue("top"),this.left=s.getPropertyValue("left"),elem.onclick=this.clck}}return p(t,[{key:"addButton",value:function(){var t=r.addButtonHint(this);this.elem=t,this.innerHTML=this.elem.innerHTML;var e=window.getComputedStyle(this.elem);this.top=e.getPropertyValue("top"),this.left=e.getPropertyValue("left"),t.onclick=this.clck}},{key:"dispatch",value:function(){o.store.dispatch(this.act),this.pulse?r.pulseActive(this):r.toggleActive(this)}}]),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"reducer",(function(){return w}));var r=n(3),o=n(2),i=n(1),a=n(0),c=n(8);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={resolution:new r.vec(0,0),shaderUpdate:!1,raster:!1,export:!1},g={drawing:!0,properties:u({},r.propsDefault),pause:!1,grid:!1,points:!1,drag:!1,target:i.k.create(0,0,64),targeting:!1},p={pos:new r.vec(0,0),snapPt:!1,snapGlobal:!1,snapGlobalAngle:45,snapGrid:!1,snapRef:!1,snapRefAngle:15,grid:new r.vec(0,0,0,0),scale:48},d={editItem:0,pts:[],rmPts:[],editItems:[new r.prim("polyline",[],u({},r.propsDefault))]},h={status:f,ui:g,cursor:p,layers:{layers:[]},scene:c.from(d)};function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=t.status;switch(e.subtype){case o.STATUS_RES:return Object.assign({},n,{resolution:new r.vec(e.vec2.x,e.vec2.y)});case o.STATUS_RASTER:return Object.assign({},n,{raster:!n.raster});case o.STATUS_EXPORT:return Object.assign({},n,{export:!n.export});default:return n}}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=t.ui;switch(e.subtype){case o.UI_POINTS:return Object.assign({},n,{points:!n.points});case o.UI_TARGETHOME:return Object.assign({},n,{targeting:e.toggle});case o.DRAW_WEIGHT:return Object.assign({},n,{properties:Object.assign({},n.properties,{weight:e.weight})});case o.DRAW_RADIUS:return Object.assign({},n,{properties:Object.assign({},n.properties,{radius:e.radius})});case o.DRAW_OPACITY:return Object.assign({},n,{properties:Object.assign({},n.properties,{opacity:e.opacity})});case o.DRAW_FILL:return Object.assign({},n,{properties:Object.assign({},n.properties,{fill:e.hex})});case o.DRAW_STROKE:return Object.assign({},n,{properties:Object.assign({},n.properties,{stroke:e.hex.slice()})});case o.DRAW_FILTER:return Object.assign({},n,{properties:Object.assign({},n.properties,{filter:e.filter})});default:return n}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=t.cursor;switch(e.subtype){case o.CURSOR_SET:var i={x:e.vec2.x,y:e.vec2.y},c=t.scene.pts,s=t.scene.editItems[t.scene.editItem].pts;if(n.snapPt){var l=a.ptTree.nearest(i,1);if(l.length>0&&l[0][1]<1e-4)return i=l[0][0],Object.assign({},n,{pos:i})}if(n.snapGrid)return i.x=Math.round(i.x/n.grid.x)*n.grid.x+1e-18,i.y=Math.round(i.y/n.grid.y)*n.grid.y+1e-18,Object.assign({},n,{pos:i});if(n.snapGlobal&&s.length>0){var f=u({},c[c.length-1]),g=u({},f);g.x=g.x-i.x,g.y=g.y-i.y;var p=r.angleVec(g)*(180/Math.PI),d=Math.round(p/n.snapGlobalAngle)*n.snapGlobalAngle;d*=Math.PI/180;var m=r.lengthVec(g);return i.x=f.x-m*Math.cos(d),i.y=f.y-m*Math.sin(d),Object.assign({},n,{pos:i})}if(n.snapRef&&s.length>1){var y=u({},c[c.length-1]),v=u({},c[c.length-2]),b=u({},y),_=u({},v);b.x=b.x-i.x,b.y=b.y-i.y;var w=r.normVec(b);_.x=y.x-_.x,_.y=y.y-_.y;var x=r.normVec(_),S=r.dotVec(w,x),E=x.x*w.y-x.y*w.x,k=Math.atan2(E,S)*(180/Math.PI),A=Math.round(k/n.snapRefAngle)*n.snapRefAngle;A=A*(Math.PI/180)+r.angleVec(_),i.x=y.x-r.lengthVec(b)*Math.cos(A),i.y=y.y-r.lengthVec(b)*Math.sin(A)}return Object.assign({},n,{pos:i});case o.CURSOR_SNAPGLOBAL:return Object.assign({},n,{snapGlobal:!n.snapGlobal});case o.CURSOR_SNAPREF:return Object.assign({},n,{snapRef:!n.snapRef});case o.CURSOR_SNAPGRID:return Object.assign({},n,{snapGrid:!n.snapGrid});case o.CURSOR_SNAPPT:return Object.assign({},n,{snapPt:!n.snapPt});case o.CURSOR_GRIDSCALE:return Object.assign({},n,{scale:e.int});case o.CURSOR_GRID:return Object.assign({},n,{grid:e.vec4});default:return n}}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=t.layers;switch(e.subtype){case o.LAYER_PUSH:return Object.assign({},n,{layers:n.layers.slice().push(e.layer)});case o.LAYER_POP:return Object.assign({},n,{layers:n.layers.filter((function(t){return t.id!==e.layerID}))});case o.LAYER_UPDATE:return;default:return n}}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=t.scene,i=-1;switch(e.subtype){case o.SCENE_ADDPT:var a=new r.vec(e.pt.x,e.pt.y,e.pt.z,e.pt.w,n.editItems[n.editItem].id,e.pt.id,!0);return c.change(n,"added a point: "+e.pt.id,(function(t){t.editItems[t.editItem].pts.push(a.id),t.pts.push(a)}));case o.SCENE_RMVPT:i=n.pts.findIndex((function(t){return t.id===e.pt.id}));var s=n.editItems[n.editItem].pts.findIndex((function(t){return t===e.pt.id}));return c.change(n,"staged a point for removal: "+e.pt.id,(function(t){t.editItems[t.editItem].pts.deleteAt(s),t.rmPts.push(t.pts[i].id.slice()),t.pts.deleteAt(i)}));case o.SCENE_FINRMVPT:return i=n.rmPts.findIndex((function(t){return t===e.id})),c.change(n,"finished removing a pt: "+e.id,(function(t){t.rmPts.deleteAt(i)}));case o.SCENE_EDITUPDATE:return c.change(n,"updated edit item properties",(function(t){t.editItems[t.editItem].needsUpdate=!0}));case o.SCENE_PUSHEDITITEM:return c.change(n,"push edit item",(function(o){o.editItem=n.editItem+1,o.editItems.push(new r.prim(e.primType,[],u({},t.ui.properties)))}));case o.SCENE_NEWEDITITEM:return c.change(n,"new edit item",(function(o){o.editItems[n.editItem]=new r.prim(e.primType,[],u({},t.ui.properties))}));case o.SCENE_RMVITEM:return c.change(n,"remove edit item "+e.id,(function(t){var r=n.editItems.findIndex((function(t){return t.id===e.id}));t.editItems.deleteAt(r)}));case o.SCENE_EDITPROPS:return c.change(n,"update edit properties",(function(e){e.editItems[e.editItem].properties=u({},t.ui.properties)}));case o.SCENE_ITEMUPDATE:return c.change(n,"edit item update",(function(t){t.editItems[e.index].needsUpdate=e.toggle}));default:return n}}var w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;if(!t)return console.error("Reducer got null state. Should be initialized"),h;switch(e.type){case o.status:return Object.assign({},t,{status:m(t,e)});case o.cursor:return Object.assign({},t,{cursor:v(t,e)});case o.ui:return Object.assign({},t,{ui:y(t,e)});case o.layers:return Object.assign({},t,{layers:b(t,e)});case o.scene:return Object.assign({},t,{scene:_(t,e)});default:return t}}},function(t,e,n){"use strict";n.r(e),function(t,r){function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"__DO_NOT_USE__ActionTypes",(function(){return g})),n.d(e,"applyMiddleware",(function(){return b})),n.d(e,"bindActionCreators",(function(){return y})),n.d(e,"combineReducers",(function(){return h})),n.d(e,"compose",(function(){return v})),n.d(e,"createStore",(function(){return p}));var l=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r),f=function(){return Math.random().toString(36).substring(7).split("").join(".")},g={INIT:"@@redux/INIT".concat(f()),REPLACE:"@@redux/REPLACE".concat(f()),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION".concat(f())}};function p(t,e,n){if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(p)(t,e)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var r=t,o=e,i=[],a=i,c=!1;function f(){a===i&&(a=i.slice())}function d(){if(c)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function h(t){if("function"!=typeof t)throw Error("Expected the listener to be a function.");if(c)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return f(),a.push(t),function(){if(e){if(c)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,f();var n=a.indexOf(t);a.splice(n,1),i=null}}}function m(t){if(!function(t){if("object"!=u(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw Error("Reducers may not dispatch actions.");try{c=!0,o=r(o,t)}finally{c=!1}for(var e=i=a,n=0;e.length>n;n++)(0,e[n])();return t}return m({type:g.INIT}),s({dispatch:m,subscribe:h,getState:d,replaceReducer:function(t){if("function"!=typeof t)throw Error("Expected the nextReducer to be a function.");r=t,m({type:g.REPLACE})}},l,(function(){var t=h;return s({subscribe:function(e){if("object"!=u(e)||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}},l,(function(){return this}))}))}function d(t,e){var n=e&&e.type;return"Given ".concat(n&&'action "'.concat(n+"",'"')||"an action",', reducer "').concat(t,'" returned undefined. ')+"To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined."}function h(t){for(var e=Object.keys(t),n={},r=0;e.length>r;r++){var o=e[r];"function"==typeof t[o]&&(n[o]=t[o])}var i,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:g.INIT}))throw Error('Reducer "'.concat(e,'" returned undefined during initialization. ')+"If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:g.PROBE_UNKNOWN_ACTION()}))throw Error('Reducer "'.concat(e,'" returned undefined when probed with a random type. ')+"Don't try to handle ".concat(g.INIT,' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")}))}(n)}catch(t){i=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(i)throw i;for(var r=!1,o={},c=0;a.length>c;c++){var s=a[c],u=t[s],l=(0,n[s])(u,e);if(void 0===l){var f=d(s,e);throw Error(f)}o[s]=l,r=r||l!==u}return(r=r||a.length!==Object.keys(t).length)?o:t}}function m(t,e){return function(){return e(t.apply(this,arguments))}}function y(t,e){if("function"==typeof t)return m(t,e);if("object"!=u(t)||null===t)throw Error("bindActionCreators expected an object or a function, instead received ".concat(null===t?"null":u(t),". ")+'Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in t){var o=t[r];"function"==typeof o&&(n[r]=m(o,e))}return n}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function b(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},c=e.map((function(t){return t(o)}));return r=v.apply(void 0,a(c))(n.dispatch),i(i({},n),{},{dispatch:r})}}}}.call(this,n(18),n(19)(t))},function(t,e,n){var r,o,i;
/**
 * k-d Tree JavaScript - V 1.01
 *
 * https://github.com/ubilabs/kd-tree-javascript
 *
 * @author Mircea Pricop <pricop@ubilabs.net>, 2012
 * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
 * @author Ubilabs http://ubilabs.net, 2012
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */o=[e],void 0===(i="function"==typeof(r=function(t){function e(t,e,n){this.obj=t,this.left=null,this.right=null,this.parent=n,this.dimension=e}function n(t){this.content=[],this.scoreFunction=t}n.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]==t){var r=this.content.pop();return void(n!=e-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var o=2*(t+1),i=o-1,a=null;if(i<e){var c=this.content[i],s=this.scoreFunction(c);s<r&&(a=i)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null==a?r:s)&&(a=o)}if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},t.kdTree=function(t,r,o){var i=this;Array.isArray(t)?this.root=function t(n,r,i){var a,c,s=r%o.length;return 0===n.length?null:1===n.length?new e(n[0],s,i):(n.sort((function(t,e){return t[o[s]]-e[o[s]]})),(c=new e(n[a=Math.floor(n.length/2)],s,i)).left=t(n.slice(0,a),r+1,c),c.right=t(n.slice(a+1),r+1,c),c)}(t,0,null):function(t){i.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(i.root)}(t),this.toJSON=function(t){t||(t=this.root);var n=new e(t.obj,t.dimension,null);return t.left&&(n.left=i.toJSON(t.left)),t.right&&(n.right=i.toJSON(t.right)),n},this.insert=function(t){var n,r,i=function e(n,r){if(null===n)return r;var i=o[n.dimension];return t[i]<n.obj[i]?e(n.left,n):e(n.right,n)}(this.root,null);null!==i?(n=new e(t,(i.dimension+1)%o.length,i),r=o[i.dimension],t[r]<i.obj[r]?i.left=n:i.right=n):this.root=new e(t,0,null)},this.remove=function(t){var e;null!==(e=function e(n){if(null===n)return null;if(n.obj===t)return n;var r=o[n.dimension];return t[r]<n.obj[r]?e(n.left):e(n.right)}(i.root))&&function t(e){function n(t,e){var r,i,a,c,s;return null===t?null:(r=o[e],t.dimension===e?null!==t.left?n(t.left,e):t:(i=t.obj[r],a=n(t.left,e),c=n(t.right,e),s=t,null!==a&&a.obj[r]<i&&(s=a),null!==c&&c.obj[r]<s.obj[r]&&(s=c),s))}var r,a,c;if(null===e.left&&null===e.right)return null===e.parent?void(i.root=null):(c=o[e.parent.dimension],void(e.obj[c]<e.parent.obj[c]?e.parent.left=null:e.parent.right=null));null!==e.right?(a=(r=n(e.right,e.dimension)).obj,t(r),e.obj=a):(a=(r=n(e.left,e.dimension)).obj,t(r),e.right=e.left,e.left=null,e.obj=a)}(e)},this.nearest=function(t,e,a){var c,s,u;if(u=new n((function(t){return-t[1]})),a)for(c=0;c<e;c+=1)u.push([null,a]);for(i.root&&function n(i){function a(t,n){u.push([t,n]),u.size()>e&&u.pop()}var c,s,l,f,g=o[i.dimension],p=r(t,i.obj),d={};for(f=0;f<o.length;f+=1)f===i.dimension?d[o[f]]=t[o[f]]:d[o[f]]=i.obj[o[f]];s=r(d,i.obj),null!==i.right||null!==i.left?(n(c=null===i.right?i.left:null===i.left?i.right:t[g]<i.obj[g]?i.left:i.right),(u.size()<e||p<u.peek()[1])&&a(i,p),(u.size()<e||Math.abs(s)<u.peek()[1])&&null!==(l=c===i.left?i.right:i.left)&&n(l)):(u.size()<e||p<u.peek()[1])&&a(i,p)}(i.root),s=[],c=0;c<Math.min(e,u.content.length);c+=1)u.content[c][0]&&s.push([u.content[c][0].obj,u.content[c][1]]);return s},this.balanceFactor=function(){return function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}(i.root)/(Math.log(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(i.root))/Math.log(2))}},t.BinaryHeap=n})?r.apply(e,o):r)||(t.exports=i)},,function(t,e,n){n(2),n(10),n(12),n(0),n(4),n(3),n(13),n(20),n(22),n(24),n(7),n(26),n(6),t.exports=n(14)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){var r=n(11),o=n(21);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);t.exports=o.locals||{}},function(t,e,n){"use strict";n.r(e);var r=n(9),o=n.n(r)()(!1);o.push([t.i,"html, body {\n   margin: 0;\n   height: 100%;\n\n   background-color: #f2f4f5;\n}\n\n#zkbYdP3XiOI59zBHHIjtv{\n  width:  75%;\n  height: 90%;\n\n  left: 20%;\n  top: 5%;\n\n  position: absolute;\n\n  -webkit-box-shadow: 0px 0px 8px 5px rgba(184,184,184,1);\n  -moz-box-shadow: 0px 0px 8px 5px rgba(184,184,184,1);\n  box-shadow: 0px 0px 8px 5px rgba(184,184,184,1);\n\n  border-style: solid;\n  border-color: #ccc;\n  border-width: 1px;\n}\n\n#_2gBRdUwBbFY42QZO_pVqPx {\n   width: 100%;\n   height: 100%;\n   /* width:  75%;\n   height: 90%;\n\n   left: 20%;\n   top: 5%; */\n\n   position: absolute;\n\n   /* -webkit-box-shadow: 0px 0px 8px 5px rgba(184,184,184,1);\n   -moz-box-shadow: 0px 0px 8px 5px rgba(184,184,184,1);\n   box-shadow: 0px 0px 8px 5px rgba(184,184,184,1);\n\n   border-style: solid;\n   border-color: #ccc;\n   border-width: 1px; */\n}\n\n#_3_C75jlFlOs5t1IApd67ML {\n  width: 100%;\n  height: 100%;\n\n  position: absolute;\n\n  left: 0px;\n  top: 0px;\n}\n\n#_3rUxERR_PD-WVGI-po3hg7{\n  width: 100%;\n  height: 100%;\n  display: block;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n}\n\n#zpuPGTO8UgXYK0m8XY7Iv{\n  position: absolute;\n  bottom: 0vmin;\n  right: 1vmin;\n\n  font: bold 6vmin Helvetica;\n  font-style: italic;\n\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n  user-select: none;          /* Likely future */\n}\n\n._16uzDOtcnc1HddzlBXSRE1 {\n  -webkit-appearance: none;\n  width: 85%;\n  height: 10%;\n  /* background: #111111; */\n  background-image: linear-gradient(to right, #FFFFFF , #000000);\n  outline: none;\n  -webkit-transition: .2s;\n  transition: opacity .2s;\n}\n\n._16uzDOtcnc1HddzlBXSRE1::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 7px;\n  height: 20px;\n  background: #000000;\n  cursor: pointer;\n}\n\n/* .slider::-webkit-slider-thumb:hover {\n  opacity: 1;\n} */\n\n._16uzDOtcnc1HddzlBXSRE1::-moz-range-thumb {\n  width: 7px;\n  height: 20px;\n  background: #AAAAAA;\n  cursor: pointer;\n}\n\n.hlztdM1H06mJXEuJULQEr {\n  -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n     -khtml-user-select: none; /* Konqueror HTML */\n       -moz-user-select: none; /* Old versions of Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Opera and Firefox */\n}\n\n/* https://www.w3schools.com/howto/howto_js_snackbar.asp */\n/* The snackbar - position it at the bottom and in the middle of the screen */\n#_11bw3LWFrPpPJO06CGc4t2 {\n  visibility: hidden; /* Hidden by default. Visible on click */\n  min-width: 200px; /* Set a default minimum width */\n  margin-left: -100px; /* Divide value of min-width by 2 */\n  color: #fff; /* White text color */\n  text-align: center; /* Centered text */\n  border-radius: 1.25vmin;\n  box-shadow: 2px 2px 2px .5px rgba(136, 161, 180, 0.6);\n  padding: 1.75vmin; /* Padding */\n  position: fixed; /* Sit on top of the screen */\n  z-index: 1; /* Add a z-index if needed */\n  left: 50%; /* Center the snackbar */\n  bottom: 30px; /* 30px from the bottom */\n\n  font: 2vmin Helvetica;\n}\n\n/* Show the snackbar when clicking on a button (class added with JavaScript) */\n#_11bw3LWFrPpPJO06CGc4t2._2Vm2dg2Qunolpad-ur5cnX {\n  visibility: visible; /* Show the snackbar */\n  /* Add animation: Take 0.5 seconds to fade in and out the snackbar.\n  However, delay the fade out process for 2.5 seconds */\n  -webkit-animation: _1YcUwOyhdW-IMOqRSrW9g8 0.5s, _2jJS33MHvhkBQeT4yjY7_R 0.5s 1.5s;\n  animation: _1YcUwOyhdW-IMOqRSrW9g8 0.5s, _2jJS33MHvhkBQeT4yjY7_R 0.5s 1.5s;\n}\n\n/* Animations to fade the snackbar in and out */\n@-webkit-keyframes _1YcUwOyhdW-IMOqRSrW9g8 {\n  from {bottom: 0; opacity: 0;}\n  to {bottom: 30px; opacity: 1;}\n}\n\n@keyframes _1YcUwOyhdW-IMOqRSrW9g8 {\n  from {bottom: 0; opacity: 0;}\n  to {bottom: 30px; opacity: 1;}\n}\n\n@-webkit-keyframes _2jJS33MHvhkBQeT4yjY7_R {\n  from {bottom: 30px; opacity: 1;}\n  to {bottom: 0; opacity: 0;}\n}\n\n@keyframes _2jJS33MHvhkBQeT4yjY7_R {\n  from {bottom: 30px; opacity: 1;}\n  to {bottom: 0; opacity: 0;}\n}\n",""]),o.locals={canvasContainer:"zkbYdP3XiOI59zBHHIjtv",c:"_2gBRdUwBbFY42QZO_pVqPx",text:"_3_C75jlFlOs5t1IApd67ML","draw-shapes":"_3rUxERR_PD-WVGI-po3hg7",Laminar:"zpuPGTO8UgXYK0m8XY7Iv",slider:"_16uzDOtcnc1HddzlBXSRE1",noselect:"hlztdM1H06mJXEuJULQEr",snackbar:"_11bw3LWFrPpPJO06CGc4t2",show:"_2Vm2dg2Qunolpad-ur5cnX",fadein:"_1YcUwOyhdW-IMOqRSrW9g8",fadeout:"_2jJS33MHvhkBQeT4yjY7_R"},e.default=o},function(t,e,n){var r=n(11),o=n(23);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);t.exports=o.locals||{}},function(t,e,n){"use strict";n.r(e);var r=n(9),o=n.n(r)()(!1);o.push([t.i,'/*tooltip.css*/\n/*https://chrisbracco.com/a-simple-css-tooltip/*/\n\n/**\n * Tooltip Styles\n */\n\n/* Base styles for the element that has a tooltip */\n[data-tooltip],\n._3jOmk2upsVqaVA17A7wors {\n  position: relative;\n  cursor: pointer;\n}\n\n/* Base styles for the entire tooltip */\n[data-tooltip]:before,\n[data-tooltip]:after,\n._3jOmk2upsVqaVA17A7wors:before,\n._3jOmk2upsVqaVA17A7wors:after {\n  position: absolute;\n  visibility: hidden;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);\n  opacity: 0;\n  -webkit-transition:\n      opacity 0.2s ease-in-out,\n        visibility 0.2s ease-in-out,\n        -webkit-transform 0.2s cubic-bezier(0.71, 1.7, 0.77, 1.24);\n    -moz-transition:\n        opacity 0.2s ease-in-out,\n        visibility 0.2s ease-in-out,\n        -moz-transform 0.2s cubic-bezier(50.71, 1.7, 0.77, 1.24);\n    transition:\n        opacity 0.2s ease-in-out,\n        visibility 0.2s ease-in-out,\n        transform 0.2s cubic-bezier(0.71, 1.7, 0.77, 1.24);\n  -webkit-transform: translate3d(0, 0, 0);\n  -moz-transform:    translate3d(0, 0, 0);\n  transform:         translate3d(0, 0, 0);\n  pointer-events: none;\n}\n\n/* Show the entire tooltip on hover and focus */\n[data-tooltip]:hover:before,\n[data-tooltip]:hover:after,\n[data-tooltip]:focus:before,\n[data-tooltip]:focus:after,\n._3jOmk2upsVqaVA17A7wors:hover:before,\n._3jOmk2upsVqaVA17A7wors:hover:after,\n._3jOmk2upsVqaVA17A7wors:focus:before,\n._3jOmk2upsVqaVA17A7wors:focus:after {\n  visibility: visible;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n  opacity: 1;\n}\n\n/* Base styles for the tooltip\'s directional arrow */\n._3jOmk2upsVqaVA17A7wors:before,\n[data-tooltip]:before {\n  z-index: 1001;\n  border: 6px solid transparent;\n  background: transparent;\n  content: "";\n}\n\n/* Base styles for the tooltip\'s content area */\n._3jOmk2upsVqaVA17A7wors:after,\n[data-tooltip]:after {\n  z-index: 1000;\n  padding: 8px;\n  width: 160px;\n  background-color: #000;\n  background-color: hsla(0, 0%, 20%, 0.9);\n  color: #fff;\n  content: attr(data-tooltip);\n  font-size: 14px;\n  line-height: 1.2;\n}\n\n/* Directions */\n\n/* Top (default) */\n[data-tooltip]:before,\n[data-tooltip]:after,\n._3jOmk2upsVqaVA17A7wors:before,\n._3jOmk2upsVqaVA17A7wors:after,\n._2o9zZUbZNHCgzhe_VdsT9C:before,\n._2o9zZUbZNHCgzhe_VdsT9C:after {\n  bottom: 100%;\n  left: 50%;\n}\n\n[data-tooltip]:before,\n._3jOmk2upsVqaVA17A7wors:before,\n._2o9zZUbZNHCgzhe_VdsT9C:before {\n  margin-left: -6px;\n  margin-bottom: -12px;\n  border-top-color: #000;\n  border-top-color: hsla(0, 0%, 20%, 0.9);\n}\n\n/* Horizontally align top/bottom tooltips */\n[data-tooltip]:after,\n._3jOmk2upsVqaVA17A7wors:after,\n._2o9zZUbZNHCgzhe_VdsT9C:after {\n  margin-left: -80px;\n}\n\n[data-tooltip]:hover:before,\n[data-tooltip]:hover:after,\n[data-tooltip]:focus:before,\n[data-tooltip]:focus:after,\n._3jOmk2upsVqaVA17A7wors:hover:before,\n._3jOmk2upsVqaVA17A7wors:hover:after,\n._3jOmk2upsVqaVA17A7wors:focus:before,\n._3jOmk2upsVqaVA17A7wors:focus:after,\n._2o9zZUbZNHCgzhe_VdsT9C:hover:before,\n._2o9zZUbZNHCgzhe_VdsT9C:hover:after,\n._2o9zZUbZNHCgzhe_VdsT9C:focus:before,\n._2o9zZUbZNHCgzhe_VdsT9C:focus:after {\n  -webkit-transform: translateY(-12px);\n  -moz-transform:    translateY(-12px);\n  transform:         translateY(-12px);\n}\n\n/* Left */\n._1hvvEfLvvtVvB0N9tEzaJZ:before,\n._1hvvEfLvvtVvB0N9tEzaJZ:after {\n  right: 100%;\n  bottom: 50%;\n  left: auto;\n}\n\n._1hvvEfLvvtVvB0N9tEzaJZ:before {\n  margin-left: 0;\n  margin-right: -12px;\n  margin-bottom: 0;\n  border-top-color: transparent;\n  border-left-color: #000;\n  border-left-color: hsla(0, 0%, 20%, 0.9);\n}\n\n._1hvvEfLvvtVvB0N9tEzaJZ:hover:before,\n._1hvvEfLvvtVvB0N9tEzaJZ:hover:after,\n._1hvvEfLvvtVvB0N9tEzaJZ:focus:before,\n._1hvvEfLvvtVvB0N9tEzaJZ:focus:after {\n  -webkit-transform: translateX(-12px);\n  -moz-transform:    translateX(-12px);\n  transform:         translateX(-12px);\n}\n\n/* Bottom */\n._17BH9b4rmq9U8fiJHXLe3S:before,\n._17BH9b4rmq9U8fiJHXLe3S:after {\n  top: 100%;\n  bottom: auto;\n  left: 50%;\n}\n\n._17BH9b4rmq9U8fiJHXLe3S:before {\n  margin-top: -12px;\n  margin-bottom: 0;\n  border-top-color: transparent;\n  border-bottom-color: #000;\n  border-bottom-color: hsla(0, 0%, 20%, 0.9);\n}\n\n._17BH9b4rmq9U8fiJHXLe3S:hover:before,\n._17BH9b4rmq9U8fiJHXLe3S:hover:after,\n._17BH9b4rmq9U8fiJHXLe3S:focus:before,\n._17BH9b4rmq9U8fiJHXLe3S:focus:after {\n  -webkit-transform: translateY(12px);\n  -moz-transform:    translateY(12px);\n  transform:         translateY(12px);\n}\n\n/* Right */\n._2KMf8rw4LK1ZwgBdLfAEmC:before,\n._2KMf8rw4LK1ZwgBdLfAEmC:after {\n  bottom: 50%;\n  left: 100%;\n}\n\n._2KMf8rw4LK1ZwgBdLfAEmC:before {\n  margin-bottom: 0;\n  margin-left: -12px;\n  border-top-color: transparent;\n  border-right-color: #000;\n  border-right-color: hsla(0, 0%, 20%, 0.9);\n}\n\n._2KMf8rw4LK1ZwgBdLfAEmC:hover:before,\n._2KMf8rw4LK1ZwgBdLfAEmC:hover:after,\n._2KMf8rw4LK1ZwgBdLfAEmC:focus:before,\n._2KMf8rw4LK1ZwgBdLfAEmC:focus:after {\n  -webkit-transform: translateX(12px);\n  -moz-transform:    translateX(12px);\n  transform:         translateX(12px);\n}\n\n/* Move directional arrows down a bit for left/right tooltips */\n._1hvvEfLvvtVvB0N9tEzaJZ:before,\n._2KMf8rw4LK1ZwgBdLfAEmC:before {\n  top: 3px;\n}\n\n/* Vertically center tooltip content for left/right tooltips */\n._1hvvEfLvvtVvB0N9tEzaJZ:after,\n._2KMf8rw4LK1ZwgBdLfAEmC:after {\n  margin-left: 0;\n  margin-bottom: -16px;\n}\n',""]),o.locals={tooltip:"_3jOmk2upsVqaVA17A7wors","tooltip-top":"_2o9zZUbZNHCgzhe_VdsT9C","tooltip-left":"_1hvvEfLvvtVvB0N9tEzaJZ","tooltip-bottom":"_17BH9b4rmq9U8fiJHXLe3S","tooltip-right":"_2KMf8rw4LK1ZwgBdLfAEmC"},e.default=o},function(t,e,n){var r=n(11),o=n(25);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);t.exports=o.locals||{}},function(t,e,n){"use strict";n.r(e);var r=n(9),o=n.n(r)()(!1);o.push([t.i,"#kL8Hn3ZMpwo2RWET19crZ{\n  /* background-color: rgba(172, 172, 180, 0.25); */\n  /* box-shadow: 2px 2px 2px .5px rgba(136, 161, 180, 0.6); */\n\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n\n  bottom:1%;\n  left:1%;\n  z-index: 10;\n\n  width: 22%;\n  height: 98%;\n  max-width: 200px;\n}\n\n#_1kLc8eqfaqLMTj1Pk94yxH{\n  background-color: rgba(172, 172, 180, 0.25);\n  box-shadow: 2px 2px 2px .5px rgba(136, 161, 180, 0.6);\n\n  justify-content: flex-end;\n\n  width: 96%;\n  height: 19%;\n  max-width: 300px;\n  bottom: 1%;\n\n  box-sizing: border-box;\n  padding-bottom: 2%;\n}\n\n#_3fzvbulZ5ROVXm9WUgDKLC{\n  background-color: rgba(172, 172, 180, 0.25);\n  box-shadow: 2px 2px 2px .5px rgba(136, 161, 180, 0.6);\n\n  width: 96%;\n  height: 24%;\n  max-width: 300px;\n  bottom: 21%;\n\n  box-sizing: border-box;\n  padding-top: 1vh;\n}\n\n#_2ZQeCHX0brxsShMR0fM1zi{\n  background-color: rgba(172, 172, 180, 0.25);\n  box-shadow: 2px 2px 2px .5px rgba(136, 161, 180, 0.6);\n\n  justify-content: flex-start;\n\n  width: 96%;\n  height: 54%;\n  max-width: 300px;\n  bottom: 46%;\n}\n\n#Kg1DISZXQqCys0_1wo6A-{\n  width:96%;\n  margin-top:1vh;\n}\n\n#Lox6yDLW0-PRoIvsmfRDe{\n  width:96%;\n  margin-top:1vh;\n}\n\n#_3jA49a7XG7N9DaiIcwq-1W{\n  width:92%;\n  margin-top:1vh;\n}\n\n#P0aRwfe-4rc7NUxINblUk{\n  width:92%;\n  margin-top:1vh;\n}\n\n._1dXeuRxkhJgWLJxRrATkgg{\n  width:92%;\n  margin-top:1vh;\n}\n\n._2QoHxlwqZdAU_wf_wKruXm{\n  /* background-color: rgba(172, 172, 180, 0.25);\n  box-shadow: 2px 2px 2px .5px rgba(136, 161, 180, 0.6); */\n  border-radius: 0.25vmin;\n\n  box-sizing: border-box;\n\n  position: absolute;\n  display: flex;\n  /* padding-bottom: 1%; */\n  padding-top: 1%;\n\n  flex-direction: column;\n  align-items: center;\n\n  /* overflow: hidden; */\n}\n\n/* https://www.w3schools.com/howto/howto_js_snackbar.asp */\n/* The snackbar - position it at the bottom and in the middle of the screen */\n.QzSZosFFh6cyVy5RGn9bH {\n  min-width: 150px; /* Set a default minimum width */\n  color: black; /* White text color */\n\n  box-sizing: border-box;\n  padding-left: 5%;\n\n  display: flex;\n  justify-content: left;\n  align-items: center;\n\n  border-radius: 0.25vmin;\n  width: 96%;\n  height: 2.75vh;\n  font: 1.5vmin Helvetica;\n  font-weight: bold;\n  margin-top: 1%;\n\n}\n\n._3C2R3t5Iigh4pxbPxGjuY5 {\n  min-width: 150px; /* Set a default minimum width */\n  color: black; /* White text color */\n\n  box-sizing: border-box;\n  padding-left: 5%;\n\n  display: flex;\n  justify-content: left;\n  align-items: center;\n\n  border-radius: 0.25vmin;\n  width: 96%;\n  height: 2.75vh;\n  font: 1.5vmin Helvetica;\n  font-weight: bold;\n  margin-top: 1%;\n\n  -webkit-transition: background-color 100ms ease-out; /* Safari prior 6.1 */\n  transition: background-color 100ms ease-out;\n}\n\n._25qBxpxXiHMf7WZvnAmFzj {\n  min-width: 150px; /* Set a default minimum width */\n  color: black; /* White text color */\n\n  box-sizing: border-box;\n  padding-left: 5%;\n\n  display: flex;\n  justify-content: left;\n  align-items: center;\n\n  border-radius: 0.25vmin;\n  width: 96%;\n  height: 2.75vh;\n  font: 1.6vmin Helvetica;\n  font-weight: bold;\n  margin-top: 1%;\n\n  -webkit-transition: background-color 100ms ease-out; /* Safari prior 6.1 */\n  transition: background-color 100ms ease-out;\n}\n\n.fFmEDs3w6k-p4Yw9y8uGm{\n  -webkit-animation: _2yHuZgbzthrj5EohlgsM3Z 1s;\n  animation: _2yHuZgbzthrj5EohlgsM3Z 1s;\n}\n\n.naadUph7C-fUOv_BaYllm{\n  -webkit-animation: _1VnUweoqt2iXNeQqDAyjmB 1s;\n  animation: _1VnUweoqt2iXNeQqDAyjmB 1s;\n}\n\n/* Animations to fade the snackbar in and out */\n@-webkit-keyframes _2yHuZgbzthrj5EohlgsM3Z {\n  from {margin-left: -500px; opacity: 0;}\n  to {margin-left: 0px; opacity: 1;}\n}\n\n@keyframes _2yHuZgbzthrj5EohlgsM3Z {\n  from {margin-left: -500px; opacity: 0;}\n  to {margin-left: 0px; opacity: 1;}\n}\n\n@-webkit-keyframes _1VnUweoqt2iXNeQqDAyjmB {\n  from {margin-left: 0px; opacity: 1; height:2.75vh}\n  to {margin-left: -500px; opacity: 0; height:0vh}\n}\n\n@keyframes _1VnUweoqt2iXNeQqDAyjmB {\n  from {margin-left: 0px; opacity: 1; height:2.75vh}\n  to {margin-left: -500px; opacity: 0; height:0vh}\n}\n\n/* could custom properties be good for this? */\n._3yMDTne0iyHObMCNBS6LBN {\n  background-color: rgba(237, 55, 67, 0.25);\n}\n\n._3yMDTne0iyHObMCNBS6LBN:hover {\n  background-color: rgba(237, 55, 67, .75);\n}\n\n._2QRljc3mF17fXrXt5o95KZ {\n  background-color: rgba(237, 55, 67, .75);\n}\n\n._2PX6fYXbniRV_rwpDmsuZm {\n  background-color: rgba(251, 91, 0, 0.25);\n}\n\n._2PX6fYXbniRV_rwpDmsuZm:hover {\n  background-color: rgba(251, 91, 0, .75);\n}\n\n.KGfNztXdq4f8_0K7eL9HE {\n  background-color: rgba(251, 91, 0, .75);\n}\n\n._3z7l_r1dqO1Tn7WZ-gLqA1 {\n  background-color: rgba(0, 98, 174, 0.25);\n}\n\n._3z7l_r1dqO1Tn7WZ-gLqA1:hover {\n  background-color: rgba(0, 98, 174, 0.75);\n}\n\n._2YDtDSvkZXylW4N_Qn7N4- {\n  background-color: rgba(0, 98, 174, 0.75);\n}\n\n._3P_Mud1tcQn7jUo37VPbGJ {\n  background-color: rgba(0, 98, 174, 0.25);\n}\n\n._3P_Mud1tcQn7jUo37VPbGJ:hover {\n  background-color: rgba(0, 98, 174, .75);\n}\n\n._3pTRRGrwDhiYFpLHOdj300 {\n  background-color: rgba(0, 98, 174, .75);\n}\n\n._205LAAuWvl-lMHAH0WXIC4 {\n  background-color: rgba(0, 111, 80, 0.25);\n}\n\n._205LAAuWvl-lMHAH0WXIC4:hover {\n  background-color: rgba(0, 111, 80, .75);\n}\n\n.zeXwjqABj3HypqcdD8lay {\n  background-color: rgba(0, 111, 80, .75);\n}\n\n._2xZykmfmMinIxj8ZGHUuWj {\n  background-color: rgba(0, 111, 80, 0.25);\n}\n\n._2xZykmfmMinIxj8ZGHUuWj:hover {\n  background-color: rgba(0, 111, 80, .75);\n}\n\n._2Kvsavvs3JL2P31FRLV1Y1 {\n  background-color: rgba(0, 111, 80, .75);\n}\n",""]),o.locals={"left-pane":"kL8Hn3ZMpwo2RWET19crZ","mode-stack":"_1kLc8eqfaqLMTj1Pk94yxH","input-stack":"_3fzvbulZ5ROVXm9WUgDKLC","button-stack":"_2ZQeCHX0brxsShMR0fM1zi","primitive-select":"Kg1DISZXQqCys0_1wo6A-","filter-select":"Lox6yDLW0-PRoIvsmfRDe","strokeColor-select":"_3jA49a7XG7N9DaiIcwq-1W","strokeWeight-range":"P0aRwfe-4rc7NUxINblUk",input:"_1dXeuRxkhJgWLJxRrATkgg",stack:"_2QoHxlwqZdAU_wf_wKruXm","mode-hint":"QzSZosFFh6cyVy5RGn9bH","button-hint":"_3C2R3t5Iigh4pxbPxGjuY5","button-header":"_25qBxpxXiHMf7WZvnAmFzj","enter-left":"fFmEDs3w6k-p4Yw9y8uGm",enterleft:"_2yHuZgbzthrj5EohlgsM3Z","exit-left":"naadUph7C-fUOv_BaYllm",exitleft:"_1VnUweoqt2iXNeQqDAyjmB",snap:"_3yMDTne0iyHObMCNBS6LBN","snap-active":"_2QRljc3mF17fXrXt5o95KZ",export:"_2PX6fYXbniRV_rwpDmsuZm","export-active":"KGfNztXdq4f8_0K7eL9HE",view:"_3z7l_r1dqO1Tn7WZ-gLqA1","view-active":"_2YDtDSvkZXylW4N_Qn7N4-",global:"_3P_Mud1tcQn7jUo37VPbGJ","global-active":"_3pTRRGrwDhiYFpLHOdj300",edit:"_205LAAuWvl-lMHAH0WXIC4","edit-active":"zeXwjqABj3HypqcdD8lay",primitives:"_2xZykmfmMinIxj8ZGHUuWj","primitives-active":"_2Kvsavvs3JL2P31FRLV1Y1"},e.default=o},function(t,e,n){"use strict";n.r(e),n.d(e,"sdfPrimVert",(function(){return r}));var r="\n//#version 300 es\n\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  vUv = gl_Position.xy;\n}\n\n"}]);